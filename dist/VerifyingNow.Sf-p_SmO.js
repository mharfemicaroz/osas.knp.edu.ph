import{_}from"./logo.Dx3Q79ni.js";import{u as w,r as n,c as k,s as h,o as S,y as V,a as i,b as N,d as C,e,f as T,g as j,t as u,p as B,q as r}from"./index.Dvg-5jwP.js";import{T as E}from"./ToasterComponent.C5Bya5Iu.js";import{_ as I}from"./_plugin-vue_export-helper.DlAUqK2U.js";const L={class:"min-h-screen relative overflow-hidden"},A={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},M={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},O={class:"w-full max-w-md"},R={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 transition"},q={class:"p-6 sm:p-7 text-center"},z={key:0,class:"space-y-3"},D={class:"text-sm text-gray-600"},Y={key:1,class:"space-y-3"},F={class:"text-sm text-gray-600"},G={key:2,class:"space-y-3"},H={class:"px-6 sm:px-7 pb-6"},K={class:"flex items-center justify-between text-[11px] text-gray-500"},P=Object.assign({name:"VerifyingNow"},{__name:"VerifyingNow",setup(U){const m=w(),b=h(),x=B(),s=n("loading"),o=n(3);let l=null;const a=n(""),c=n(null),g=k(()=>String(b.query.token||"")),f=()=>{l=setInterval(()=>{o.value>0&&(o.value-=1),o.value===0&&(clearInterval(l),d())},1e3)},d=()=>{x.replace({name:"login"})},v=async()=>{if(!g.value){s.value="error",a.value="Missing verification token.";return}try{await m.verifyEmail(g.value),s.value="success",c.value?.showToast?.("success","Email verified!"),f()}catch(p){s.value="error",a.value=p?.message||"Verification failed.",c.value?.showToast?.("warning",a.value)}},y=()=>{s.value="loading",a.value="",v()};return S(()=>{v()}),V(()=>{l&&clearInterval(l)}),(p,t)=>(r(),i("div",L,[t[8]||(t[8]=N('<div class="absolute inset-0" data-v-c8cc28c9><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-c8cc28c9></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-c8cc28c9></div><div class="absolute inset-0 backdrop-blur-sm" data-v-c8cc28c9></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-c8cc28c9></div></div>',1)),j(m).isLoading?(r(),i("div",A,t[0]||(t[0]=[e("div",{class:"loader"},null,-1)]))):C("",!0),e("div",M,[e("div",O,[t[7]||(t[7]=e("div",{class:"mb-6 text-center"},[e("img",{src:_,alt:"OSAS",class:"h-14 w-auto mx-auto"}),e("h1",{class:"mt-4 text-2xl font-extrabold tracking-wide text-white"},"Email Verification"),e("p",{class:"mt-1 text-primary-text/90 text-sm"},"Secure. Simple. Seamless.")],-1)),e("div",R,[e("div",q,[s.value==="success"?(r(),i("div",z,[t[1]||(t[1]=e("div",{class:"inline-grid h-12 w-12 place-items-center rounded-full bg-emerald-500/10 mx-auto"},[e("i",{class:"mdi mdi-check-decagram text-3xl text-emerald-600"})],-1)),t[2]||(t[2]=e("h2",{class:"text-lg font-bold text-gray-900"},"Your email is verified!",-1)),e("p",D,"Redirecting to login in "+u(o.value)+"s…",1),e("button",{class:"mt-2 py-2.5 px-4 rounded-xl bg-primary text-white font-semibold hover:bg-tertiary transition",onClick:d}," Go to Login now ")])):s.value==="error"?(r(),i("div",Y,[t[3]||(t[3]=e("div",{class:"inline-grid h-12 w-12 place-items-center rounded-full bg-rose-500/10 mx-auto"},[e("i",{class:"mdi mdi-alert-circle-outline text-3xl text-rose-600"})],-1)),t[4]||(t[4]=e("h2",{class:"text-lg font-bold text-gray-900"},"Verification failed",-1)),e("p",F,u(a.value||"The link may be invalid or expired."),1),e("button",{class:"mt-2 py-2.5 px-4 rounded-xl border border-gray-300/80 bg-white/70 font-semibold hover:bg-white transition",onClick:y}," Try again "),e("button",{class:"mt-2 ml-2 py-2.5 px-4 rounded-xl bg-primary text-white font-semibold hover:bg-tertiary transition",onClick:d}," Back to Login ")])):(r(),i("div",G,t[5]||(t[5]=[e("div",{class:"inline-grid h-12 w-12 place-items-center rounded-full bg-primary/10 mx-auto"},[e("i",{class:"mdi mdi-email-check-outline text-3xl text-primary"})],-1),e("h2",{class:"text-lg font-bold text-gray-900"},"Verifying your email…",-1),e("p",{class:"text-sm text-gray-600"},"Please wait a moment.",-1)])))]),e("div",H,[e("div",K,[t[6]||(t[6]=e("span",null,"OSAS Kiosk v1.0",-1)),e("span",null,"© "+u(new Date().getFullYear())+" Student Services",1)])])])])]),T(E,{ref_key:"toast",ref:c},null,512)]))}}),Z=I(P,[["__scopeId","data-v-c8cc28c9"]]);export{Z as default};
