import{c as V,r as q,u as ye,o as _e,C as oe,a as v,d as w,q as p,e,h,t as _,j as H,k,v as I,E as W,F as N,G as z,g as R,S as A,z as Se,f as O,l as K,A as de,O as Ce,P as ue}from"./index.lmxhTYcw.js";import{u as ge,E as Ae,a as X,d as xe,Q as ke,b as ce,_ as me}from"./browser.Dip7GxFC.js";import{n as Ee,o as $e,p as Fe,k as Te,q as Re,r as Ve,s as Be,t as Ue,u as De,_ as Ie,a as Pe,v as je,w as Oe,x as Ye,H as Ne,I as Le}from"./SectionMain.D1ShbFuh.js";import{a as Me,b as qe,c as pe,B as ze,d as fe}from"./IconifyButton.deiAo8Lt.js";import{u as he}from"./club.DV_5lPHG.js";import"./ToasterComponent.BiIukvsf.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";const We={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},Ge={class:"bg-white p-4 md:p-5 rounded-2xl shadow-xl w-[1100px] max-h-screen overflow-auto"},He={class:"flex items-center justify-between mb-3"},Ke={class:"flex items-center gap-3"},Xe={class:"text-lg font-semibold"},Qe={key:0,class:"mb-3 text-xs px-3 py-2 rounded-lg border bg-amber-50 border-amber-200 text-amber-800"},Je={class:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm"},Ze=["disabled"],et={key:0,class:"text-red-600 text-[11px] mt-1"},tt=["disabled"],lt=["value"],at={key:0,class:"text-red-600 text-[11px] mt-1"},it=["disabled"],ot=["value"],st={key:0,class:"text-red-600 text-[11px] mt-1"},nt={class:"md:col-span-3"},rt=["disabled"],dt={key:0,class:"text-red-600 text-[11px] mt-1"},ut={class:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm"},ct=["disabled"],mt=["value"],pt={key:0,class:"text-red-600 text-[11px] mt-1"},ft=["disabled"],vt=["disabled","aria-invalid"],bt={key:0,class:"text-red-600 text-[11px] mt-1"},yt={class:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm"},_t=["disabled"],gt=["disabled","aria-invalid"],xt=["value"],ht={key:0,class:"text-red-600 text-[11px] mt-1"},wt=["disabled"],St={class:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"},Ct=["disabled","aria-invalid"],At={key:0,class:"text-red-600 text-[11px] mt-1"},kt=["disabled","aria-invalid"],Et={key:0,class:"text-red-600 text-[11px] mt-1"},$t={class:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"},Ft=["disabled","aria-invalid"],Tt={key:0,class:"text-red-600 text-[11px] mt-1"},Rt=["disabled","aria-invalid"],Vt={key:0,class:"text-red-600 text-[11px] mt-1"},Bt={class:"mt-3 text-sm"},Ut=["disabled"],Dt={class:"flex justify-end gap-2 mt-5"},ve={__name:"ActivityDesignFormModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"create"},initial:{type:Object,default:()=>({id:null,date_filed:"",semester:"",office_department:"",school_year:"",name_of_activity:"",venue:"",date_of_implementation:"",proposed_budget:0,participants:"",nature_of_activity:"Curricular",rationale:"",objectives:"",details_of_activity:"",budgetary_requirements:"",filed_by_user_id:"",club_id:"",status:"draft",remarks:""})}},emits:["update:modelValue","submit"],setup(l,{emit:r}){const x=l,g=r,y=V({get:()=>x.modelValue,set:c=>g("update:modelValue",c)}),n=q({...x.initial}),s=q({}),P=ye(),B=he(),F=V(()=>P.user?.id||null),j=["1st Semester","2nd Semester","Summer"],S=["Curricular","Co-Curricular","Extra-Curricular"],L=V(()=>{const c=new Date().getFullYear();return Array.from({length:6},(i,u)=>`${c-u}-${c-u+1}`)});_e(async()=>{(!Array.isArray(B.clubs?.data)||!B.clubs.data.length)&&await B.fetchAll({page:1,limit:200},!0)});const T=c=>{const i=Number(c);return(B.clubs?.data||[]).find(J=>Number(J.id)===i)?.name||""};oe(()=>x.initial,c=>{if(n.value={...c},s.value={},n.value.school_year||(n.value.school_year=L.value[0]),!n.value.filed_by_user_id&&F.value&&(n.value.filed_by_user_id=F.value),n.value.club_id){const i=T(n.value.club_id);i&&(n.value.office_department=i)}},{immediate:!0}),oe(()=>n.value.club_id,c=>{const i=T(c);i&&(n.value.office_department=i)});const U=V(()=>String(n.value?.status||"").toLowerCase()),b=V(()=>x.mode==="edit"&&U.value!=="draft"),C=V(()=>x.mode!=="edit"?"New Activity":b.value?"View Activity (read-only)":"Edit Activity"),Y=V(()=>x.mode==="edit"?"Save Changes":"Create"),M=V(()=>{switch(U.value){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-amber-100 text-amber-800";case"approved":return"bg-emerald-100 text-emerald-700";case"rejected":return"bg-rose-100 text-rose-700";case"cancelled":return"bg-zinc-200 text-zinc-800";default:return"bg-gray-100 text-gray-800"}}),D=()=>{if(b.value)return!1;const c={};return n.value.date_filed||(c.date_filed="Required"),n.value.semester?.trim()||(c.semester="Required"),n.value.school_year?.trim()||(c.school_year="Required"),n.value.name_of_activity?.trim()||(c.name_of_activity="Required"),n.value.date_of_implementation||(c.date_of_implementation="Required"),n.value.nature_of_activity||(c.nature_of_activity="Required"),n.value.club_id||(c.club_id="Required"),n.value.rationale?.trim()||(c.rationale="Required"),n.value.objectives?.trim()||(c.objectives="Required"),n.value.details_of_activity?.trim()||(c.details_of_activity="Required"),n.value.budgetary_requirements?.trim()||(c.budgetary_requirements="Required"),s.value=c,Object.keys(c).length===0},$=()=>{if(b.value||!D())return;const c={...n.value};c.proposed_budget===""&&(c.proposed_budget=0),c.filed_by_user_id=F.value,c.office_department=T(c.club_id)||c.office_department||"",g("submit",c)};return(c,i)=>y.value?(p(),v("div",We,[e("div",Ge,[e("div",He,[e("div",Ke,[e("h2",Xe,_(C.value),1),e("span",{class:H(["text-[11px] px-2 py-1 rounded",M.value])},_(n.value.status),3)]),e("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:i[0]||(i[0]=u=>y.value=!1)},"Close")]),b.value?(p(),v("div",Qe,[i[20]||(i[20]=k(" This activity has been submitted and is now ",-1)),e("strong",null,_(n.value.status),1),i[21]||(i[21]=k(". Editing is disabled. ",-1))])):w("",!0),e("div",Je,[e("div",null,[i[22]||(i[22]=e("label",{class:"block mb-1"},[k("Date Filed "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{"onUpdate:modelValue":i[1]||(i[1]=u=>n.value.date_filed=u),type:"date",class:"w-full border rounded px-2.5 py-2",disabled:b.value},null,8,Ze),[[I,n.value.date_filed]]),s.value.date_filed?(p(),v("p",et,_(s.value.date_filed),1)):w("",!0)]),e("div",null,[i[24]||(i[24]=e("label",{class:"block mb-1"},[k("Semester "),e("span",{class:"text-red-500"},"*")],-1)),h(e("select",{"onUpdate:modelValue":i[2]||(i[2]=u=>n.value.semester=u),class:"w-full border rounded px-2.5 py-2",disabled:b.value},[i[23]||(i[23]=e("option",{disabled:"",value:""},"Select semester…",-1)),(p(),v(N,null,z(j,u=>e("option",{key:u,value:u},_(u),9,lt)),64))],8,tt),[[W,n.value.semester]]),s.value.semester?(p(),v("p",at,_(s.value.semester),1)):w("",!0)]),e("div",null,[i[25]||(i[25]=e("label",{class:"block mb-1"},[k("School Year "),e("span",{class:"text-red-500"},"*")],-1)),h(e("select",{"onUpdate:modelValue":i[3]||(i[3]=u=>n.value.school_year=u),class:"w-full border rounded px-2.5 py-2",disabled:b.value},[(p(!0),v(N,null,z(L.value,u=>(p(),v("option",{key:u,value:u},_(u),9,ot))),128))],8,it),[[W,n.value.school_year]]),s.value.school_year?(p(),v("p",st,_(s.value.school_year),1)):w("",!0)]),e("div",nt,[i[26]||(i[26]=e("label",{class:"block mb-1"},[k("Name of Activity "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{"onUpdate:modelValue":i[4]||(i[4]=u=>n.value.name_of_activity=u),class:"w-full border rounded px-2.5 py-2",disabled:b.value},null,8,rt),[[I,n.value.name_of_activity]]),s.value.name_of_activity?(p(),v("p",dt,_(s.value.name_of_activity),1)):w("",!0)])]),e("div",ut,[e("div",null,[i[28]||(i[28]=e("label",{class:"block mb-1"},[k("Club "),e("span",{class:"text-red-500"},"*")],-1)),h(e("select",{"onUpdate:modelValue":i[5]||(i[5]=u=>n.value.club_id=u),class:"w-full border rounded px-2.5 py-2",disabled:b.value},[i[27]||(i[27]=e("option",{value:""},"Select club…",-1)),(p(!0),v(N,null,z(R(B).clubs.data||[],u=>(p(),v("option",{key:u.id,value:u.id},_(u.name),9,mt))),128))],8,ct),[[W,n.value.club_id]]),s.value.club_id?(p(),v("p",pt,_(s.value.club_id),1)):w("",!0)]),e("div",null,[i[29]||(i[29]=e("label",{class:"block mb-1"},"Venue",-1)),h(e("input",{"onUpdate:modelValue":i[6]||(i[6]=u=>n.value.venue=u),class:"w-full border rounded px-2.5 py-2",disabled:b.value},null,8,ft),[[I,n.value.venue]])]),e("div",null,[i[30]||(i[30]=e("label",{class:"block mb-1"},[k("Date of Implementation "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{"onUpdate:modelValue":i[7]||(i[7]=u=>n.value.date_of_implementation=u),type:"date",class:H(["w-full border rounded px-2.5 py-2",s.value.date_of_implementation?"border-red-500":""]),disabled:b.value,"aria-invalid":!!s.value.date_of_implementation},null,10,vt),[[I,n.value.date_of_implementation]]),s.value.date_of_implementation?(p(),v("p",bt,_(s.value.date_of_implementation),1)):w("",!0)])]),e("div",yt,[e("div",null,[i[31]||(i[31]=e("label",{class:"block mb-1"},"Proposed Budget",-1)),h(e("input",{"onUpdate:modelValue":i[8]||(i[8]=u=>n.value.proposed_budget=u),type:"number",step:"0.01",min:"0",class:"w-full border rounded px-2.5 py-2",disabled:b.value},null,8,_t),[[I,n.value.proposed_budget]])]),e("div",null,[i[32]||(i[32]=e("label",{class:"block mb-1"},[k("Nature of Activity "),e("span",{class:"text-red-500"},"*")],-1)),h(e("select",{"onUpdate:modelValue":i[9]||(i[9]=u=>n.value.nature_of_activity=u),class:H(["w-full border rounded px-2.5 py-2",s.value.nature_of_activity?"border-red-500":""]),disabled:b.value,"aria-invalid":!!s.value.nature_of_activity},[(p(),v(N,null,z(S,u=>e("option",{key:u,value:u},_(u),9,xt)),64))],10,gt),[[W,n.value.nature_of_activity]]),s.value.nature_of_activity?(p(),v("p",ht,_(s.value.nature_of_activity),1)):w("",!0)]),e("div",null,[i[33]||(i[33]=e("label",{class:"block mb-1"},"Participants",-1)),h(e("input",{"onUpdate:modelValue":i[10]||(i[10]=u=>n.value.participants=u),class:"w-full border rounded px-2.5 py-2",disabled:b.value},null,8,wt),[[I,n.value.participants]])])]),e("div",St,[e("div",null,[i[34]||(i[34]=e("label",{class:"block mb-1"},[k("Rationale "),e("span",{class:"text-red-500"},"*")],-1)),h(e("textarea",{"onUpdate:modelValue":i[11]||(i[11]=u=>n.value.rationale=u),rows:"3",class:H(["w-full border rounded px-2.5 py-2",s.value.rationale?"border-red-500":""]),disabled:b.value,"aria-invalid":!!s.value.rationale},null,10,Ct),[[I,n.value.rationale]]),s.value.rationale?(p(),v("p",At,_(s.value.rationale),1)):w("",!0)]),e("div",null,[i[35]||(i[35]=e("label",{class:"block mb-1"},[k("Objectives "),e("span",{class:"text-red-500"},"*")],-1)),h(e("textarea",{"onUpdate:modelValue":i[12]||(i[12]=u=>n.value.objectives=u),rows:"3",class:H(["w-full border rounded px-2.5 py-2",s.value.objectives?"border-red-500":""]),disabled:b.value,"aria-invalid":!!s.value.objectives},null,10,kt),[[I,n.value.objectives]]),s.value.objectives?(p(),v("p",Et,_(s.value.objectives),1)):w("",!0)])]),e("div",$t,[e("div",null,[i[36]||(i[36]=e("label",{class:"block mb-1"},[k("Details of the Activity "),e("span",{class:"text-red-500"},"*")],-1)),h(e("textarea",{"onUpdate:modelValue":i[13]||(i[13]=u=>n.value.details_of_activity=u),rows:"4",class:H(["w-full border rounded px-2.5 py-2",s.value.details_of_activity?"border-red-500":""]),disabled:b.value,"aria-invalid":!!s.value.details_of_activity},null,10,Ft),[[I,n.value.details_of_activity]]),s.value.details_of_activity?(p(),v("p",Tt,_(s.value.details_of_activity),1)):w("",!0)]),e("div",null,[i[37]||(i[37]=e("label",{class:"block mb-1"},[k("Budgetary Requirements "),e("span",{class:"text-red-500"},"*")],-1)),h(e("textarea",{"onUpdate:modelValue":i[14]||(i[14]=u=>n.value.budgetary_requirements=u),rows:"4",class:H(["w-full border rounded px-2.5 py-2",s.value.budgetary_requirements?"border-red-500":""]),disabled:b.value,"aria-invalid":!!s.value.budgetary_requirements},null,10,Rt),[[I,n.value.budgetary_requirements]]),s.value.budgetary_requirements?(p(),v("p",Vt,_(s.value.budgetary_requirements),1)):w("",!0)])]),e("div",Bt,[i[38]||(i[38]=e("label",{class:"block mb-1"},"Remarks",-1)),h(e("textarea",{"onUpdate:modelValue":i[15]||(i[15]=u=>n.value.remarks=u),rows:"2",class:"w-full border rounded px-2.5 py-2",disabled:b.value},null,8,Ut),[[I,n.value.remarks]])]),h(e("input",{type:"hidden","onUpdate:modelValue":i[16]||(i[16]=u=>n.value.filed_by_user_id=u)},null,512),[[I,n.value.filed_by_user_id]]),h(e("input",{type:"hidden","onUpdate:modelValue":i[17]||(i[17]=u=>n.value.office_department=u)},null,512),[[I,n.value.office_department]]),h(e("input",{type:"hidden","onUpdate:modelValue":i[18]||(i[18]=u=>n.value.status=u)},null,512),[[I,n.value.status]]),e("div",Dt,[e("button",{class:"px-4 py-2 bg-gray-200 rounded text-xs",onClick:i[19]||(i[19]=u=>y.value=!1)},"Close"),b.value?w("",!0):(p(),v("button",{key:0,class:"px-4 py-2 bg-blue-600 text-white rounded text-xs",onClick:$},_(Y.value),1))])])])):w("",!0)}},It={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},Pt={class:"bg-white p-4 rounded-xl shadow-xl w-[980px] max-h-screen overflow-auto"},jt={class:"flex items-center justify-between mb-3"},Ot={class:"text-lg font-semibold"},Yt={class:"text-gray-600"},Nt={class:"flex items-center justify-between gap-2"},Lt={class:"text-sm text-gray-600"},Mt={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24","aria-hidden":"true"},qt=["d"],zt=["disabled"],Wt={class:"mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"},Gt={class:"aspect-video bg-white border rounded overflow-hidden flex items-center justify-center"},Ht=["src"],Kt={key:1,class:"flex items-center justify-center w-full h-full"},Xt=["d"],Qt={class:"mt-2 text-xs"},Jt=["title"],Zt={class:"text-gray-500 flex items-center justify-between"},el={key:0},tl={key:0},ll={class:"mt-2 flex items-center justify-between gap-2"},al=["onClick","title"],il={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24","aria-hidden":"true"},ol=["d"],sl=["onClick"],nl={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24","aria-hidden":"true"},rl=["d"],dl={key:0,class:"mt-6 text-center text-sm text-gray-500"},ul=10*1024*1024,cl={__name:"ActivityAttachmentsModal",props:{modelValue:{type:Boolean,default:!1},row:{type:Object,default:null}},emits:["update:modelValue"],setup(l,{emit:r}){const x=l,g=r,y=V({get:()=>x.modelValue,set:t=>g("update:modelValue",t)}),n=ge(),s=q(null),P=q(!1),B=new Set(["image/png","image/jpeg","image/webp","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]),F=new Set(["png","jpg","jpeg","webp","pdf","docx","xlsx"]),j=(t="")=>{const f=String(t).toLowerCase().match(/\.([a-z0-9]+)$/i);return f?f[1]:""},S=(t="")=>{if(typeof t!="string")return"";const f=t.match(/^data:([^;]+);base64,/i);return f?f[1]:""},L=t=>{const f=t?.type&&B.has(t.type),m=t?.name&&F.has(j(t.name));return f||m},T=(t="")=>String(t).startsWith("image/"),U=(t="")=>t==="application/pdf",b=(t="")=>t==="application/vnd.openxmlformats-officedocument.wordprocessingml.document",C=(t="")=>t==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",Y=(t="")=>U(t)?Re:b(t)?Ve:C(t)?Be:T(t)?Ue:De,M=(t="")=>U(t)?"PDF":b(t)?"Word":C(t)?"Excel":T(t)?"Image":"File",D=(t="")=>U(t)?"pdf":b(t)?"docx":C(t)?"xlsx":t==="image/png"?"png":t==="image/jpeg"?"jpg":t==="image/webp"?"webp":"",$=(t="attachment",f="")=>{const m=/\.[a-z0-9]+$/i.test(t),E=f?f.startsWith(".")?f.slice(1):f:"";return m?t:E?`${t}.${E}`:t},c=t=>!t&&t!==0?"":t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:`${(t/(1024*1024)).toFixed(1)} MB`,i=V(()=>{const t=s.value?.attachments;if(!t)return[];try{return Array.isArray(t)?t:JSON.parse(t||"[]")}catch{return[]}}),u=V(()=>(i.value||[]).map((t,f)=>{const m=t.mime||S(t.data)||(t.name?j(t.name)==="pdf"&&"application/pdf":"")||"",E=j(t.name||"")||D(m),Q=t.size??null,d=t.name||`${M(m)} ${f+1}`;return{id:t.id??f+1,name:d,data:t.data||"",url:t.url||t.href||t.path||"",mime:m,ext:E,size:Q,filename:$(d,E)}}));oe(()=>x.modelValue,async t=>{t&&x.row?.id&&(await n.fetchById(x.row.id),s.value=n.selected||x.row)},{immediate:!1});const J=async t=>{const f=t.target.files?.[0];if(t.target.value="",!(!f||!s.value?.id)){if(f.size>ul){await A.fire("File too large","Maximum size is 10 MB.","warning");return}if(!L(f)){await A.fire("Unsupported file","Only images (PNG/JPEG/WEBP), PDF, DOCX, and XLSX are allowed.","warning");return}try{P.value=!0,await n.uploadAttachment(s.value.id,f),await n.fetchById(s.value.id),s.value=n.selected}finally{P.value=!1}}},ee=async t=>{!s.value?.id||!(await A.fire({title:"Remove attachment?",icon:"warning",showCancelButton:!0,confirmButtonText:"Remove",confirmButtonColor:"#d33"})).isConfirmed||(await n.deleteAttachment(s.value.id,t),await n.fetchById(s.value.id),s.value=n.selected)},ne=t=>{if(t.data&&String(t.data).startsWith("data:")&&T(t.mime)){const f=window.open();f&&f.document.write(`<img src="${t.data}" style="display:block;max-width:100%;height:auto;margin:0 auto;object-fit:contain"/>`);return}t.url&&window.open(String(t.url),"_blank")},te=t=>{const[f,m]=t.split(","),E=f.match(/data:([^;]+);base64/i)?.[1]||"application/octet-stream",Q=atob(m),d=Q.length,a=new Uint8Array(d);for(let o=0;o<d;o++)a[o]=Q.charCodeAt(o);return new Blob([a],{type:E})},Z=(t,f)=>{const m=URL.createObjectURL(t),E=document.createElement("a");E.href=m,E.download=f||"download",document.body.appendChild(E),E.click(),E.remove(),setTimeout(()=>URL.revokeObjectURL(m),1e3)},le=async t=>{if(t.data&&String(t.data).startsWith("data:")){const f=te(t.data);Z(f,t.filename);return}if(t.url)try{const m=await(await fetch(t.url,{credentials:"include"})).blob();Z(m,t.filename)}catch{const m=document.createElement("a");m.href=String(t.url),m.setAttribute("download",t.filename),document.body.appendChild(m),m.click(),m.remove()}},ae=t=>T(t.mime)?"Open":"Download",re=t=>T(t.mime)?$e:Fe,ie=t=>T(t.mime)?ne(t):le(t);return(t,f)=>y.value?(p(),v("div",It,[e("div",Pt,[e("div",jt,[e("h2",Ot,[f[1]||(f[1]=k(" Attachments — ",-1)),e("span",Yt,_(s.value?.name_of_activity||""),1)]),e("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:f[0]||(f[0]=m=>y.value=!1)},"Close")]),e("div",Nt,[e("div",Lt,[f[2]||(f[2]=k(" Ref: ",-1)),e("strong",null,_(s.value?.reference_code||"—"),1)]),e("label",{class:H(["inline-flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white rounded text-xs cursor-pointer disabled:opacity-60",{"opacity-60 pointer-events-none":P.value}])},[(p(),v("svg",Mt,[e("path",{d:R(Ee)},null,8,qt)])),e("span",null,_(P.value?"Uploading…":"Upload"),1),e("input",{type:"file",class:"hidden",disabled:P.value,onChange:J,accept:".png,.jpg,.jpeg,.webp,.pdf,.docx,.xlsx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,image/png,image/jpeg,image/webp"},null,40,zt)],2)]),e("div",Wt,[(p(!0),v(N,null,z(u.value,m=>(p(),v("div",{key:m.id,class:"border rounded-lg p-2 bg-gray-50 flex flex-col"},[e("div",Gt,[T(m.mime)&&m.data&&m.data.startsWith("data:")?(p(),v("img",{key:0,src:m.data,class:"object-contain w-full h-full",alt:"Attachment preview"},null,8,Ht)):(p(),v("div",Kt,[(p(),v("svg",{style:{width:"64px",height:"64px"},viewBox:"0 0 24 24","aria-hidden":"true",class:H({"text-red-600":U(m.mime),"text-blue-600":b(m.mime),"text-emerald-600":C(m.mime),"text-gray-500":!m.mime||!T(m.mime)&&!U(m.mime)})},[e("path",{d:Y(m.mime)},null,8,Xt)],2))]))]),e("div",Qt,[e("div",{class:"font-medium truncate",title:m.name},_(m.name),9,Jt),e("div",Zt,[e("span",null,[k(_(M(m.mime))+" ",1),m.ext?(p(),v("span",el,"("+_(m.ext.toUpperCase())+")",1)):w("",!0)]),m.size?(p(),v("span",tl,_(c(m.size)),1)):w("",!0)])]),e("div",ll,[e("button",{class:"inline-flex items-center gap-1 px-2 py-1 bg-white border rounded text-xs hover:bg-gray-50",onClick:E=>ie(m),title:ae(m)},[(p(),v("svg",il,[e("path",{d:re(m)},null,8,ol)])),k(" "+_(ae(m)),1)],8,al),e("button",{class:"inline-flex items-center gap-1 px-2 py-1 bg-red-600 text-white rounded text-xs",onClick:E=>ee(m.id),title:"Remove"},[(p(),v("svg",nl,[e("path",{d:R(Te)},null,8,rl)])),f[3]||(f[3]=k(" Remove ",-1))],8,sl)])]))),128))]),u.value.length?w("",!0):(p(),v("div",dl," No attachments yet. "))])])):w("",!0)}},ml="KOLEHIYO NG PANTUKAN",pl="Juan A. Sarenas Campus, Kingking, Pantukan, Davao de Oro",fl="https://osas.knp.edu.ph/verify-actdesign?id=",se=l=>l?xe(l).format("MMMM DD, YYYY"):"—",vl=l=>l==null||l===""?"—":Number(l).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),we="./",bl=`${we}images/logo.png`,yl=`${we}images/bg.jpg`;async function be(l){const x=await(await fetch(l)).blob();return new Promise(g=>{const y=new FileReader;y.onloadend=()=>g(y.result),y.readAsDataURL(x)})}function _l(l){switch(l){case"APPROVED":return[32,141,85];case"PENDING":return[240,158,47];case"REJECTED":return[220,53,69];case"CANCELLED":return[107,114,128];default:return[90,90,90]}}async function gl(l){const r=l.internal.pageSize.getWidth(),x=110,g=36;try{const y=await be(yl);l.addImage(y,"JPEG",0,0,r,x,void 0,"FAST")}catch{l.setFillColor(21,62,121),l.rect(0,0,r,x,"F")}l.setGState(new l.GState({opacity:.18})),l.setFillColor(0,0,0),l.rect(0,0,r,x,"F"),l.setGState(new l.GState({opacity:1}));try{const y=await be(bl);l.addImage(y,"PNG",g,20,70,70,void 0,"FAST")}catch{}return l.setTextColor(255,255,255),l.setFont("helvetica","bold"),l.setFontSize(20),l.text(ml,g+86,38),l.setFont("helvetica","normal"),l.setFontSize(10),l.text(pl,g+86,58),l.setTextColor(20),l.setFont("helvetica","bold"),l.setFontSize(14),l.text("ACTIVITY DESIGN",r/2,x+24,{align:"center"}),x+34}async function xl(l,r,x){const g=l.internal.pageSize.getWidth(),y=36,n=r?.id??r?.reference_code??"",s=`${fl}${encodeURIComponent(String(n))}`,P=await ke.toDataURL(s,{margin:0,width:75,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#FFFFFF"}}),B=String(r.status||"").toUpperCase(),[F,j,S]=_l(B),L=r.approved_at?se(r.approved_at):r.date_filed?se(r.date_filed):"—",T=`osas.knp.edu.ph/verify-actdesign?id=${String(n)}`;return X(l,{startY:x,theme:"plain",styles:{cellPadding:0,fontSize:9},bodyStyles:{minCellHeight:110},margin:{left:y,right:y},tableWidth:g-y*2,body:[[{content:""},{content:""}]],columnStyles:{0:{cellWidth:g-y*2-260},1:{cellWidth:260}},didDrawCell:U=>{if(U.section!=="body")return;const{x:b,y:C,width:Y,height:M}=U.cell,D=10;if(U.column.index===0){l.setFillColor(255,255,255),l.roundedRect(b,C,Y-1,M,6,6,"F");const $=24,c=Math.min(140,Y-22);l.setFillColor(F,j,S),l.roundedRect(b+D,C+D,c,$,12,12,"F"),l.setTextColor(255,255,255),l.setFont("helvetica","bold"),l.setFontSize(10),l.text(B||"STATUS",b+D+10,C+D+16),l.setTextColor(20),l.setFont("helvetica","normal"),l.setFontSize(9);const i=C+D+$+14;l.text(`Ref No.: ${r.reference_code||"—"}`,b+D,i),l.text(`Date Issued: ${L}`,b+D,i+16),l.setDrawColor(230),l.roundedRect(b,C,Y-1,M,6,6,"S")}if(U.column.index===1){l.setFillColor(255,255,255),l.roundedRect(b,C,Y-1,M,6,6,"F"),l.setFillColor(66,103,178),l.roundedRect(b,C,Y-1,22,6,6,"F"),l.setTextColor(255,255,255),l.setFont("helvetica","bold"),l.setFontSize(10),l.text("VERIFY",b+D,C+15);const $=b+D,c=C+28;l.addImage(P,"PNG",$,c,75,75,void 0,"FAST"),l.setTextColor(20),l.setFont("helvetica","bold"),l.setFontSize(10),l.text("Scan to verify",$+100,c+14),l.setFont("helvetica","normal"),l.setFontSize(9),l.text("This document can be verified",$+100,c+32),l.text("online via the OSAS portal.",$+100,c+46),l.setTextColor(110),l.setFontSize(8),l.text(T,$+100,c+72),l.setDrawColor(230),l.roundedRect(b,C,Y-1,M,6,6,"S")}}}),l.lastAutoTable.finalY}async function hl(l){const r=new Ae({unit:"pt",format:[612,936],orientation:"portrait"}),x=r.internal.pageSize.getWidth(),g=36;let y=await gl(r);y=await xl(r,l,y)+10,X(r,{startY:y,theme:"grid",styles:{fontSize:9,cellPadding:5},headStyles:{fillColor:[222,235,247],textColor:20,fontStyle:"bold"},head:[["SEMESTER","DATE FILED","SCHOOL YEAR","OFFICE/DEPARTMENT"]],body:[[l.semester||"—",se(l.date_filed),l.school_year||"—",l.office_department||l?.club?.name||"—"]],columnStyles:{0:{cellWidth:120},1:{cellWidth:120},2:{cellWidth:120},3:{cellWidth:"auto"}},margin:{left:g,right:g}}),y=r.lastAutoTable.finalY+10,X(r,{startY:y,theme:"plain",styles:{fontSize:10},body:[[{content:"ACTIVITY INFORMATION",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",halign:"left",valign:"middle",cellPadding:6}}]],margin:{left:g,right:g}}),y=r.lastAutoTable.finalY,X(r,{startY:y,theme:"grid",styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},body:[[{content:"NAME OF ACTIVITY",styles:{fillColor:[243,248,255],fontStyle:"bold"}},l.name_of_activity||"—"],[{content:"VENUE",styles:{fillColor:[243,248,255],fontStyle:"bold"}},l.venue||"—"],[{content:"DATE OF IMPLEMENTATION",styles:{fillColor:[243,248,255],fontStyle:"bold"}},se(l.date_of_implementation)],[{content:"PROPOSED BUDGET",styles:{fillColor:[243,248,255],fontStyle:"bold"}},`${vl(l.proposed_budget)}   (Source: Department Fund)`],[{content:"PARTICIPANTS",styles:{fillColor:[243,248,255],fontStyle:"bold"}},l.participants||"—"],[{content:"NATURE OF ACTIVITY",styles:{fillColor:[243,248,255],fontStyle:"bold"}},l.nature_of_activity||"—"]],columnStyles:{0:{cellWidth:180,fontStyle:"bold"},1:{cellWidth:"auto"}},margin:{left:g,right:g}}),y=r.lastAutoTable.finalY+10,[["RATIONALE",l.rationale],["OBJECTIVES",l.objectives],["DETAILS OF THE ACTIVITY",l.details_of_activity],["BUDGETARY REQUIREMENTS",l.budgetary_requirements]].forEach(([F,j])=>{X(r,{startY:y,theme:"plain",styles:{fontSize:10},body:[[{content:F,styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:g,right:g}}),y=r.lastAutoTable.finalY,X(r,{startY:y,theme:"grid",styles:{fontSize:9,cellPadding:8},body:[[j&&String(j).trim()?j:"—"]],margin:{left:g,right:g}}),y=r.lastAutoTable.finalY+10}),X(r,{startY:y,theme:"plain",styles:{fontSize:10},body:[[{content:"APPROVAL",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:g,right:g}}),y=r.lastAutoTable.finalY;const s=l?.filed_by?`${l.filed_by.first_name||""} ${l.filed_by.last_name||""}`.trim():"",P=l?.approver?`${l.approver.first_name||""} ${l.approver.last_name||""}`.trim():"";X(r,{startY:y,theme:"grid",styles:{fontSize:9,cellPadding:10},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},head:[["PREPARED BY:","NOTED BY:","APPROVED BY:"]],body:[[s||" ","Albert P. Mapalo",P||" "]],columnStyles:{0:{cellWidth:(x-g*2)/3},1:{cellWidth:(x-g*2)/3},2:{cellWidth:"auto"}},didParseCell:F=>{F.section==="body"&&(F.cell.styles.halign="center",F.cell.styles.fontStyle="bold",F.cell.styles.cellPadding={top:16,right:10,bottom:18,left:10})},margin:{left:g,right:g}});const B=r.internal.pageSize.getHeight()-20;r.setFontSize(8),r.setTextColor(120),r.text(`Generated on ${xe().format("YYYY-MM-DD HH:mm")} • ${window.location.origin}`,g,B),r.save(`${l.reference_code||"Activity_Design"}.pdf`)}const wl={class:"flex items-center gap-2"},Sl={class:"p-3 mb-4 rounded-xl border bg-white/60"},Cl={class:"flex items-center gap-2 mb-2 text-gray-700"},Al={class:"w-4 h-4",viewBox:"0 0 24 24"},kl=["d"],El={class:"grid grid-cols-1 md:grid-cols-6 gap-2 text-sm"},$l=["value"],Fl=["value"],Tl=["value"],Rl=["value"],Vl={key:0,value:""},Bl=["value"],Ul={value:""},Dl=["value"],Il={class:"md:col-span-1"},Pl={class:"md:col-span-1"},jl={class:"flex items-center gap-2 md:col-span-2"},Ol={class:"truncate max-w-[220px]"},Gl={__name:"ActivityDesignsPage",setup(l){const r=ge(),x=ye(),g=he(),y=Se(),n={range:!0,partialRange:!0,multiCalendars:2,modelType:"yyyy-MM-dd",enableTimePicker:!1,autoApply:!0,clearable:!0},s=q({page:1,limit:10,sort:"created_at",order:"DESC",q:"",status:"",nature_of_activity:"",school_year:"",semester:"",club_id:"",filed_by_user_id:"",date_filed_from:"",date_filed_to:"",impl_from:"",impl_to:""}),P=V({get:()=>{const{date_filed_from:d,date_filed_to:a}=s.value;return d||a?[d||null,a||null]:null},set:d=>{if(!d)s.value.date_filed_from=null,s.value.date_filed_to=null;else{const[a,o]=d;s.value.date_filed_from=a||null,s.value.date_filed_to=o||null}}}),B=V({get:()=>{const{impl_from:d,impl_to:a}=s.value;return d||a?[d||null,a||null]:null},set:d=>{if(!d)s.value.impl_from=null,s.value.impl_to=null;else{const[a,o]=d;s.value.impl_from=a||null,s.value.impl_to=o||null}}}),F=["1st Semester","2nd Semester","Summer"],j=V(()=>{const d=new Date().getFullYear();return Array.from({length:6},(a,o)=>`${d-o}-${d-o+1}`)}),S=async(d={},a=!0)=>{s.value={...s.value,...d},typeof s.value.officer>"u"&&(s.value.officer=!0);const o={...s.value};["q","status","nature_of_activity","school_year","semester","club_id","filed_by_user_id","date_filed_from","date_filed_to","impl_from","impl_to"].forEach(G=>{(o[G]===""||o[G]==null)&&delete o[G]}),o.officer=s.value.officer,await r.fetchAll(o,a)};_e(async()=>{await Promise.all([S({page:1,limit:10}),g.fetchAll({page:1,limit:200,officer:!0},!0),y.fetchAll({page:1,limit:200},!0)])});const L=q([]);oe(()=>s.value.club_id,async d=>{if(s.value.filed_by_user_id="",!d){L.value=[];return}try{await g.fetchById(d),L.value=Array.isArray(g.selectedClub?.users)?g.selectedClub.users:[]}catch{L.value=[]}});const T=V(()=>s.value.club_id?L.value:y.users.data||[]),U=V(()=>({total:r.items.total||0,totalPages:r.items.totalPages||1,currentPage:r.items.currentPage||1,pageSize:r.items.pageSize||10,data:r.items.data||[]})),b=["Curricular","Co-Curricular","Extra-Curricular"],C=["draft","pending","approved","rejected","cancelled"],Y=d=>{switch(String(d||"").toLowerCase()){case"draft":return"gray";case"pending":return"amber";case"approved":return"emerald";case"rejected":return"red";case"cancelled":return"zinc";default:return"gray"}},M=[{key:"reference_code",label:"Ref Code",sortable:!0,width:140},{key:"name_of_activity",label:"Activity",sortable:!0,minWidth:220},{key:"club_id",label:"Club",sortable:!1,formatter:(d,a)=>a.club?a.club.name:""},{key:"semester",label:"Sem",sortable:!0,width:110},{key:"school_year",label:"S.Y.",sortable:!0,width:110},{key:"date_of_implementation",label:"Implementation",sortable:!0,width:140,formatter:d=>d?new Date(d).toLocaleDateString():"—"},{key:"nature_of_activity",label:"Nature",sortable:!0,width:150},{key:"status",label:"Status",sortable:!0,width:120}],D=async d=>{await S(d)},$=q(!1),c=q(!1),i=q(null),u=()=>{$.value=!0},J=async d=>{await r.create(d),$.value=!1,await S({},!0)},ee=async d=>{await r.fetchById(d.id);const a=r.selected||d;i.value={id:a.id,date_filed:a.date_filed||"",semester:a.semester||"",office_department:a.office_department||"",school_year:a.school_year||"",name_of_activity:a.name_of_activity||"",venue:a.venue||"",date_of_implementation:a.date_of_implementation||"",proposed_budget:a.proposed_budget??"",participants:a.participants||"",nature_of_activity:a.nature_of_activity||"Curricular",rationale:a.rationale||"",objectives:a.objectives||"",details_of_activity:a.details_of_activity||"",budgetary_requirements:a.budgetary_requirements||"",filed_by_user_id:a.filed_by_user_id||"",club_id:a.club_id||"",status:a.status||"draft",remarks:a.remarks||""},c.value=!0},ne=async d=>{const{id:a,...o}=d;await r.updateById(a,o),c.value=!1,await S({},!0)},te=async d=>{if(!d?.id)return;(await A.fire({title:`Delete "${d.name_of_activity}"?`,text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed&&(await r.deleteById(d.id),await S({},!0),await A.fire("Deleted","The activity design has been deleted.","success"))},Z=async d=>{await r.fetchById(d.id);const a=r.selected||d;i.value={...a,date_filed:a.date_filed?String(a.date_filed).slice(0,10):"",date_of_implementation:a.date_of_implementation?String(a.date_of_implementation).slice(0,10):""},c.value=!0},le=async d=>{if((await A.fire({title:"Submit for approval?",text:"You can no longer edit after submission.",icon:"question",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed)try{await r.submit(d.id),await S({},!0),await A.fire("Submitted","Activity is now pending approval.","success")}catch{await A.fire("Error",r.error||"Failed to submit activity.","error")}},ae=async d=>{const a=await A.fire({title:"Approve activity?",input:"textarea",inputLabel:"Remarks (optional)",inputPlaceholder:"Add a note…",showCancelButton:!0,confirmButtonText:"Approve",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1});if(!a.isConfirmed)return;const o=a.value||"";try{await r.approve(d.id,o),await S({},!0),await A.fire("Approved","Activity has been approved.","success")}catch{await A.fire("Error",r.error||"Failed to approve activity.","error")}},re=async d=>{const a=await A.fire({title:"Reject activity?",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"State the reason…",inputValidator:G=>G?.trim()?void 0:"Reason is required",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Reject",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1});if(!a.isConfirmed)return;const o=a.value;try{await r.reject(d.id,o),await S({},!0),await A.fire("Rejected","Activity has been rejected.","success")}catch{await A.fire("Error",r.error||"Failed to reject activity.","error")}},ie=async d=>{const a=await A.fire({title:"Cancel activity?",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"State the reason…",inputValidator:G=>G?.trim()?void 0:"Reason is required",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Cancel Activity",cancelButtonText:"Keep Activity",allowOutsideClick:!1,allowEscapeKey:!1});if(!a.isConfirmed)return;const o=a.value;try{await r.cancel(d.id,o),await S({},!0),await A.fire("Cancelled","Activity has been cancelled.","success")}catch{await A.fire("Error",r.error||"Failed to cancel activity.","error")}},t=async d=>{if(String(d?.status||"").toLowerCase()!=="approved"){await A.fire("Not allowed","Only approved activities can be printed.","info");return}try{await r.fetchById(d.id);const o=r.selected||d;await hl(o)}catch(o){await A.fire("Error",r.error||"Failed to generate PDF.","error"),console.error(o)}},f=q(!1),m=q(null),E=async d=>{await r.fetchById(d.id),m.value=r.selected||d,f.value=!0},Q=async()=>{await S({q:"",status:"",nature_of_activity:"",school_year:"",semester:"",club_id:"",filed_by_user_id:"",date_filed_from:"",date_filed_to:"",impl_from:"",impl_to:"",page:1})};return(d,a)=>(p(),v(N,null,[O(Ie,null,{default:K(()=>[O(Pe,null,{default:K(()=>[R(r).error?(p(),de(Me,{key:0,icon:R(je),color:"danger"},{default:K(()=>[k(_(R(r).error),1)]),_:1},8,["icon"])):w("",!0),O(qe,{icon:R(Oe),title:"Activity Designs",main:""},{default:K(()=>[e("div",wl,[O(pe,{icon:R(Ye),color:"primary",label:"New Activity",onClick:u},null,8,["icon"]),O(pe,{icon:R(Ne),color:"info",label:"Refresh",onClick:a[0]||(a[0]=o=>S({},!0))},null,8,["icon"])])]),_:1},8,["icon"]),e("div",Sl,[e("div",Cl,[(p(),v("svg",Al,[e("path",{d:R(Le)},null,8,kl)])),a[15]||(a[15]=e("span",{class:"font-medium text-sm"},"Filters",-1))]),e("div",El,[h(e("input",{"onUpdate:modelValue":a[1]||(a[1]=o=>s.value.q=o),placeholder:"Search by ref, activity, venue, office…",class:"border rounded px-2 py-2 md:col-span-2",onKeyup:a[2]||(a[2]=Ce(o=>S({page:1}),["enter"]))},null,544),[[I,s.value.q]]),h(e("select",{"onUpdate:modelValue":a[3]||(a[3]=o=>s.value.status=o),class:"border rounded px-2 py-2"},[a[16]||(a[16]=e("option",{value:""},"All status",-1)),(p(),v(N,null,z(C,o=>e("option",{key:o,value:o},_(o),9,$l)),64))],512),[[W,s.value.status]]),h(e("select",{"onUpdate:modelValue":a[4]||(a[4]=o=>s.value.nature_of_activity=o),class:"border rounded px-2 py-2"},[a[17]||(a[17]=e("option",{value:""},"All natures",-1)),(p(),v(N,null,z(b,o=>e("option",{key:o,value:o},_(o),9,Fl)),64))],512),[[W,s.value.nature_of_activity]]),h(e("select",{"onUpdate:modelValue":a[5]||(a[5]=o=>s.value.school_year=o),class:"border rounded px-2 py-2 md:col-span-1"},[(p(!0),v(N,null,z(j.value,o=>(p(),v("option",{key:o,value:o},_(o),9,Tl))),128))],512),[[W,s.value.school_year]]),h(e("select",{"onUpdate:modelValue":a[6]||(a[6]=o=>s.value.semester=o),class:"border rounded px-2 py-2 md:col-span-1"},[a[18]||(a[18]=e("option",{disabled:"",value:""},"Select semester…",-1)),(p(),v(N,null,z(F,o=>e("option",{key:o,value:o},_(o),9,Rl)),64))],512),[[W,s.value.semester]]),h(e("select",{"onUpdate:modelValue":a[7]||(a[7]=o=>s.value.club_id=o),class:"border rounded px-2 py-2 md:col-span-2"},[R(x).user.role==="admin"?(p(),v("option",Vl,"All clubs")):w("",!0),(p(!0),v(N,null,z(R(g).clubs.data||[],o=>(p(),v("option",{key:o.id,value:o.id},_(o.name),9,Bl))),128))],512),[[W,s.value.club_id]]),h(e("select",{"onUpdate:modelValue":a[8]||(a[8]=o=>s.value.filed_by_user_id=o),class:"border rounded px-2 py-2 md:col-span-2"},[e("option",Ul,_(s.value.club_id?"Filed by (club members)":"Filed by (any)"),1),(p(!0),v(N,null,z(T.value,o=>(p(),v("option",{key:o.id,value:o.id},_(o.first_name)+" "+_(o.last_name)+" (@"+_(o.username)+") ",9,Dl))),128))],512),[[W,s.value.filed_by_user_id]]),e("div",Il,[O(R(ce),ue({modelValue:P.value,"onUpdate:modelValue":a[9]||(a[9]=o=>P.value=o)},n,{placeholder:"Filed date range"}),null,16,["modelValue"])]),e("div",Pl,[O(R(ce),ue({modelValue:B.value,"onUpdate:modelValue":a[10]||(a[10]=o=>B.value=o)},n,{placeholder:"Implementation date range"}),null,16,["modelValue"])]),e("div",jl,[e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded text-xs",onClick:a[11]||(a[11]=o=>S({page:1}))}," Apply "),e("button",{class:"px-4 py-2 bg-gray-200 rounded text-xs",onClick:Q}," Reset ")])])]),O(ze,{columns:M,data:U.value,loading:R(r).isLoading,onQueryChange:D},{'cell["club.name"]':K(({row:o})=>[e("div",Ol,_(o?.club?.name||"—"),1)]),"cell-nature_of_activity":K(({value:o})=>[O(fe,{text:o||"—",tone:"indigo"},null,8,["text"])]),"cell-status":K(({value:o})=>[O(fe,{text:o||"—",tone:Y(o)},null,8,["text","tone"])]),"cell-actions":K(({row:o})=>[["admin","manager"].includes(String(R(x).user?.role||"").toLowerCase())?(p(),de(me,{key:0,row:o,moderator:!0,onAttachments:E,onSubmit:le,onApprove:ae,onReject:re,onEdit:ee,onDelete:te,onView:G=>Z(o),onCancel:ie,onPrint:t},null,8,["row","onView"])):(p(),de(me,{key:1,row:o,moderator:!1,onAttachments:E,onSubmit:le,onEdit:ee,onDelete:te,onView:G=>Z(o),onCancel:ie,onPrint:t},null,8,["row","onView"]))]),_:1},8,["data","loading"])]),_:1})]),_:1}),O(ve,{modelValue:$.value,"onUpdate:modelValue":a[12]||(a[12]=o=>$.value=o),mode:"create",onSubmit:J},null,8,["modelValue"]),O(ve,{modelValue:c.value,"onUpdate:modelValue":a[13]||(a[13]=o=>c.value=o),mode:"edit",initial:i.value||{},onSubmit:ne},null,8,["modelValue","initial"]),O(cl,{modelValue:f.value,"onUpdate:modelValue":a[14]||(a[14]=o=>f.value=o),row:m.value},null,8,["modelValue","row"])],64))}};export{Gl as default};
