import{c as A,R as Xe,z as J,q as d,l as ee,d as P,a as v,j as Y,t as w,A as Ve,g as E,B as Be,e as t,C as Z,f as T,r as $,D as H,h as R,E as Ze,F as re,G as et,H as Ce,I as K,J as q,v as Q,T as tt,K as Ke,o as ke,k as G,L as ue,b as lt,S as fe,M as ve,N as at,O as nt,P as ot,Q as st,n as Ee,U as it}from"./index.DZp_F5YJ.js";import{a as Se,m as rt,b as ut,c as Oe,d as dt,e as We,f as ct,g as vt,h as mt,i as ft,j as bt,k as pt,l as gt,n as yt,_ as xt,o as ht,p as wt,q as Ct}from"./LayoutAuthenticated.DencjQ2u.js";import{_ as kt}from"./SectionMain.Ko-m1nlX.js";import{_ as St}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{u as Ge}from"./club.BoFiV4gi.js";import{u as $t}from"./user.DYtR53t3.js";import"./ToasterComponent.RcHdcPTA.js";const qe={white:"bg-white text-black",primary:"bg-[var(--primary-color)] text-white",secondary:"bg-[var(--secondary-color)] text-white",tertiary:"bg-[var(--tertiary-color)] text-white",accent:"bg-[var(--accent)] text-black"},ye={white:"text-black dark:text-slate-100",primary:"text-[var(--primary-color)]",secondary:"text-[var(--secondary-color)]",tertiary:"text-[var(--tertiary-color)]",accent:"text-[var(--accent)]",contrast:"dark:text-white"},_t={primary:[ye.primary,"border-[var(--primary-color)]"],secondary:[ye.secondary,"border-[var(--secondary-color)]"],tertiary:[ye.tertiary,"border-[var(--tertiary-color)]"],accent:[ye.accent,"border-[var(--accent)]"]},Vt=(e,l,a,m=!1)=>{const r={ring:{primary:"ring-[var(--primary-color)]/40",secondary:"ring-[var(--secondary-color)]/40",tertiary:"ring-[var(--tertiary-color)]/40",accent:"ring-[var(--accent)]/40"},active:{primary:"bg-[var(--tertiary-color)] text-white",secondary:"bg-[var(--primary-color)] text-white",tertiary:"bg-[var(--secondary-color)] text-white",accent:"bg-[var(--accent)] text-black"},bg:{primary:"bg-[var(--primary-color)] text-white",secondary:"bg-[var(--secondary-color)] text-white",tertiary:"bg-[var(--tertiary-color)] text-white",accent:"bg-[var(--accent)] text-black"},bgHover:{primary:"hover:bg-[var(--tertiary-color)]",secondary:"hover:bg-[var(--primary-color)]",tertiary:"hover:bg-[var(--secondary-color)]",accent:"hover:bg-yellow-600"},borders:{primary:"border-[var(--primary-color)]",secondary:"border-[var(--secondary-color)]",tertiary:"border-[var(--tertiary-color)]",accent:"border-[var(--accent)]"},text:{primary:"text-[var(--primary-color)]",secondary:"text-[var(--secondary-color)]",tertiary:"text-[var(--tertiary-color)]",accent:"text-[var(--accent)]"},outlineHover:{primary:"hover:bg-[var(--primary-color)] hover:text-white",secondary:"hover:bg-[var(--secondary-color)] hover:text-white",tertiary:"hover:bg-[var(--tertiary-color)] hover:text-white",accent:"hover:bg-[var(--accent)] hover:text-black"}};if(!r.bg[e])return e;const h=l,n=[r.borders[e],r.ring[e]];return m?n.push(r.active[e]):n.push(h?r.text[e]:r.bg[e]),a&&n.push(h?r.outlineHover[e]:r.bgHover[e]),n},ae={__name:"BaseButton",props:{label:{type:[String,Number],default:null},icon:{type:String,default:null},iconSize:{type:[String,Number],default:24},href:{type:String,default:null},target:{type:String,default:null},to:{type:[String,Object],default:null},type:{type:String,default:null},color:{type:String,default:"white"},as:{type:String,default:null},small:Boolean,outline:Boolean,active:Boolean,disabled:Boolean,roundedFull:Boolean},setup(e){const l=e,a=A(()=>l.as?l.as:l.to?Xe:l.href?"a":"button"),m=A(()=>a.value==="button"?l.type??"button":null),r=A(()=>l.small&&l.icon?"px-1":"px-2"),h=A(()=>{const n=["inline-flex","justify-center","items-center","whitespace-nowrap","focus:outline-none","transition-colors","focus:ring","duration-150","border",l.disabled?"cursor-not-allowed":"cursor-pointer",l.roundedFull?"rounded-full":"rounded",Vt(l.color,l.outline,!l.disabled,l.active)];return!l.label&&l.icon?n.push("p-1"):l.small?n.push("text-sm",l.roundedFull?"px-3 py-1":"p-1"):n.push("py-2",l.roundedFull?"px-6":"px-3"),l.disabled&&n.push(l.outline?"opacity-50":"opacity-70"),n});return(n,i)=>(d(),J(Ve(a.value),{class:Y(h.value),href:e.href,type:m.value,to:e.to,target:e.target,disabled:e.disabled},{default:ee(()=>[e.icon?(d(),J(Se,{key:0,path:e.icon,size:e.iconSize},null,8,["path","size"])):P("",!0),e.label?(d(),v("span",{key:1,class:Y(r.value)},w(e.label),3)):P("",!0)]),_:1},8,["class","href","type","to","target","disabled"]))}},Bt={__name:"IconRounded",props:{icon:{type:String,required:!0},color:{type:String,default:null},w:{type:String,default:"w-12"},h:{type:String,default:"h-12"},bg:Boolean},setup(e){return(l,a)=>(d(),J(Se,{path:e.icon,w:e.w,h:e.h,size:"24",class:Y(["rounded-full",e.bg?E(qe)[e.color]:[E(ye)[e.color],"bg-gray-50 dark:bg-slate-800"]])},null,8,["path","w","h","class"]))}},Dt={class:"flex items-center justify-start mb-4 sm:mb-0"},Pt={class:"flex-shrink-0"},It={__name:"SectionTitleLineWithButton",props:{icon:{type:String,default:null},title:{type:String,required:!0},main:Boolean},setup(e){return A(()=>Be().default),(l,a)=>(d(),v("section",{class:Y([{"pt-6":!e.main},"mb-6 flex flex-col sm:flex-row items-center justify-between"])},[t("div",Dt,[e.icon&&e.main?(d(),J(Bt,{key:0,icon:e.icon,color:"light",class:"mr-3",bg:""},null,8,["icon"])):e.icon?(d(),J(Se,{key:1,path:e.icon,class:"mr-2",size:"20"},null,8,["path"])):P("",!0),t("h1",{class:Y([e.main?"text-3xl":"text-2xl","leading-tight"])},w(e.title),3)]),t("div",Pt,[Z(l.$slots,"default",{},()=>[T(ae,{icon:E(rt),color:"whiteDark"},null,8,["icon"])])])],2))}},Ut={class:"checkbox"},Le={__name:"TableCheckboxCell",props:{type:{type:String,default:"td"},modelValue:Boolean},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,m=l,r=$(a.modelValue);return H(r,h=>{m("update:modelValue",h)}),H(()=>a.modelValue,h=>{r.value=h}),(h,n)=>(d(),J(Ve(e.type),{class:"lg:w-1"},{default:ee(()=>[t("label",Ut,[R(t("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>r.value=i),type:"checkbox"},null,512),[[Ze,r.value]]),n[1]||(n[1]=t("span",{class:"check"},null,-1))])]),_:1}))}},At=Object.assign({name:"BaseButtons"},{__name:"BaseButtons",props:{noWrap:{type:Boolean,default:!1},type:{type:String,default:"justify-start"},classAddon:{type:String,default:"mr-3 last:mr-0 mb-3"},mb:{type:String,default:"-mb-3"}},setup(e){const l=e,a=Be(),m=A(()=>{const r=!!a.default,h=["flex","items-center",l.type,l.noWrap?"flex-nowrap":"flex-wrap"];l.mb&&h.push(l.mb);const n=r?a.default().map(i=>i&&i.children&&typeof i.children=="object"?re(i,{},i.children.map(g=>re(g,{class:[l.classAddon]}))):re(i,{class:[l.classAddon]})):null;return re("div",{class:h},n)});return(r,h)=>(d(),J(Ve(m.value)))}}),Et={class:"relative space-y-2"},Ot={class:"flex items-center justify-between"},Lt={class:"w-full border-collapse bg-white min-w-max"},Tt={class:"bg-white text-gray-700 text-sm border-b"},jt={key:0,class:"p-2 w-10 text-center"},Mt={class:"flex items-center justify-between"},zt={class:"font-medium"},Rt={class:"flex items-center gap-2"},Ft={key:0,class:"mt-1 p-2 border rounded bg-white shadow-md"},Nt=["onUpdate:modelValue","onInput"],Kt={key:1,class:"px-2 py-1 whitespace-nowrap text-right w-1"},Wt={key:0},Gt=["colspan"],qt={key:0,class:"p-2 w-10 text-center","data-label":"Select"},Ht=["data-label"],Yt={key:0},Qt={key:1},Jt={key:1,class:"px-4 py-2 whitespace-nowrap","data-label":"Action"},Xt={key:1,class:"border-t text-sm font-semibold bg-gray-50"},Zt={key:0,class:"p-2 w-10"},el=["data-label"],tl={key:0},ll={key:1,class:"px-4 py-2"},al={class:"p-3 border rounded-lg bg-white text-sm flex flex-col sm:flex-row sm:justify-between sm:items-center"},nl={class:"mb-2 sm:mb-0"},ol={class:"flex flex-wrap items-center gap-2"},sl=["value"],il={__name:"BaseTable",props:{columns:{type:Array,default:()=>[]},data:{type:Object,default:()=>({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]})},checkable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showAction:{type:Boolean,default:!0}},emits:["query-change","selected","sort","filter","edit"],setup(e,{emit:l}){const a=e,m=l,r=$(null),h=et.useLoading(),n=$(null);H(()=>a.loading,u=>{u?n.value||(n.value=h.show({container:r.value,canCancel:!1,isFullPage:!1,color:"#3b82f6",opacity:.8})):n.value&&(n.value.hide(),n.value=null)},{immediate:!0}),Ce(()=>{n.value&&(n.value.hide(),n.value=null)});const i=$(a.data.currentPage||1),g=$(a.data.pageSize||10),k=$(null),U=$("desc"),O=$({}),S=$({}),y=$(new Set);H(()=>a.data.currentPage,u=>i.value=u||1),H(()=>a.data.pageSize,u=>g.value=u||10);const V=A(()=>a.data||{total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),L=A(()=>V.value.data.filter(u=>Object.keys(O.value).every(c=>O.value[c]?u[c]?.toString().toLowerCase().includes(O.value[c].toLowerCase()):!0))),M=A(()=>y.value.size===L.value.length&&L.value.length>0),z=A(()=>V.value.totalPages||Math.ceil(V.value.total/g.value)||1),F=A(()=>{const u=z.value,c=i.value,o=2,D=[];if(u<=7)for(let N=1;N<=u;N++)D.push(N);else{D.push(1);let N=Math.max(2,c-o),ne=Math.min(u-1,c+o);N>2&&D.push("...");for(let se=N;se<=ne;se++)D.push(se);ne<u-1&&D.push("..."),D.push(u)}return D}),B=()=>{m("query-change",{page:i.value,limit:g.value,sort:k.value,order:U.value,filters:O.value})},_=u=>{u>=1&&u<=z.value&&(i.value=u,B())},b=u=>{g.value=Number(u.target.value),i.value=1,B()},s=u=>{k.value===u?U.value=U.value==="asc"?"desc":"asc":(k.value=u,U.value="desc"),m("sort",{key:k.value,order:U.value}),B()},C=u=>{S.value[u]=!S.value[u]},j=(u,c)=>{O.value[u]=c,m("filter",O.value),B()},te=u=>{u?y.value=new Set(L.value.map(c=>c.id)):y.value.clear(),m("selected",Array.from(y.value))},be=(u,c)=>{u?y.value.add(c.id):y.value.delete(c.id),m("selected",Array.from(y.value))},X=u=>m("edit",u),W=A(()=>{const u={};return a.columns.forEach(c=>{if(c.aggregate){let o=0;V.value.data.forEach(D=>{const N=parseFloat(D[c.key]);isNaN(N)||(o+=N)}),u[c.key]=o}}),u}),oe=A(()=>a.columns.some(u=>u.aggregate));return(u,c)=>(d(),v("div",Et,[t("div",Ot,[t("div",null,[Z(u.$slots,"toolbar-left",{},void 0,!0)]),t("div",null,[Z(u.$slots,"toolbar-right",{},void 0,!0)])]),t("div",{ref_key:"tableContainer",ref:r,class:"table-container relative rounded-lg border border-gray-200 shadow-sm bg-white"},[t("table",Lt,[t("thead",Tt,[t("tr",null,[e.checkable?(d(),v("th",jt,[T(Le,{modelValue:M.value,"onUpdate:modelValue":te},null,8,["modelValue"])])):P("",!0),(d(!0),v(K,null,q(e.columns,o=>(d(),v("th",{key:o.key,class:"px-4 py-2 text-left whitespace-nowrap"},[Z(u.$slots,`header-${o.key}`,{column:o,sort:{key:k.value,order:U.value,toggle:()=>s(o.key)},filter:{value:O.value[o.key]||"",set:D=>j(o.key,D),open:!!S.value[o.key],toggle:()=>C(o.key)}},()=>[t("div",Mt,[t("span",zt,w(o.label),1),t("div",Rt,[o.sortable?(d(),J(ae,{key:0,icon:k.value===o.key?U.value==="asc"?E(ut):E(Oe):E(Oe),small:"",onClick:D=>s(o.key)},null,8,["icon","onClick"])):P("",!0),o.filterable?(d(),J(ae,{key:1,icon:E(dt),small:"",onClick:D=>C(o.key)},null,8,["icon","onClick"])):P("",!0)])]),T(tt,{name:"fade"},{default:ee(()=>[S.value[o.key]?(d(),v("div",Ft,[R(t("input",{"onUpdate:modelValue":D=>O.value[o.key]=D,class:"w-full px-2 py-1 text-xs border rounded",placeholder:"Filter...",onInput:D=>j(o.key,D.target.value)},null,40,Nt),[[Q,O.value[o.key]]])])):P("",!0)]),_:2},1024)],!0)]))),128)),e.showAction?(d(),v("th",Kt)):P("",!0)])]),t("tbody",null,[!V.value.data.length&&!e.loading?(d(),v("tr",Wt,[t("td",{colspan:e.columns.length+(e.checkable?1:0)+(e.showAction?1:0),class:"p-6"},[Z(u.$slots,"empty",{},()=>[c[2]||(c[2]=t("div",{class:"text-center text-sm text-gray-500"},"No data to display.",-1))],!0)],8,Gt)])):P("",!0),(d(!0),v(K,null,q(V.value.data,o=>(d(),v("tr",{key:o.id??o._key??JSON.stringify(o),class:"border-t text-sm hover:bg-gray-50"},[e.checkable?(d(),v("td",qt,[T(Le,{modelValue:y.value.has(o.id),"onUpdate:modelValue":D=>be(D,o)},null,8,["modelValue","onUpdate:modelValue"])])):P("",!0),(d(!0),v(K,null,q(e.columns,D=>(d(),v("td",{key:D.key,class:"px-4 py-2 whitespace-nowrap","data-label":D.label},[Z(u.$slots,`cell-${D.key}`,{row:o,value:o[D.key],column:D},()=>[D.formatter?(d(),v("span",Yt,w(D.formatter(o[D.key],o)),1)):(d(),v("span",Qt,w(o[D.key]??"-"),1))],!0)],8,Ht))),128)),e.showAction?(d(),v("td",Jt,[Z(u.$slots,"cell-actions",{row:o},()=>[T(At,null,{default:ee(()=>[T(ae,{icon:E(We),small:"",onClick:D=>X(o)},null,8,["icon","onClick"])]),_:2},1024)],!0)])):P("",!0)]))),128)),oe.value?(d(),v("tr",Xt,[e.checkable?(d(),v("td",Zt)):P("",!0),(d(!0),v(K,null,q(e.columns,o=>(d(),v("td",{key:o.key,class:"px-4 py-2 whitespace-nowrap","data-label":o.label},[Z(u.$slots,`aggregate-${o.key}`,{value:W.value[o.key],column:o},()=>[o.aggregate?(d(),v("span",tl,w(W.value[o.key]),1)):P("",!0)],!0)],8,el))),128)),e.showAction?(d(),v("td",ll)):P("",!0)])):P("",!0)])]),e.loading?Z(u.$slots,"loading-overlay",{key:0},void 0,!0):P("",!0)],512),Z(u.$slots,"pagination",{page:i.value,pageSize:g.value,total:V.value.total,totalPages:z.value,goToPage:_,setPageSize:o=>{g.value=o,i.value=1,B()}},()=>[t("div",al,[t("span",nl,w(V.value.total?(i.value-1)*g.value+1:0)+" - "+w(Math.min(i.value*g.value,V.value.total))+" of "+w(V.value.total)+" items ",1),t("div",ol,[T(ae,{icon:E(ct),small:"",disabled:i.value===1,onClick:c[0]||(c[0]=o=>_(i.value-1))},null,8,["icon","disabled"]),(d(!0),v(K,null,q(F.value,(o,D)=>(d(),J(ae,{key:D,active:o!=="..."&&o===i.value,label:o,small:"",disabled:o==="...",onClick:N=>o!=="..."&&_(o)},null,8,["active","label","disabled","onClick"]))),128)),T(ae,{icon:E(vt),small:"",disabled:i.value===z.value,onClick:c[1]||(c[1]=o=>_(i.value+1))},null,8,["icon","disabled"]),t("select",{class:"border p-1 text-sm rounded",onChange:b,value:g.value},c[3]||(c[3]=[t("option",{value:"5"},"5 / page",-1),t("option",{value:"10"},"10 / page",-1),t("option",{value:"20"},"20 / page",-1)]),40,sl)])])],!0)]))}},rl=St(il,[["__scopeId","data-v-e1b863b5"]]),ul=Ke({name:"BaseLevel",props:{mobile:Boolean,type:{type:String,default:"justify-between"}},render(){const e=[this.type,"items-center"],l=["flex"],a=["block","md:flex"],m=["flex","items-center","justify-center"];return re("div",{class:e.concat(this.mobile?l:a)},this.$slots.default().map((r,h)=>{const n=!this.mobile&&this.$slots.default().length>h+1?m.concat(["mb-6","md:mb-0"]):m;return re("div",{class:n},[r])}))}}),dl={class:"flex flex-col md:flex-row items-center"},cl={class:"text-center md:text-left md:py-2"},vl={__name:"NotificationBar",props:{icon:{type:String,default:null},outline:Boolean,color:{type:String,required:!0},autoClose:{type:Number,default:5}},setup(e){const l=e,a=A(()=>l.outline?_t[l.color]:qe[l.color]),m=$(!1);let r=null;const h=()=>{r&&(clearTimeout(r),r=null),m.value=!0},n=Be(),i=A(()=>n.right);return ke(()=>{l.autoClose>0&&(r=setTimeout(()=>{h()},l.autoClose*1e3))}),Ce(()=>{r&&(clearTimeout(r),r=null)}),(g,k)=>m.value?P("",!0):(d(),v("div",{key:0,class:Y([a.value,"px-3 py-6 md:py-3 mb-6 last:mb-0 border rounded-lg transition-colors duration-150"])},[T(ul,null,{default:ee(()=>[t("div",dl,[e.icon?(d(),J(Se,{key:0,path:e.icon,w:"w-10 md:w-5",h:"h-10 md:h-5",size:"24",class:"md:mr-2"},null,8,["path"])):P("",!0),t("span",cl,[Z(g.$slots,"default")])]),i.value?Z(g.$slots,"right",{key:0}):(d(),J(ae,{key:1,icon:E(mt),small:"","rounded-full":"",color:"white",onClick:h},null,8,["icon"]))]),_:3})],2))}},Te={__name:"Badge",props:{text:{type:String,required:!0},tone:{type:String,default:"gray"}},setup(e){const l={blue:"bg-blue-50 text-blue-700 ring-blue-200",indigo:"bg-indigo-50 text-indigo-700 ring-indigo-200",emerald:"bg-emerald-50 text-emerald-700 ring-emerald-200",red:"bg-red-50 text-red-700 ring-red-200",gray:"bg-gray-100 text-gray-700 ring-gray-200",amber:"bg-amber-50 text-amber-700 ring-amber-200"};return(a,m)=>(d(),v("span",{class:Y(["inline-flex items-center rounded-full px-2 py-[2px] text-[11px] ring-1",l[e.tone]||l.gray])},w(e.text),3))}},ml={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},fl={class:"bg-white p-4 rounded-xl shadow-xl w-[920px] max-h-screen overflow-auto"},bl={class:"flex items-center justify-between mb-3"},pl={class:"text-lg font-semibold"},gl={class:"grid grid-cols-2 gap-4 text-sm"},yl={key:0,class:"text-red-600 text-xs mt-1"},xl={key:0,class:"text-red-600 text-xs mt-1"},hl={class:"col-span-2"},wl={class:"col-span-2 grid grid-cols-2 gap-4"},Cl={class:"space-y-2"},kl={class:"border-2 border-dashed rounded-xl p-4 flex items-center justify-between gap-3"},Sl={class:"flex items-center gap-3"},$l={class:"w-16 h-16 bg-gray-50 border rounded-lg overflow-hidden flex items-center justify-center"},_l=["src"],Vl={key:1,class:"text-xs text-gray-400"},Bl={class:"flex items-center gap-2"},Dl={class:"px-3 py-2 bg-gray-800 text-white rounded cursor-pointer text-xs"},Pl=["disabled"],Il={key:0,class:"text-red-600 text-xs mt-1"},Ul={key:1,class:"text-xs text-gray-500 break-all"},Al={class:"space-y-2"},El={class:"border-2 border-dashed rounded-xl p-4 flex items-center justify-between gap-3"},Ol={class:"flex items-center gap-3"},Ll={class:"w-40 h-16 bg-gray-50 border rounded-lg overflow-hidden flex items-center justify-center"},Tl=["src"],jl={key:1,class:"text-xs text-gray-400"},Ml={class:"flex items-center gap-2"},zl={class:"px-3 py-2 bg-gray-800 text-white rounded cursor-pointer text-xs"},Rl=["disabled"],Fl={key:0,class:"text-red-600 text-xs mt-1"},Nl={key:1,class:"text-xs text-gray-500 break-all"},Kl={class:"flex justify-end gap-2 mt-5"},Wl=2*1024*1024,je={__name:"ClubFormModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"create"},initial:{type:Object,default:()=>({id:null,name:"",code:"",category:"",description:"",is_active:!0,established_at:"",website:"",email:"",phone:"",logo:"",banner:""})}},emits:["update:modelValue","submit"],setup(e,{emit:l}){const a=e,m=l,r=A({get:()=>a.modelValue,set:b=>m("update:modelValue",b)}),h="https://knp.edu.ph",n=$({...a.initial}),i=$({});H(()=>a.initial,b=>{n.value={...b},i.value={}},{immediate:!0});const g=A(()=>a.mode==="edit"?"Edit Club":"Add New Club"),k=A(()=>a.mode==="edit"?"Save Changes":"Create"),U=A(()=>{const b=n.value.logo;return b?b.startsWith("data:")?b:`${h}${b}`:""}),O=A(()=>{const b=n.value.banner;return b?b.startsWith("data:")?b:`${h}${b}`:""}),S=()=>{const b={};return n.value.name?.trim()||(b.name="Name is required"),n.value.code?.trim()||(b.code="Code is required"),i.value={...i.value,...b},Object.keys(b).length===0},y=["image/png","image/jpeg"],V=b=>new Promise((s,C)=>{const j=new FileReader;j.onload=te=>s(te.target.result),j.onerror=C,j.readAsDataURL(b)});function L(b,s){return i.value[s]="",y.includes(b.type)?b.size>Wl?(i.value[s]="File too large. Maximum size is 2 MB.",!1):!0:(i.value[s]="Invalid file type. Please upload a PNG or JPEG image.",!1)}const M=async b=>{const s=b.target.files?.[0];if(s){if(!L(s,"logo")){b.target.value="";return}n.value.logo=await V(s)}},z=async b=>{const s=b.target.files?.[0];if(s){if(!L(s,"banner")){b.target.value="";return}n.value.banner=await V(s)}},F=()=>{n.value.logo="",i.value.logo=""},B=()=>{n.value.banner="",i.value.banner=""},_=()=>{if(!S())return;const b={...n.value};Object.keys(b).forEach(s=>{b[s]===""&&(b[s]=null)}),m("submit",b)};return(b,s)=>r.value?(d(),v("div",ml,[t("div",fl,[t("div",bl,[t("h2",pl,w(g.value),1),t("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:s[0]||(s[0]=C=>r.value=!1)},"Close")]),t("div",gl,[t("div",null,[s[11]||(s[11]=t("label",{class:"block mb-1"},[G("Name "),t("span",{class:"text-red-500"},"*")],-1)),R(t("input",{"onUpdate:modelValue":s[1]||(s[1]=C=>n.value.name=C),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring",placeholder:"e.g. Math Society"},null,512),[[Q,n.value.name]]),i.value.name?(d(),v("p",yl,w(i.value.name),1)):P("",!0)]),t("div",null,[s[12]||(s[12]=t("label",{class:"block mb-1"},[G("Code "),t("span",{class:"text-red-500"},"*")],-1)),R(t("input",{"onUpdate:modelValue":s[2]||(s[2]=C=>n.value.code=C),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring",placeholder:"e.g. MATHSOC"},null,512),[[Q,n.value.code]]),i.value.code?(d(),v("p",xl,w(i.value.code),1)):P("",!0)]),t("div",null,[s[14]||(s[14]=t("label",{class:"block mb-1"},"Category",-1)),R(t("select",{"onUpdate:modelValue":s[3]||(s[3]=C=>n.value.category=C),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring"},s[13]||(s[13]=[lt('<option disabled value="">Select a category</option><option value="Academic">Academic</option><option value="Cultural">Cultural</option><option value="Athletics">Athletics</option><option value="Social">Social</option><option value="Community Service">Community Service</option><option value="Religious/Spiritual">Religious / Spiritual</option><option value="Environmental">Environmental</option><option value="Leadership">Leadership</option><option value="Others">Others</option>',10)]),512),[[ue,n.value.category]])]),t("div",null,[s[16]||(s[16]=t("label",{class:"block mb-1"},"Active?",-1)),R(t("select",{"onUpdate:modelValue":s[4]||(s[4]=C=>n.value.is_active=C),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring"},s[15]||(s[15]=[t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[ue,n.value.is_active]])]),t("div",hl,[s[17]||(s[17]=t("label",{class:"block mb-1"},"Description",-1)),R(t("textarea",{"onUpdate:modelValue":s[5]||(s[5]=C=>n.value.description=C),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring",rows:"3"},null,512),[[Q,n.value.description]])]),t("div",null,[s[18]||(s[18]=t("label",{class:"block mb-1"},"Established At",-1)),R(t("input",{"onUpdate:modelValue":s[6]||(s[6]=C=>n.value.established_at=C),type:"date",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring"},null,512),[[Q,n.value.established_at]])]),t("div",null,[s[19]||(s[19]=t("label",{class:"block mb-1"},"Website",-1)),R(t("input",{"onUpdate:modelValue":s[7]||(s[7]=C=>n.value.website=C),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring",placeholder:"https://…"},null,512),[[Q,n.value.website]])]),t("div",null,[s[20]||(s[20]=t("label",{class:"block mb-1"},"Email",-1)),R(t("input",{"onUpdate:modelValue":s[8]||(s[8]=C=>n.value.email=C),type:"email",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring",placeholder:"club@example.com"},null,512),[[Q,n.value.email]])]),t("div",null,[s[21]||(s[21]=t("label",{class:"block mb-1"},"Phone",-1)),R(t("input",{"onUpdate:modelValue":s[9]||(s[9]=C=>n.value.phone=C),class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring",placeholder:"+63…"},null,512),[[Q,n.value.phone]])]),t("div",wl,[t("div",Cl,[s[24]||(s[24]=t("label",{class:"block"},"Logo",-1)),t("div",kl,[t("div",Sl,[t("div",$l,[U.value?(d(),v("img",{key:0,src:U.value,alt:"Logo",class:"w-full h-full object-contain"},null,8,_l)):(d(),v("span",Vl,"No logo"))]),s[22]||(s[22]=t("div",{class:"text-xs text-gray-500"},[t("p",{class:"font-medium text-gray-700"},"PNG/JPEG • ≤ 2MB"),t("p",null,"Square works best")],-1))]),t("div",Bl,[t("label",Dl,[s[23]||(s[23]=G(" Change ",-1)),t("input",{type:"file",class:"hidden",accept:"image/png,image/jpeg",onChange:M},null,32)]),t("button",{class:"px-3 py-2 bg-gray-200 rounded text-xs",onClick:F,disabled:!n.value.logo},"Remove",8,Pl)])]),i.value.logo?(d(),v("p",Il,w(i.value.logo),1)):P("",!0),n.value.logo&&!n.value.logo.startsWith("data:")?(d(),v("p",Ul,w(E(h)+n.value.logo),1)):P("",!0)]),t("div",Al,[s[27]||(s[27]=t("label",{class:"block"},"Banner",-1)),t("div",El,[t("div",Ol,[t("div",Ll,[O.value?(d(),v("img",{key:0,src:O.value,alt:"Banner",class:"w-full h-full object-contain"},null,8,Tl)):(d(),v("span",jl,"No banner"))]),s[25]||(s[25]=t("div",{class:"text-xs text-gray-500"},[t("p",{class:"font-medium text-gray-700"},"PNG/JPEG • ≤ 2MB"),t("p",null,"Wide 5:1 recommended")],-1))]),t("div",Ml,[t("label",zl,[s[26]||(s[26]=G(" Change ",-1)),t("input",{type:"file",class:"hidden",accept:"image/png,image/jpeg",onChange:z},null,32)]),t("button",{class:"px-3 py-2 bg-gray-200 rounded text-xs",onClick:B,disabled:!n.value.banner},"Remove",8,Rl)])]),i.value.banner?(d(),v("p",Fl,w(i.value.banner),1)):P("",!0),n.value.banner&&!n.value.banner.startsWith("data:")?(d(),v("p",Nl,w(E(h)+n.value.banner),1)):P("",!0)])])]),t("div",Kl,[t("button",{class:"px-4 py-2 bg-gray-200 rounded text-xs",onClick:s[10]||(s[10]=C=>r.value=!1)},"Cancel"),t("button",{class:"px-4 py-2 bg-blue-600 text-white rounded text-xs",onClick:_},w(k.value),1)])])])):P("",!0)}},Gl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},ql={class:"bg-white p-4 rounded shadow-lg w-[860px] max-h-screen overflow-auto"},Hl={class:"flex items-center justify-between"},Yl={class:"text-lg font-semibold"},Ql={class:"text-gray-600"},Jl={class:"mt-3 flex flex-col gap-2"},Xl={class:"flex items-center gap-2"},Zl=["value"],ea={class:"text-[12px] text-gray-600"},ta={class:"mt-4"},la={class:"relative"},aa={key:0,class:"absolute z-10 mt-1 w-full bg-white border rounded shadow max-h-64 overflow-auto"},na={key:0,class:"px-3 py-2 text-xs text-gray-500"},oa=["onClick"],sa={class:"font-medium"},ia={class:"text-gray-500"},ra={class:"text-xs text-gray-500"},ua={key:0,class:"px-3 py-2 text-xs text-gray-500"},da={key:0,class:"flex flex-wrap gap-2 mt-2"},ca=["onClick"],va={class:"flex justify-end mt-2"},ma=["disabled"],fa={class:"space-y-2 mt-4 max-h-[60vh] overflow-y-auto pr-2 -mr-2"},ba={class:"text-sm"},pa={class:"font-semibold"},ga={class:"text-gray-500 text-xs"},ya={class:"text-gray-600 text-xs"},xa={class:"mt-1 text-xs flex flex-wrap items-center gap-3"},ha=["disabled","value","onChange"],wa=["value"],Ca=["disabled","value","onChange"],ka=["value"],Sa={key:0,class:"text-[11px] text-gray-500"},$a=["onClick"],_a={class:"flex justify-between items-center mt-3 text-xs text-gray-600"},he=10,Va={__name:"ClubMembersModal",props:{modelValue:{type:Boolean,default:!1},clubId:{type:[Number,String],required:!0},clubName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,m=l,r=Ge(),h=$t(),n=A({get:()=>a.modelValue,set:x=>m("update:modelValue",x)}),i=$([]),g=$(1),k=$(""),U=$("all"),O=$("all"),S=["president","vice-president","secretary","treasurer","pio","business manager","bod","officer"],y=new Set([...S,"officer"]),V=[...S,"member"],L=["pending","active","inactive"],M=x=>(x??"member").toString().trim().toLowerCase()||"member",z=x=>{const f=M(x);if(f==="member")return 999;const p=S.indexOf(f);return p===-1?S.indexOf("officer"):p},F=x=>y.has(M(x?.UserClub?.role)),B=x=>{const f=(x??"active").toString().trim().toLowerCase();return L.includes(f)?f:"active"},_=x=>{const f=M(x?.UserClub?.role);return f==="member"?"member":V.includes(f)?f:"officer"},b=(x,f)=>{if(!f)return!0;const p=`${x.first_name||""} ${x.last_name||""}`.toLowerCase(),I=(x.username||"").toLowerCase(),ie=(x.email||"").toLowerCase();return p.includes(f)||I.includes(f)||ie.includes(f)},s=A(()=>{const x=k.value.trim().toLowerCase();let f=i.value||[];return U.value==="officers"?f=f.filter(F):U.value==="members"&&(f=f.filter(p=>!F(p))),O.value!=="all"&&(f=f.filter(p=>B(p?.UserClub?.status)===O.value)),x&&(f=f.filter(p=>b(p,x))),f.slice().sort((p,I)=>{const ie=z(p.UserClub?.role),De=z(I.UserClub?.role);if(ie!==De)return ie-De;const Pe=(p.last_name||"").toLowerCase(),Ie=(I.last_name||"").toLowerCase();if(Pe!==Ie)return Pe.localeCompare(Ie);const Ue=(p.first_name||"").toLowerCase(),Ae=(I.first_name||"").toLowerCase();return Ue!==Ae?Ue.localeCompare(Ae):(p.username||"").toLowerCase().localeCompare((I.username||"").toLowerCase())})}),C=A(()=>(i.value||[]).filter(F).length),j=A(()=>(i.value||[]).filter(x=>!F(x)).length),te=A(()=>{const x=s.value.length,f=Math.ceil(Math.max(x,1)/he),p=Math.min(g.value,f||1),I=(p-1)*he,ie=s.value.slice(I,I+he);return{total:x,totalPages:f,currentPage:p,pageSize:he,data:ie}});H([k,U,O],()=>g.value=1);const be=async()=>{await r.fetchById(a.clubId),i.value=Array.isArray(r.selectedClub?.users)?r.selectedClub.users:[],k.value="",U.value="all",O.value="all",g.value=1},X=$(""),W=$([]),oe=$(!1),u=$([]);let c=null;const o=x=>{const f={};return x&&(x.includes("@")?f.email=x:f.username=x,f.is_active=!0),f},D=x=>{const f=new Set((i.value||[]).map(I=>I.id)),p=new Set((u.value||[]).map(I=>I.id));return(x||[]).filter(I=>!f.has(I.id)&&!p.has(I.id))},N=async()=>{const x=X.value.trim();if(!x){W.value=[];return}oe.value=!0;try{await h.fetchAll({page:1,limit:8,filters:o(x)},!0),W.value=D(h.users.data||[])}finally{oe.value=!1}};H(X,x=>{if(clearTimeout(c),!x?.trim()){W.value=[];return}c=setTimeout(N,250)});const ne=x=>{u.value.push(x),W.value=W.value.filter(f=>f.id!==x.id),X.value=""},se=x=>{u.value=u.value.filter(f=>f.id!==x)},xe=async()=>{if(!u.value.length)return;const x=u.value.map(f=>f.id);await r.addUsersToClub(a.clubId,x),i.value=Array.isArray(r.selectedClub?.users)?r.selectedClub.users:[],u.value=[],W.value=[],X.value="",g.value=1},ce=$(new Set),pe=$(new Set),Ye=async(x,f)=>{const p=B(f),I=B(x.UserClub?.status);if(I!==p){ce.value.add(x.id),x.UserClub||(x.UserClub={}),x.UserClub.status=p;try{await r.updateMemberStatus(a.clubId,x.id,p)}catch{x.UserClub.status=I,fe.fire("Update failed",r.error||"Unable to update status","error")}finally{ce.value.delete(x.id)}}},Qe=async(x,f)=>{const p=M(f),I=M(x.UserClub?.role);if(I!==p){pe.value.add(x.id),x.UserClub||(x.UserClub={}),x.UserClub.role=p;try{await r.updateMemberRole(a.clubId,x.id,p)}catch{x.UserClub.role=I,fe.fire("Update failed",r.error||"Unable to update role","error")}finally{pe.value.delete(x.id)}}},Je=async x=>{await r.removeUserFromClub(a.clubId,x),i.value=i.value.filter(f=>f.id!==x),X.value.trim()&&W.value.length&&(W.value=D(W.value))};return H(()=>a.modelValue,x=>{x&&be()},{immediate:!1}),(x,f)=>n.value?(d(),v("div",Gl,[t("div",ql,[t("div",Hl,[t("h2",Yl,[f[7]||(f[7]=G("Club Members — ",-1)),t("span",Ql,w(e.clubName),1)]),t("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:f[0]||(f[0]=p=>n.value=!1)},"Close")]),t("div",Jl,[t("div",Xl,[R(t("select",{"onUpdate:modelValue":f[1]||(f[1]=p=>U.value=p),class:"border rounded px-2 py-1 text-sm"},f[8]||(f[8]=[t("option",{value:"all"},"All roles",-1),t("option",{value:"officers"},"Officers",-1),t("option",{value:"members"},"Members",-1)]),512),[[ue,U.value]]),R(t("select",{"onUpdate:modelValue":f[2]||(f[2]=p=>O.value=p),class:"border rounded px-2 py-1 text-sm"},[f[9]||(f[9]=t("option",{value:"all"},"All statuses",-1)),(d(),v(K,null,q(L,p=>t("option",{key:p,value:p},w(p),9,Zl)),64))],512),[[ue,O.value]]),R(t("input",{"onUpdate:modelValue":f[3]||(f[3]=p=>k.value=p),type:"text",placeholder:"Search club members by name, username, or email…",class:"border rounded px-2 py-1 text-sm w-full"},null,512),[[Q,k.value]])]),t("div",ea," Showing "+w(te.value.total)+" result(s). Officers: "+w(C.value)+" • Members: "+w(j.value),1)]),t("div",ta,[t("div",la,[R(t("input",{"onUpdate:modelValue":f[4]||(f[4]=p=>X.value=p),type:"text",placeholder:"Add users: search by username or email…",class:"border rounded px-2 py-1 text-sm w-full",autocomplete:"off"},null,512),[[Q,X.value]]),X.value&&(W.value.length||oe.value)?(d(),v("div",aa,[oe.value?(d(),v("div",na,"Searching…")):(d(),v(K,{key:1},[(d(!0),v(K,null,q(W.value,p=>(d(),v("button",{key:p.id,class:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm",onClick:I=>ne(p)},[t("div",sa,[G(w(p.first_name)+" "+w(p.last_name)+" ",1),t("span",ia,"@"+w(p.username),1)]),t("div",ra,w(p.email),1)],8,oa))),128)),W.value.length?P("",!0):(d(),v("div",ua,"No matches"))],64))])):P("",!0)]),u.value.length?(d(),v("div",da,[(d(!0),v(K,null,q(u.value,p=>(d(),v("span",{key:p.id,class:"inline-flex items-center gap-2 px-2 py-1 bg-blue-50 border border-blue-200 rounded text-xs"},[G(w(p.first_name)+" "+w(p.last_name)+" (@"+w(p.username)+") ",1),t("button",{class:"ml-1 text-blue-600",onClick:I=>se(p.id)},"✕",8,ca)]))),128))])):P("",!0),t("div",va,[t("button",{class:"px-3 py-1 bg-blue-600 text-white rounded text-xs disabled:opacity-50",disabled:!u.value.length,onClick:xe}," Add Selected ",8,ma)])]),t("div",fa,[(d(!0),v(K,null,q(te.value.data,p=>(d(),v("div",{key:p.id,class:"flex items-start justify-between p-3 border bg-gray-50 rounded"},[t("div",ba,[t("div",pa,[G(w(p.first_name)+" "+w(p.last_name)+" ",1),t("span",ga,"(@"+w(p.username)+")",1)]),t("div",ya,w(p.email),1),t("div",xa,[t("span",null,[f[10]||(f[10]=G("Role: ",-1)),t("select",{class:"border rounded px-1 py-0.5 text-xs",disabled:pe.value.has(p.id),value:_(p),onChange:I=>Qe(p,I.target.value)},[(d(),v(K,null,q(V,I=>t("option",{key:I,value:I},w(I),9,wa)),64))],40,ha)]),t("span",null,[f[11]||(f[11]=G("Status: ",-1)),t("select",{class:"border rounded px-1 py-0.5 text-xs",disabled:ce.value.has(p.id),value:B(p.UserClub?.status),onChange:I=>Ye(p,I.target.value)},[(d(),v(K,null,q(L,I=>t("option",{key:I,value:I},w(I),9,ka)),64))],40,Ca)]),t("span",null,[f[12]||(f[12]=G("Joined: ",-1)),t("strong",null,w(p.UserClub?.joined_at?new Date(p.UserClub.joined_at).toLocaleDateString():"—"),1)]),pe.value.has(p.id)||ce.value.has(p.id)?(d(),v("span",Sa,"Saving…")):P("",!0)])]),t("div",null,[t("button",{class:"px-2 py-1 bg-red-600 text-white rounded text-xs",onClick:I=>Je(p.id)},"Remove",8,$a)])]))),128))]),t("div",_a,[g.value>1?(d(),v("button",{key:0,onClick:f[5]||(f[5]=p=>g.value=g.value-1),class:"px-3 py-1 bg-gray-300 rounded"},"Previous")):P("",!0),t("div",null,"Page "+w(te.value.currentPage)+" of "+w(te.value.totalPages||1),1),g.value<te.value.totalPages?(d(),v("button",{key:1,onClick:f[6]||(f[6]=p=>g.value=g.value+1),class:"px-3 py-1 bg-gray-300 rounded"},"Next")):P("",!0)])])])):P("",!0)}},me={async create(e){const{data:l}=await ve.post("/clubs/docs",e);return l},async getById(e){const{data:l}=await ve.get(`/clubs/docs/${e}`);return l},async updateById(e,l){const{data:a}=await ve.put(`/clubs/docs/${e}`,l);return a},async delete(e){const{data:l}=await ve.delete(`/clubs/docs/${e}`);return l},async list(e){const{data:l}=await ve.get("/clubs/docs",{params:e});return l},async listByClub(e,l={}){const a={...l,club_id:e},{data:m}=await ve.get("/clubs/docs",{params:a});return m}},Ba=at("clubDoc",()=>{const e=$({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),l=$(!1),a=$(null),m=$(!1),r=$(null);return{docs:e,selectedDoc:r,isLoading:l,error:a,isLoaded:m,fetchAll:async(S={},y=!1)=>{if(a.value=null,!(!y&&m.value))try{l.value=!0;const V=await me.list(S);Object.assign(e.value,{total:V.total||0,totalPages:V.totalPages||1,currentPage:S.page||1,pageSize:S.limit||10,data:V.data||[]}),m.value=!0}catch(V){a.value=V?.response?.data?.message||"Failed to fetch club docs"}finally{l.value=!1}},fetchByClub:async(S,y={})=>{a.value=null;try{l.value=!0;const V=await me.listByClub(S,y);Object.assign(e.value,{total:V.total||0,totalPages:V.totalPages||1,currentPage:y.page||1,pageSize:y.limit||10,data:V.data||[]}),m.value=!0}catch(V){a.value=V?.response?.data?.message||"Failed to fetch club docs by club"}finally{l.value=!1}},fetchById:async S=>{a.value=null;try{l.value=!0;const y=await me.getById(S);r.value=y}catch(y){a.value=y?.response?.data?.message||"Failed to fetch club doc"}finally{l.value=!1}},create:async S=>{a.value=null;try{l.value=!0;const y=await me.create(S),V=e.value.data.findIndex(L=>L.id===y?.id);return V!==-1?e.value.data.splice(V,1,y):(e.value.data=[y,...e.value.data],e.value.total+=1),r.value=y,y}catch(y){throw a.value=y?.response?.data?.message||"Failed to create club doc",y}finally{l.value=!1}},updateById:async(S,y)=>{a.value=null;try{l.value=!0;const V=await me.updateById(S,y),L=e.value.data.findIndex(M=>M.id===S);return L!==-1&&e.value.data.splice(L,1,V),r.value?.id===S&&(r.value=V),V}catch(V){throw a.value=V?.response?.data?.message||"Failed to update club doc",V}finally{l.value=!1}},deleteById:async S=>{a.value=null;try{l.value=!0,await me.delete(S),e.value.data=e.value.data.filter(y=>y.id!==S),e.value.total=Math.max(0,e.value.total-1),r.value?.id===S&&(r.value=null)}catch(y){throw a.value=y?.response?.data?.message||"Failed to delete club doc",y}finally{l.value=!1}},resetStore:()=>{e.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},r.value=null,m.value=!1,l.value=!1,a.value=null}}});var Da=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Pa=function(e){return Da.map(function(l){return l.toLowerCase()}).indexOf(e.toLowerCase())!==-1},Ia=function(e,l,a){Object.keys(l).filter(Pa).forEach(function(m){var r=l[m];typeof r=="function"&&(m==="onInit"?r(e,a):a.on(m.substring(2),function(h){return r(h,a)}))})},Ua=function(e,l,a,m){var r=e.modelEvents?e.modelEvents:null,h=Array.isArray(r)?r.join(" "):r;H(m,function(n,i){a&&typeof n=="string"&&n!==i&&n!==a.getContent({format:e.outputFormat})&&a.setContent(n)}),a.on(h||"change input undo redo",function(){l.emit("update:modelValue",a.getContent({format:e.outputFormat}))})},Aa=function(e,l,a,m,r,h){m.setContent(h()),a.attrs["onUpdate:modelValue"]&&Ua(l,a,m,r),Ia(e,a.attrs,m)},Me=0,He=function(e){var l=Date.now(),a=Math.floor(Math.random()*1e9);return Me++,e+"_"+a+Me+String(l)},Ea=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},ze=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},Oa=function(e,l){return ze(e).concat(ze(l))},La=function(e){return e==null},Re=function(e){var l;return typeof((l=e.options)===null||l===void 0?void 0:l.set)=="function"&&e.options.isRegistered("disabled")},Fe=function(){return{listeners:[],scriptId:He("tiny-script"),scriptLoaded:!1}},Ta=function(){var e=Fe(),l=function(r,h,n,i){var g=h.createElement("script");g.referrerPolicy="origin",g.type="application/javascript",g.id=r,g.src=n;var k=function(){g.removeEventListener("load",k),i()};g.addEventListener("load",k),h.head&&h.head.appendChild(g)},a=function(r,h,n){e.scriptLoaded?n():(e.listeners.push(n),r.getElementById(e.scriptId)||l(e.scriptId,r,h,function(){e.listeners.forEach(function(i){return i()}),e.scriptLoaded=!0}))},m=function(){e=Fe()};return{load:a,reinitialize:m}},ja=Ta(),Ma=function(){return typeof window<"u"?window:global},de=function(){var e=Ma();return e&&e.tinymce?e.tinymce:null},za={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,readonly:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},le=function(){return le=Object.assign||function(e){for(var l,a=1,m=arguments.length;a<m;a++){l=arguments[a];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},le.apply(this,arguments)},Ra=function(e,l,a,m){return e(m||"div",{id:l,ref:a})},Fa=function(e,l,a){return e("textarea",{id:l,visibility:"hidden",ref:a})},$e={selector:void 0,target:void 0},_e=function(e,l){var a;typeof((a=e.mode)===null||a===void 0?void 0:a.set)=="function"?e.mode.set(l):e.setMode(l)},Na=Ke({props:za,setup:function(e,l){var a=e.init?le(le({},e.init),$e):le({},$e),m=nt(e),r=m.disabled,h=m.readonly,n=m.modelValue,i=m.tagName,g=$(null),k=null,U=e.id||He("tiny-vue"),O=e.init&&e.init.inline||e.inline,S=!!l.attrs["onUpdate:modelValue"],y=!0,V=e.initialValue?e.initialValue:"",L="",M=function(B){return S?function(){return n?.value?n.value:""}:function(){return B?V:L}},z=function(){var B=M(y),_=le(le({},a),{disabled:e.disabled,readonly:e.readonly,target:g.value,plugins:Oa(a.plugins,e.plugins),toolbar:e.toolbar||a.toolbar,inline:O,license_key:e.licenseKey,setup:function(b){k=b,!Re(k)&&e.disabled===!0&&_e(k,"readonly"),b.on("init",function(s){return Aa(s,e,l,b,n,B)}),typeof a.setup=="function"&&a.setup(b)}});Ea(g.value)&&(g.value.style.visibility=""),de().init(_),y=!1};H(h,function(B){k!==null&&_e(k,B?"readonly":"design")}),H(r,function(B){k!==null&&(Re(k)?k.options.set("disabled",B):_e(k,B?"readonly":"design"))}),H(i,function(B){var _;k&&(S||(L=k.getContent()),(_=de())===null||_===void 0||_.remove(k),Ee(function(){return z()}))}),ke(function(){if(de()!==null)z();else if(g.value&&g.value.ownerDocument){var B=e.cloudChannel?e.cloudChannel:"8",_=e.apiKey?e.apiKey:"no-api-key",b=La(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(_,"/tinymce/").concat(B,"/tinymce.min.js"):e.tinymceScriptSrc;ja.load(g.value.ownerDocument,b,z)}}),Ce(function(){de()!==null&&de().remove(k)}),O||(ot(function(){y||z()}),st(function(){var B;k&&(S||(L=k.getContent()),(B=de())===null||B===void 0||B.remove(k))}));var F=function(B){var _;k&&(L=k.getContent(),(_=de())===null||_===void 0||_.remove(k),a=le(le(le({},a),B),$e),Ee(function(){return z()}))};return l.expose({rerender:F,getEditor:function(){return k}}),function(){return O?Ra(re,U,g,e.tagName):Fa(re,U,g)}}});function Ka(){const e=$(null),l=$(!1);return{editorRef:e,isFullscreen:l,onInit:(n,i)=>{e.value=i},toggleFullscreen:()=>{e.value&&(e.value.execCommand("mceFullScreen"),l.value=!l.value)},ensureExitFullscreen:()=>{l.value&&e.value&&(e.value.execCommand("mceFullScreen"),l.value=!1)},tinymceInit:{menubar:!1,height:320,plugins:"lists link image table code paste fullscreen",toolbar:"undo redo | blocks | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | removeformat | code | fullscreen",paste_data_images:!0,image_dimensions:!0,image_caption:!0,object_resizing:"img",branding:!1,content_style:"body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; font-size:14px}",automatic_uploads:!1,file_picker_types:"image",file_picker_callback:n=>{const i=document.createElement("input");i.type="file",i.accept="image/*",i.onchange=()=>{const g=i.files?.[0];if(!g)return;const k=new FileReader;k.onload=()=>n(k.result),k.readAsDataURL(g)},i.click()}}}}const Wa={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},Ga={class:"bg-white p-4 rounded shadow-lg w-[1024px] max-h-screen overflow-auto"},qa={class:"flex items-center justify-between mb-2"},Ha={class:"text-lg font-semibold"},Ya={class:"flex items-center gap-2"},Qa={class:"bg-white w-full max-w-[1024px] max-h-screen rounded-2xl shadow-lg flex flex-col"},Ja={class:"p-5 flex-1 overflow-auto"},Xa={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Za=["aria-invalid"],en=["value"],tn={key:0,class:"text-red-600 text-xs mt-1"},ln=["aria-invalid"],an=["value"],nn={key:0,class:"text-red-600 text-xs mt-1"},on={class:"md:col-span-2"},sn=["aria-invalid"],rn={key:0,class:"text-red-600 text-xs mt-1"},un={class:"md:col-span-2"},dn={key:0,class:"text-red-600 text-xs mt-1"},cn={class:"md:col-span-2"},vn={class:"border-t p-4 bg-white flex items-center justify-end gap-2"},Ne={__name:"DocFormModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"create"},initial:{type:Object,default:()=>({id:null,type:"cbl",title:"",content:"",status:"draft",doc_date:""})}},emits:["update:modelValue","submit","closed"],setup(e,{emit:l}){const a=["draft","published","archived"],m=["cbl","resolution","minute"],r=e,h=l,n=A({get:()=>r.modelValue,set:B=>h("update:modelValue",B)}),{isFullscreen:i,onInit:g,toggleFullscreen:k,ensureExitFullscreen:U,tinymceInit:O}=Ka(),S=$({...r.initial}),y=$({});H(()=>r.initial,B=>{S.value={...B},y.value={}},{immediate:!0});const V=A(()=>r.mode==="edit"?"Edit Document":"Add Document"),L=A(()=>r.mode==="edit"?"Save Changes":"Create"),M=()=>{const B={};return S.value.type||(B.type="Type is required"),S.value.title?.trim()||(B.title="Title is required"),S.value.content?.trim()||(B.content="Content is required"),S.value.status&&!a.includes(S.value.status)&&(B.status="Invalid status"),y.value=B,Object.keys(B).length===0},z=()=>{if(!M())return;const B={...S.value,doc_date:S.value.doc_date||null};h("submit",B)},F=()=>{U(),n.value=!1,h("closed")};return(B,_)=>n.value?(d(),v("div",Wa,[t("div",Ga,[t("div",qa,[t("h2",Ha,w(V.value),1),t("div",Ya,[t("button",{class:"px-3 py-1 text-xs bg-indigo-600 text-white rounded",onClick:_[0]||(_[0]=(...b)=>E(k)&&E(k)(...b))},w(E(i)?"Restore":"Maximize"),1),t("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:F},"Close")])]),t("div",Qa,[t("div",Ja,[t("div",Xa,[t("div",null,[_[6]||(_[6]=t("label",{class:"block mb-1 font-medium text-gray-700"},[G("Type "),t("span",{class:"text-red-500"},"*")],-1)),R(t("select",{"onUpdate:modelValue":_[1]||(_[1]=b=>S.value.type=b),"aria-invalid":!!y.value.type,class:Y(["w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",y.value.type?"border-red-500":"border-gray-300"])},[(d(),v(K,null,q(m,b=>t("option",{key:b,value:b},w(b),9,en)),64))],10,Za),[[ue,S.value.type]]),y.value.type?(d(),v("p",tn,w(y.value.type),1)):P("",!0)]),t("div",null,[_[7]||(_[7]=t("label",{class:"block mb-1 font-medium text-gray-700"},"Status",-1)),R(t("select",{"onUpdate:modelValue":_[2]||(_[2]=b=>S.value.status=b),"aria-invalid":!!y.value.status,class:Y(["w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",y.value.status?"border-red-500":"border-gray-300"])},[(d(),v(K,null,q(["draft","published","archived"],b=>t("option",{key:b,value:b},w(b),9,an)),64))],10,ln),[[ue,S.value.status]]),y.value.status?(d(),v("p",nn,w(y.value.status),1)):P("",!0)]),t("div",on,[_[8]||(_[8]=t("label",{class:"block mb-1 font-medium text-gray-700"},[G("Title "),t("span",{class:"text-red-500"},"*")],-1)),R(t("input",{"onUpdate:modelValue":_[3]||(_[3]=b=>S.value.title=b),"aria-invalid":!!y.value.title,placeholder:"Document title",class:Y(["w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",y.value.title?"border-red-500":"border-gray-300"])},null,10,sn),[[Q,S.value.title]]),y.value.title?(d(),v("p",rn,w(y.value.title),1)):P("",!0)]),t("div",un,[_[9]||(_[9]=t("label",{class:"block mb-1 font-medium text-gray-700"},[G("Content "),t("span",{class:"text-red-500"},"*")],-1)),t("div",{class:Y(["rounded-lg border",y.value.content?"border-red-500":"border-gray-300"])},[T(E(Na),{modelValue:S.value.content,"onUpdate:modelValue":_[4]||(_[4]=b=>S.value.content=b),init:E(O),onInit:E(g),"tinymce-script-src":"/tinymce/tinymce.min.js",licenseKey:"gpl"},null,8,["modelValue","init","onInit"])],2),y.value.content?(d(),v("p",dn,w(y.value.content),1)):P("",!0)]),t("div",cn,[_[10]||(_[10]=t("label",{class:"block mb-1 font-medium text-gray-700"},"Document Date",-1)),R(t("input",{"onUpdate:modelValue":_[5]||(_[5]=b=>S.value.doc_date=b),type:"date",class:"w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 border-gray-300"},null,512),[[Q,S.value.doc_date]])])])]),t("div",vn,[t("button",{type:"button",class:"px-4 py-2 rounded-lg text-xs border border-gray-300 hover:bg-gray-100 transition",onClick:F}," Cancel "),t("button",{type:"button",class:Y(["px-4 py-2 rounded-lg text-xs",r.mode==="edit"?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-blue-600 text-white hover:bg-blue-700"]),onClick:z},w(L.value),3)])])])])):P("",!0)}},mn={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},fn={class:"bg-white p-4 rounded shadow-lg w-[900px] max-h-screen overflow-auto"},bn={class:"flex items-center justify-between"},pn={class:"text-lg font-semibold"},gn={class:"text-gray-600"},yn={class:"flex items-center gap-2"},xn={class:"mt-3 flex flex-col gap-2"},hn={class:"flex items-center gap-2"},wn=["value"],Cn=["value"],kn={class:"text-[12px] text-gray-600"},Sn={class:"space-y-2 mt-4 max-h-[60vh] overflow-y-auto pr-2 -mr-2"},$n={class:"text-sm"},_n={class:"flex flex-wrap items-center gap-2"},Vn={class:"font-semibold"},Bn={class:"px-2 py-[2px] text-[11px] rounded bg-indigo-100 text-indigo-700 uppercase"},Dn={class:"text-xs text-gray-600"},Pn={class:"shrink-0 flex items-center gap-2"},In=["onClick"],Un=["onClick"],An={class:"flex justify-between items-center mt-3 text-xs text-gray-600"},we=10,En={__name:"ClubDocsModal",props:{modelValue:{type:Boolean,default:!1},clubId:{type:[Number,String],required:!0},clubName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,m=l,r=Ba(),h=A({get:()=>a.modelValue,set:u=>m("update:modelValue",u)}),n=$([]),i=$(1),g=$(""),k=$("all"),U=$("all"),O=["cbl","resolution","minute"],S=["draft","published","archived"],y=["cbl","resolution","minute"],V=u=>y.includes((u||"").toLowerCase())?(u||"").toLowerCase():"cbl",L=u=>{const c=V(u),o=O.indexOf(c);return o===-1?999:o},M=(u,c)=>{if(!c)return!0;const o=(u.title||"").toLowerCase(),D=(u.content||"").toLowerCase();return o.includes(c)||D.includes(c)},z=A(()=>{const u=g.value.trim().toLowerCase();let c=n.value||[];return k.value!=="all"&&(c=c.filter(o=>(o.type||"").toLowerCase()===k.value)),U.value!=="all"&&(c=c.filter(o=>(o.status||"").toLowerCase()===U.value)),u&&(c=c.filter(o=>M(o,u))),c.slice().sort((o,D)=>{const N=L(o.type),ne=L(D.type);if(N!==ne)return N-ne;const se=o.doc_date||o.created_at,xe=D.doc_date||D.created_at,ce=se?new Date(se).getTime():0;return(xe?new Date(xe).getTime():0)-ce})}),F=A(()=>{const u=z.value.length,c=Math.ceil(Math.max(u,1)/we),o=Math.min(i.value,c||1),D=(o-1)*we,N=z.value.slice(D,D+we);return{total:u,totalPages:c,currentPage:o,pageSize:we,data:N}});H([g,k,U],()=>i.value=1);const B=async()=>{g.value="",k.value="all",U.value="all",i.value=1,await r.fetchByClub(a.clubId,{page:1,limit:200}),n.value=Array.isArray(r.docs?.data)?r.docs.data:[]},_=$(!1),b=$(!1),s=$(null),C=()=>{_.value=!0},j=async u=>{const c=await r.create({...u,club_id:a.clubId});n.value.unshift(c),_.value=!1},te=()=>{},be=u=>{s.value={id:u.id,type:u.type||"cbl",title:u.title||"",content:u.content||"",status:u.status||"draft",doc_date:u.doc_date?String(u.doc_date).slice(0,10):""},b.value=!0},X=async u=>{const{id:c,...o}=u,D=await r.updateById(c,{...o}),N=n.value.findIndex(ne=>ne.id===c);N!==-1&&(n.value[N]=D),b.value=!1},W=()=>{},oe=async u=>{(await fe.fire({title:`Delete document "${u.title}"?`,text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed&&(await r.deleteById(u.id),n.value=n.value.filter(o=>o.id!==u.id),await fe.fire("Deleted!","The document has been deleted.","success"))};return H(()=>a.modelValue,u=>{u&&B()},{immediate:!1}),(u,c)=>h.value?(d(),v("div",mn,[t("div",fn,[t("div",bn,[t("h2",pn,[c[8]||(c[8]=G("Club Documents — ",-1)),t("span",gn,w(e.clubName),1)]),t("div",yn,[t("button",{class:"px-3 py-1 text-xs bg-blue-600 text-white rounded",onClick:C},"+ Add Document"),t("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:c[0]||(c[0]=o=>h.value=!1)},"Close")])]),t("div",xn,[t("div",hn,[R(t("select",{"onUpdate:modelValue":c[1]||(c[1]=o=>k.value=o),class:"border rounded px-2 py-1 text-sm"},[c[9]||(c[9]=t("option",{value:"all"},"All types",-1)),(d(),v(K,null,q(y,o=>t("option",{key:o,value:o},w(o),9,wn)),64))],512),[[ue,k.value]]),R(t("select",{"onUpdate:modelValue":c[2]||(c[2]=o=>U.value=o),class:"border rounded px-2 py-1 text-sm"},[c[10]||(c[10]=t("option",{value:"all"},"All statuses",-1)),(d(),v(K,null,q(S,o=>t("option",{key:o,value:o},w(o),9,Cn)),64))],512),[[ue,U.value]]),R(t("input",{"onUpdate:modelValue":c[3]||(c[3]=o=>g.value=o),type:"text",placeholder:"Search documents by title or content…",class:"border rounded px-2 py-1 text-sm w-full"},null,512),[[Q,g.value]])]),t("div",kn," Showing "+w(F.value.total)+" document(s). Ordered by type → date. ",1)]),t("div",Sn,[(d(!0),v(K,null,q(F.value.data,o=>(d(),v("div",{key:o.id,class:"border rounded p-3 bg-gray-50 flex items-start justify-between gap-4"},[t("div",$n,[t("div",_n,[t("span",Vn,w(o.title),1),t("span",Bn,w(o.type),1),t("span",{class:Y(["px-2 py-[2px] text-[11px] rounded",{"bg-yellow-100 text-yellow-700":o.status==="draft","bg-emerald-100 text-emerald-700":o.status==="published","bg-gray-200 text-gray-700":o.status==="archived"}])},w(o.status),3),t("span",Dn,w(o.doc_date?new Date(o.doc_date).toLocaleDateString():o.created_at?new Date(o.created_at).toLocaleDateString():"—"),1)])]),t("div",Pn,[t("button",{class:"px-2 py-1 bg-amber-500 hover:bg-amber-600 text-white rounded text-xs",onClick:D=>be(o)},"Edit",8,In),t("button",{class:"px-2 py-1 bg-red-600 text-white rounded text-xs",onClick:D=>oe(o)},"Delete",8,Un)])]))),128))]),t("div",An,[i.value>1?(d(),v("button",{key:0,onClick:c[4]||(c[4]=o=>i.value=i.value-1),class:"px-3 py-1 bg-gray-300 rounded"},"Previous")):P("",!0),t("div",null,"Page "+w(F.value.currentPage)+" of "+w(F.value.totalPages||1),1),i.value<F.value.totalPages?(d(),v("button",{key:1,onClick:c[5]||(c[5]=o=>i.value=i.value+1),class:"px-3 py-1 bg-gray-300 rounded"},"Next")):P("",!0)])]),T(Ne,{modelValue:_.value,"onUpdate:modelValue":c[6]||(c[6]=o=>_.value=o),mode:"create",initial:{type:"cbl",title:"",content:"",status:"draft",doc_date:""},onSubmit:j,onClosed:te},null,8,["modelValue"]),T(Ne,{modelValue:b.value,"onUpdate:modelValue":c[7]||(c[7]=o=>b.value=o),mode:"edit",initial:s.value||{id:null,type:"cbl",title:"",content:"",status:"draft",doc_date:""},onSubmit:X,onClosed:W},null,8,["modelValue","initial"])])):P("",!0)}},On=["title","aria-label","disabled"],Ln=["d"],Tn={class:"hidden md:inline-block"},jn="inline-flex items-center gap-2 rounded-xl transition focus:outline-none focus:ring-2 focus:ring-offset-1",ge={__name:"IconifyButton",props:{iconPath:{type:String,required:!0},color:{type:String,default:"text-gray-700"},variant:{type:String,default:"ghost"},label:{type:String,default:""},tooltip:{type:String,default:""},size:{type:String,default:"sm"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:l}){const a={sm:"px-2 py-1 text-[12px]",md:"px-3 py-1.5 text-sm"},m={ghost:"bg-transparent hover:bg-gray-100",solid:"text-white hover:opacity-90"};return(r,h)=>(d(),v("button",{title:e.tooltip||e.label,"aria-label":e.tooltip||e.label,disabled:e.disabled,class:Y([jn,a[e.size],e.variant==="solid"?"bg-gray-800":"",e.variant==="ghost"?m.ghost:m.solid,e.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer",e.color]),onClick:h[0]||(h[0]=n=>r.$emit("click"))},[(d(),v("svg",{style:it({width:e.size==="sm"?"18px":"20px",height:e.size==="sm"?"18px":"20px"}),viewBox:"0 0 24 24","aria-hidden":"true"},[t("path",{d:e.iconPath},null,8,Ln)],4)),t("span",Tn,w(e.label),1)],10,On))}},Mn={class:"flex items-center gap-1 md:gap-2"},zn=["aria-expanded"],Rn={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24","aria-hidden":"true"},Fn=["d"],Nn={__name:"ClubRowActions",props:{row:{type:Object,required:!0}},emits:["members","docs","edit","delete","view"],setup(e,{emit:l}){const a=$(!1),m=$(null),r=$(null),h=n=>{if(!a.value)return;const i=m.value,g=r.value;i&&!i.contains(n.target)&&g&&!g.contains(n.target)&&(a.value=!1)};return ke(()=>{document.addEventListener("click",h)}),Ce(()=>{document.removeEventListener("click",h)}),(n,i)=>(d(),v("div",Mn,[T(ge,{"icon-path":E(ft),color:"text-gray-700",label:"View",tooltip:"View Club",size:"sm",onClick:i[0]||(i[0]=g=>n.$emit("view",e.row))},null,8,["icon-path"]),T(ge,{"icon-path":E(bt),color:"text-blue-600",label:"Members",tooltip:"View Members",size:"sm",onClick:i[1]||(i[1]=g=>n.$emit("members",e.row))},null,8,["icon-path"]),T(ge,{"icon-path":E(pt),color:"text-indigo-600",label:"Docs",tooltip:"View Documents",size:"sm",onClick:i[2]||(i[2]=g=>n.$emit("docs",e.row))},null,8,["icon-path"]),T(ge,{"icon-path":E(We),color:"text-emerald-600",label:"Edit",tooltip:"Edit Club",size:"sm",onClick:i[3]||(i[3]=g=>n.$emit("edit",e.row))},null,8,["icon-path"]),T(ge,{"icon-path":E(gt),color:"text-red-600",label:"Delete",tooltip:"Delete Club",size:"sm",onClick:i[4]||(i[4]=g=>n.$emit("delete",e.row))},null,8,["icon-path"]),t("div",{class:"relative md:hidden",ref_key:"btnRef",ref:r},[t("button",{class:"inline-flex items-center justify-center rounded-xl p-1.5 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-1","aria-expanded":a.value,"aria-haspopup":"menu",title:"More",onClick:i[5]||(i[5]=g=>a.value=!a.value)},[(d(),v("svg",Rn,[t("path",{d:E(yt)},null,8,Fn)]))],8,zn),a.value?(d(),v("div",{key:0,ref_key:"menuRef",ref:m,role:"menu",class:"absolute right-0 z-20 mt-1 w-40 overflow-hidden rounded-xl border bg-white shadow-lg"},[t("button",{role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:i[6]||(i[6]=g=>{a.value=!1,n.$emit("view",e.row)})}," View Club "),t("button",{role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:i[7]||(i[7]=g=>{a.value=!1,n.$emit("members",e.row)})}," View Members "),t("button",{role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:i[8]||(i[8]=g=>{a.value=!1,n.$emit("docs",e.row)})}," View Documents "),t("button",{role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:i[9]||(i[9]=g=>{a.value=!1,n.$emit("edit",e.row)})}," Edit Club "),t("button",{role:"menuitem",class:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50",onClick:i[10]||(i[10]=g=>{a.value=!1,n.$emit("delete",e.row)})}," Delete ")],512)):P("",!0)],512)]))}},Kn={class:"flex items-center gap-2"},Xn={__name:"ClubsOrganizationPage",setup(e){const l=Ge(),a=$({page:1,limit:10}),m=async(s={},C=!0)=>{a.value={...a.value,...s},await l.fetchAll(a.value,C)};ke(()=>m({page:1,limit:10}));const r=A(()=>({total:l.clubs.total||0,totalPages:l.clubs.totalPages||1,currentPage:l.clubs.currentPage||1,pageSize:l.clubs.pageSize||10,data:l.clubs.data||[]})),h=$(!1),n=$(!1),i=$(null),g=()=>{h.value=!0},k=async s=>{await l.create(s),h.value=!1,await m(a.value,!0)},U=async s=>{await l.fetchById(s.id);const C=l.selectedClub||s;i.value={id:C.id,name:C.name||"",code:C.code||"",category:C.category||"",description:C.description||"",is_active:C.is_active??!0,established_at:C.established_at?String(C.established_at).slice(0,10):"",website:C.website||"",email:C.email||"",phone:C.phone||"",logo:C.logo||"",banner:C.banner||""},n.value=!0},O=async s=>{const{id:C,...j}=s;await l.updateById(C,j),n.value=!1,await m(a.value,!0)},S=async s=>{if(!s?.id)return;(await fe.fire({title:`Delete club "${s.name}"?`,text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed&&(await l.deleteById(s.id),await m(a.value,!0),await fe.fire("Deleted!","The club has been deleted.","success"))},y=$(!1),V=$(!1),L=$(null),M=$(""),z=s=>{L.value=s.id,M.value=s.name||"",y.value=!0},F=s=>{L.value=s.id,M.value=s.name||"",V.value=!0},B=s=>{s?.id&&window.open(`/#/club/${s.id}`,"_self")},_=[{key:"name",label:"Name",sortable:!0,filterable:!0},{key:"code",label:"Code",sortable:!0,filterable:!0},{key:"category",label:"Category",sortable:!0,filterable:!0},{key:"is_active",label:"Active",sortable:!0,formatter:s=>s?"Yes":"No"}],b=async s=>{await m(s)};return(s,C)=>(d(),v(K,null,[T(xt,null,{default:ee(()=>[T(kt,null,{default:ee(()=>[E(l).error?(d(),J(vl,{key:0,icon:E(ht),color:"danger"},{default:ee(()=>[G(w(E(l).error),1)]),_:1},8,["icon"])):P("",!0),T(It,{icon:E(wt),title:"Clubs",main:""},{default:ee(()=>[t("div",Kn,[T(ae,{icon:E(Ct),color:"primary",label:"Add Club",onClick:g},null,8,["icon"]),T(ae,{color:"info",label:"Refresh",onClick:C[0]||(C[0]=j=>m({page:1,limit:r.value.pageSize}))})])]),_:1},8,["icon"]),T(rl,{columns:_,data:r.value,loading:E(l).isLoading,onQueryChange:b},{"cell-category":ee(({value:j})=>[T(Te,{text:j||"—",tone:"indigo"},null,8,["text"])]),"cell-is_active":ee(({value:j})=>[T(Te,{text:j?"Active":"Inactive",tone:j?"emerald":"gray"},null,8,["text","tone"])]),"cell-actions":ee(({row:j})=>[T(Nn,{row:j,onView:B,onMembers:z,onDocs:F,onEdit:U,onDelete:S},null,8,["row"])]),_:1},8,["data","loading"])]),_:1})]),_:1}),T(je,{modelValue:h.value,"onUpdate:modelValue":C[1]||(C[1]=j=>h.value=j),mode:"create",onSubmit:k},null,8,["modelValue"]),T(je,{modelValue:n.value,"onUpdate:modelValue":C[2]||(C[2]=j=>n.value=j),mode:"edit",initial:i.value||{},onSubmit:O},null,8,["modelValue","initial"]),T(Va,{modelValue:y.value,"onUpdate:modelValue":C[3]||(C[3]=j=>y.value=j),"club-id":L.value,"club-name":M.value},null,8,["modelValue","club-id","club-name"]),T(En,{modelValue:V.value,"onUpdate:modelValue":C[4]||(C[4]=j=>V.value=j),"club-id":L.value,"club-name":M.value},null,8,["modelValue","club-id","club-name"])],64))}};export{Xn as default};
