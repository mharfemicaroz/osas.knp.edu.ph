import{c as O,u as ce,o as me,r as H,D as fe,a as h,d as K,q as v,e,t as S,k as j,h as U,B as pe,g as B,j as z,F as se,A as ae,v as R,S as k,f as W,l as J,z as ye,L as ge,P as ve}from"./index.BbiYfjGA.js";import{E as he,a as D,d as _e,Q as xe,b as we}from"./browser.D62p3eKz.js";import{B as Se,E as Ce,F as Ae,G as Fe,H as $e,I as Te,C as ke,D as Ue,z as Ee,_ as Re,a as Le,g as Ve,J as De,K as Be,L as Pe,M as Ne,$ as Oe}from"./SectionMain.DHtdM3Z9.js";import{_ as Ie,a as Ye,b as ie,B as qe,c as ze}from"./Badge.CYAmDVIK.js";import{_ as Me}from"./ActivityRowActions.DftTmDMU.js";import{u as le}from"./liquidationFund.B-M2KJH_.js";import{u as We}from"./activityDesign.DDUDpsi_.js";import"./ToasterComponent.CsWuApyM.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";import"./IconifyButton.koJBRCal.js";const je={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},Ge={class:"bg-white p-4 md:p-5 rounded-2xl shadow-xl w-[1096px] max-h-screen overflow-auto"},He={class:"flex items-center justify-between mb-3"},Ke={class:"flex items-center gap-3"},Je={class:"text-lg font-semibold"},Qe={class:"text-[11px] px-2 py-1 rounded bg-gray-100"},Xe={key:0,class:"mb-3 text-xs px-3 py-2 rounded-lg border bg-amber-50 border-amber-200 text-amber-800"},Ze={class:"text-sm mb-3"},et=["disabled"],tt=["value"],st={key:0,class:"text-red-600 text-[11px] mt-1"},ot={key:1,class:"text-[11px] text-gray-500 mt-1"},at={key:2,class:"text-[11px] text-amber-700 mt-1"},nt={class:"mt-2 p-3 border rounded-lg bg-white"},lt={class:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"},it=["disabled"],rt=["disabled"],dt=["disabled"],ut=["disabled"],ct=["disabled"],mt=["disabled"],ft={class:"md:col-span-2"},pt=["disabled"],_t={class:"mt-3 text-sm"},bt={class:"flex flex-wrap gap-4"},yt={class:"mt-4 text-sm"},gt={class:"flex items-center justify-between"},vt=["disabled"],ht={class:"mt-2 border rounded overflow-hidden"},xt={class:"w-full text-xs"},wt={class:"p-2"},St=["onUpdate:modelValue","disabled"],Ct={class:"p-2"},At=["onUpdate:modelValue","disabled"],Ft={class:"p-2"},$t=["onUpdate:modelValue","disabled"],Tt={class:"p-2"},kt=["onUpdate:modelValue","disabled"],Ut={class:"p-2"},Et=["onUpdate:modelValue","disabled"],Rt={class:"p-2"},Lt=["onUpdate:modelValue","disabled"],Vt={class:"p-2"},Dt=["onUpdate:modelValue","disabled"],Bt={class:"p-2 text-right"},Pt=["disabled","onClick"],Nt={class:"mt-2 text-right text-sm"},Ot={class:"mt-4 text-sm"},It=["disabled"],Yt={class:"flex justify-end gap-2 mt-5"},re={__name:"LiquidationFundFormModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"create"},initial:{type:Object,default:()=>({id:null,reference_code:"",date_filed:"",activity_design_id:"",sources_of_fund:{contribution:0,payment_from_fines:0,solicitations:0,donations:0,other_sources:0,current_available_funds:0,other_sources_note:""},uses_of_fund:[],remarks:"",status:"draft"})}},emits:["update:modelValue","submit"],setup(s,{emit:o}){const y=s,d=o,f=O({get:()=>y.modelValue,set:c=>d("update:modelValue",c)}),x=ce();le();const l=We(),F=O(()=>Array.isArray(l.items?.data)?l.items.data.filter(c=>String(c.status).toLowerCase()==="approved"):[]);me(async()=>{await l.fetchAll({page:1,limit:200,status:"approved"},!0)});const m=H(structuredClone(y.initial)),C=H({});fe(()=>y.initial,c=>{let a=c.sources_of_fund,i=c.uses_of_fund;try{typeof a=="string"&&(a=JSON.parse(a||"{}"))}catch{}try{typeof i=="string"&&(i=JSON.parse(i||"[]"))}catch{}m.value={...c,sources_of_fund:{contribution:0,payment_from_fines:0,solicitations:0,donations:0,other_sources:0,current_available_funds:0,other_sources_note:"",...a||{}},uses_of_fund:Array.isArray(i)?i:[]},C.value={}},{immediate:!0});const I=O(()=>String(m.value?.status||"").toLowerCase()),b=O(()=>y.mode==="edit"&&I.value!=="draft"),w=O(()=>y.mode!=="edit"?"New Liquidation Fund":b.value?"View Liquidation (read-only)":"Edit Liquidation"),E=O(()=>y.mode==="edit"?"Save Changes":"Create"),L=c=>{const a=c?.name_of_activity||"Untitled",i=c?.reference_code?` [${c.reference_code}]`:"",V=c?.date_of_implementation?` • ${c.date_of_implementation}`:"";return`${a}${i}${V}`},g=c=>Number.isFinite(+c)?+c:0,$=O(()=>{const c=m.value.sources_of_fund||{};return g(c.contribution)+g(c.payment_from_fines)+g(c.solicitations)+g(c.donations)+g(c.other_sources)+g(c.current_available_funds)}),P=O(()=>Array.isArray(m.value.uses_of_fund)?m.value.uses_of_fund.reduce((c,a)=>c+g(a?.amount),0):0),Y=O(()=>$.value-P.value),T=c=>Number(c).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),N=()=>{Array.isArray(m.value.uses_of_fund)||(m.value.uses_of_fund=[]),m.value.uses_of_fund.push({date:"",qty:1,unit:"",particulars:"",sheet_no:"",amount:0,in_charge:""})},q=c=>{m.value.uses_of_fund.splice(c,1)},G=()=>{if(b.value)return!1;const c={};m.value.activity_design_id||(c.activity_design_id="Required");const a=m.value.sources_of_fund||{};return["contribution","payment_from_fines","solicitations","donations","other_sources","current_available_funds"].forEach(i=>{a[i]!=null&&Number(a[i])<0&&(c[`src_${i}`]="Must be ≥ 0")}),Array.isArray(m.value.uses_of_fund)&&m.value.uses_of_fund.forEach((i,V)=>{i?.qty!=null&&Number(i.qty)<=0&&(c[`use_${V}_qty`]="Qty must be > 0"),i?.amount!=null&&Number(i.amount)<0&&(c[`use_${V}_amount`]="Must be ≥ 0")}),C.value=c,Object.keys(c).length===0},X=()=>{if(b.value||!G())return;const c={...m.value};!c.filed_by_user_id&&x.user?.id&&(c.filed_by_user_id=x.user.id),d("submit",c)};return(c,a)=>f.value?(v(),h("div",je,[e("div",Ge,[e("div",He,[e("div",Ke,[e("h2",Je,S(w.value),1),e("span",Qe,S(m.value.status),1)]),e("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:a[0]||(a[0]=i=>f.value=!1)},"Close")]),b.value?(v(),h("div",Xe,[a[11]||(a[11]=j(" This liquidation is ",-1)),e("strong",null,S(m.value.status),1),a[12]||(a[12]=j(". Editing is disabled. ",-1))])):K("",!0),e("div",Ze,[a[14]||(a[14]=e("label",{class:"block mb-1"},[j("Activity Design "),e("span",{class:"text-red-500"},"*")],-1)),U(e("select",{"onUpdate:modelValue":a[1]||(a[1]=i=>m.value.activity_design_id=i),class:z(["w-full border rounded px-2.5 py-2",C.value.activity_design_id?"border-red-500":""]),disabled:b.value||B(l).isLoading},[a[13]||(a[13]=e("option",{value:""},"Select approved activity design…",-1)),(v(!0),h(se,null,ae(F.value,i=>(v(),h("option",{key:i.id,value:i.id},S(L(i)),9,tt))),128))],10,et),[[pe,m.value.activity_design_id]]),C.value.activity_design_id?(v(),h("p",st,S(C.value.activity_design_id),1)):K("",!0),B(l).isLoading?(v(),h("p",ot,"Loading approved activities…")):F.value.length?K("",!0):(v(),h("p",at,"No approved activity designs found."))]),e("div",nt,[a[26]||(a[26]=e("div",{class:"text-sm font-medium mb-2"},"Sources of Fund",-1)),e("div",lt,[e("div",null,[a[15]||(a[15]=e("label",{class:"block mb-1"},"Contribution",-1)),U(e("input",{type:"number",step:"0.01",min:"0",class:z(["w-full border rounded px-2.5 py-2",C.value.src_contribution?"border-red-500":""]),"onUpdate:modelValue":a[2]||(a[2]=i=>m.value.sources_of_fund.contribution=i),disabled:b.value},null,10,it),[[R,m.value.sources_of_fund.contribution,void 0,{number:!0}]])]),e("div",null,[a[16]||(a[16]=e("label",{class:"block mb-1"},"Payment from Fines",-1)),U(e("input",{type:"number",step:"0.01",min:"0",class:z(["w-full border rounded px-2.5 py-2",C.value.src_payment_from_fines?"border-red-500":""]),"onUpdate:modelValue":a[3]||(a[3]=i=>m.value.sources_of_fund.payment_from_fines=i),disabled:b.value},null,10,rt),[[R,m.value.sources_of_fund.payment_from_fines,void 0,{number:!0}]])]),e("div",null,[a[17]||(a[17]=e("label",{class:"block mb-1"},"Solicitations",-1)),U(e("input",{type:"number",step:"0.01",min:"0",class:z(["w-full border rounded px-2.5 py-2",C.value.src_solicitations?"border-red-500":""]),"onUpdate:modelValue":a[4]||(a[4]=i=>m.value.sources_of_fund.solicitations=i),disabled:b.value},null,10,dt),[[R,m.value.sources_of_fund.solicitations,void 0,{number:!0}]])]),e("div",null,[a[18]||(a[18]=e("label",{class:"block mb-1"},"Donations",-1)),U(e("input",{type:"number",step:"0.01",min:"0",class:z(["w-full border rounded px-2.5 py-2",C.value.src_donations?"border-red-500":""]),"onUpdate:modelValue":a[5]||(a[5]=i=>m.value.sources_of_fund.donations=i),disabled:b.value},null,10,ut),[[R,m.value.sources_of_fund.donations,void 0,{number:!0}]])]),e("div",null,[a[19]||(a[19]=e("label",{class:"block mb-1"},"Other Sources",-1)),U(e("input",{type:"number",step:"0.01",min:"0",class:z(["w-full border rounded px-2.5 py-2",C.value.src_other_sources?"border-red-500":""]),"onUpdate:modelValue":a[6]||(a[6]=i=>m.value.sources_of_fund.other_sources=i),disabled:b.value},null,10,ct),[[R,m.value.sources_of_fund.other_sources,void 0,{number:!0}]])]),e("div",null,[a[20]||(a[20]=e("label",{class:"block mb-1"},"Current Available Funds",-1)),U(e("input",{type:"number",step:"0.01",min:"0",class:z(["w-full border rounded px-2.5 py-2",C.value.src_current_available_funds?"border-red-500":""]),"onUpdate:modelValue":a[7]||(a[7]=i=>m.value.sources_of_fund.current_available_funds=i),disabled:b.value},null,10,mt),[[R,m.value.sources_of_fund.current_available_funds,void 0,{number:!0}]])]),e("div",ft,[a[21]||(a[21]=e("label",{class:"block mb-1"},"Other Sources Note (optional)",-1)),U(e("textarea",{rows:"2",class:"w-full border rounded px-2.5 py-2","onUpdate:modelValue":a[8]||(a[8]=i=>m.value.sources_of_fund.other_sources_note=i),disabled:b.value},null,8,pt),[[R,m.value.sources_of_fund.other_sources_note]])])]),e("div",_t,[e("div",bt,[e("div",null,[a[22]||(a[22]=j("Total Sources: ",-1)),e("strong",null,S(T($.value)),1)]),e("div",null,[a[23]||(a[23]=j("Total Uses: ",-1)),e("strong",null,S(T(P.value)),1)]),e("div",null,[a[24]||(a[24]=j("Cash on Hand: ",-1)),e("strong",{class:z(Y.value<0?"text-red-600":"text-emerald-700")},S(T(Y.value)),3)])]),a[25]||(a[25]=e("p",{class:"text-[11px] text-gray-500 mt-1"},"Server recalculates totals on save.",-1))])]),e("div",yt,[e("div",gt,[a[27]||(a[27]=e("label",{class:"block mb-1 font-medium"},"Use of Fund",-1)),e("button",{class:"px-3 py-1 bg-gray-200 rounded text-xs",disabled:b.value,onClick:N},"Add Row",8,vt)]),e("div",ht,[e("table",xt,[a[28]||(a[28]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"text-left p-2"},"Date"),e("th",{class:"text-left p-2"},"Qty"),e("th",{class:"text-left p-2"},"Unit"),e("th",{class:"text-left p-2"},"Particulars"),e("th",{class:"text-left p-2"},"Sheet No."),e("th",{class:"text-left p-2"},"Amount"),e("th",{class:"text-left p-2"},"In-Charge"),e("th",{class:"p-2 w-16"})])],-1)),e("tbody",null,[(v(!0),h(se,null,ae(m.value.uses_of_fund,(i,V)=>(v(),h("tr",{key:V,class:"border-t"},[e("td",wt,[U(e("input",{type:"date","onUpdate:modelValue":A=>i.date=A,class:"border rounded px-2 py-1",disabled:b.value},null,8,St),[[R,i.date]])]),e("td",Ct,[U(e("input",{type:"number",min:"1","onUpdate:modelValue":A=>i.qty=A,class:z(["w-20 border rounded px-2 py-1",C.value[`use_${V}_qty`]?"border-red-500":""]),disabled:b.value},null,10,At),[[R,i.qty,void 0,{number:!0}]])]),e("td",Ft,[U(e("input",{"onUpdate:modelValue":A=>i.unit=A,class:"w-20 border rounded px-2 py-1",disabled:b.value},null,8,$t),[[R,i.unit]])]),e("td",Tt,[U(e("input",{"onUpdate:modelValue":A=>i.particulars=A,class:"w-52 border rounded px-2 py-1",disabled:b.value},null,8,kt),[[R,i.particulars]])]),e("td",Ut,[U(e("input",{"onUpdate:modelValue":A=>i.sheet_no=A,class:"w-24 border rounded px-2 py-1",disabled:b.value},null,8,Et),[[R,i.sheet_no]])]),e("td",Rt,[U(e("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":A=>i.amount=A,class:z(["w-28 border rounded px-2 py-1",C.value[`use_${V}_amount`]?"border-red-500":""]),disabled:b.value},null,10,Lt),[[R,i.amount,void 0,{number:!0}]])]),e("td",Vt,[U(e("input",{"onUpdate:modelValue":A=>i.in_charge=A,class:"w-32 border rounded px-2 py-1",disabled:b.value},null,8,Dt),[[R,i.in_charge]])]),e("td",Bt,[e("button",{class:"px-2 py-1 bg-red-50 text-red-700 rounded",disabled:b.value,onClick:A=>q(V)},"Remove",8,Pt)])]))),128))])])]),e("div",Nt,[a[29]||(a[29]=e("span",{class:"mr-4"},"Total Uses:",-1)),e("strong",null,S(T(P.value)),1)])]),e("div",Ot,[a[30]||(a[30]=e("label",{class:"block mb-1"},"Remarks",-1)),U(e("textarea",{"onUpdate:modelValue":a[9]||(a[9]=i=>m.value.remarks=i),rows:"3",class:"w-full border rounded px-2.5 py-2",disabled:b.value},null,8,It),[[R,m.value.remarks]])]),e("div",Yt,[e("button",{class:"px-4 py-2 bg-gray-200 rounded text-xs",onClick:a[10]||(a[10]=i=>f.value=!1)},"Close"),b.value?K("",!0):(v(),h("button",{key:0,class:"px-4 py-2 bg-blue-600 text-white rounded text-xs",onClick:X},S(E.value),1))])])])):K("",!0)}},qt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},zt={class:"bg-white p-4 rounded-xl shadow-xl w-[980px] max-h-screen overflow-auto"},Mt={class:"flex items-center justify-between mb-3"},Wt={class:"text-lg font-semibold"},jt={class:"text-gray-600"},Gt={class:"flex items-center justify-between gap-2"},Ht={class:"text-sm text-gray-600"},Kt={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24"},Jt=["d"],Qt=["disabled"],Xt={class:"mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"},Zt={class:"aspect-video bg-white border rounded overflow-hidden flex items-center justify-center"},es=["src"],ts={key:1,class:"flex items-center justify-center w-full h-full"},ss=["d"],os={class:"mt-2 text-xs"},as=["title"],ns={class:"text-gray-500 flex items-center justify-between"},ls={key:0},is={key:0},rs={class:"mt-2 flex items-center justify-between gap-2"},ds=["onClick","title"],us={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24"},cs=["d"],ms=["onClick"],fs={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24"},ps=["d"],_s={key:0,class:"mt-6 text-center text-sm text-gray-500"},bs=10*1024*1024,ys={__name:"LiquidationAttachmentsModal",props:{modelValue:{type:Boolean,default:!1},row:{type:Object,default:null}},emits:["update:modelValue"],setup(s,{emit:o}){const y=s,d=o,f=O({get:()=>y.modelValue,set:t=>d("update:modelValue",t)}),x=le(),l=H(null),F=H(!1),m=new Set(["image/png","image/jpeg","image/webp","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]),C=new Set(["png","jpg","jpeg","webp","pdf","docx","xlsx"]),I=(t="")=>String(t).toLowerCase().match(/\.([a-z0-9]+)$/i)?.[1]||"",b=(t="")=>typeof t=="string"&&t.match(/^data:([^;]+);base64,/i)?.[1]||"",w=t=>{const p=t?.type&&m.has(t.type),_=t?.name&&C.has(I(t.name));return p||_},E=(t="")=>String(t).startsWith("image/"),L=(t="")=>t==="application/pdf",g=(t="")=>t==="application/vnd.openxmlformats-officedocument.wordprocessingml.document",$=(t="")=>t==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",P=(t="")=>L(t)?Ce:g(t)?Ae:$(t)?Fe:E(t)?$e:Te,Y=(t="")=>L(t)?"PDF":g(t)?"Word":$(t)?"Excel":E(t)?"Image":"File",T=(t="")=>L(t)?"pdf":g(t)?"docx":$(t)?"xlsx":t==="image/png"?"png":t==="image/jpeg"?"jpg":t==="image/webp"?"webp":"",N=(t="attachment",p="")=>/\.[a-z0-9]+$/i.test(t)?t:p?`${t}.${p.startsWith(".")?p.slice(1):p}`:t,q=t=>t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:`${(t/(1024*1024)).toFixed(1)} MB`,G=O(()=>{const t=l.value?.attachments;if(!t)return[];try{return Array.isArray(t)?t:JSON.parse(t||"[]")}catch{return[]}}),X=O(()=>(G.value||[]).map((t,p)=>{const _=t.mime||b(t.data)||(t.name?I(t.name)==="pdf"&&"application/pdf":"")||"",M=I(t.name||"")||T(_),Z=t.size??null,ee=t.name||`${Y(_)} ${p+1}`;return{id:t.id??p+1,name:ee,data:t.data||"",url:t.url||t.href||t.path||"",mime:_,ext:M,size:Z,filename:N(ee,M)}}));fe(()=>y.modelValue,async t=>{t&&y.row?.id&&(await x.fetchById(y.row.id),l.value=x.selected||y.row)});const c=async t=>{const p=t.target.files?.[0];if(t.target.value="",!(!p||!l.value?.id)){if(p.size>bs){await k.fire("File too large","Maximum size is 10 MB.","warning");return}if(!w(p)){await k.fire("Unsupported file","Only images (PNG/JPEG/WEBP), PDF, DOCX, and XLSX are allowed.","warning");return}try{F.value=!0,await x.uploadAttachment(l.value.id,p),await x.fetchById(l.value.id),l.value=x.selected}finally{F.value=!1}}},a=async t=>{!l.value?.id||!(await k.fire({title:"Remove attachment?",icon:"warning",showCancelButton:!0,confirmButtonText:"Remove",confirmButtonColor:"#d33"})).isConfirmed||(await x.deleteAttachment(l.value.id,t),await x.fetchById(l.value.id),l.value=x.selected)},i=t=>{if(t.data&&String(t.data).startsWith("data:")&&E(t.mime)){const p=window.open();p&&p.document.write(`<img src="${t.data}" style="display:block;max-width:100%;height:auto;margin:0 auto;object-fit:contain"/>`);return}t.url&&window.open(String(t.url),"_blank")},V=t=>{const[p,_]=t.split(","),M=p.match(/data:([^;]+);base64/i)?.[1]||"application/octet-stream",Z=atob(_),ee=new Uint8Array(Z.length);for(let oe=0;oe<Z.length;oe++)ee[oe]=Z.charCodeAt(oe);return new Blob([ee],{type:M})},A=(t,p)=>{const _=URL.createObjectURL(t),M=document.createElement("a");M.href=_,M.download=p||"download",document.body.appendChild(M),M.click(),M.remove(),setTimeout(()=>URL.revokeObjectURL(_),1e3)},ne=async t=>{if(t.data&&String(t.data).startsWith("data:")){const p=V(t.data);A(p,t.filename);return}if(t.url)try{const _=await(await fetch(t.url,{credentials:"include"})).blob();A(_,t.filename)}catch{const p=document.createElement("a");p.href=String(t.url),p.setAttribute("download",t.filename),document.body.appendChild(p),p.click(),p.remove()}},u=t=>E(t.mime)?"Open":"Download",n=t=>E(t.mime)?ke:Ue,r=t=>E(t.mime)?i(t):ne(t);return(t,p)=>f.value?(v(),h("div",qt,[e("div",zt,[e("div",Mt,[e("h2",Wt,[p[1]||(p[1]=j(" Liquidation Attachments — ",-1)),e("span",jt,S(l.value?.reference_code||""),1)]),e("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:p[0]||(p[0]=_=>f.value=!1)},"Close")]),e("div",Gt,[e("div",Ht,[p[2]||(p[2]=j(" Activity: ",-1)),e("strong",null,S(l.value?.activity_design?.name_of_activity||"—"),1)]),e("label",{class:z(["inline-flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white rounded text-xs cursor-pointer disabled:opacity-60",{"opacity-60 pointer-events-none":F.value}])},[(v(),h("svg",Kt,[e("path",{d:B(Se)},null,8,Jt)])),e("span",null,S(F.value?"Uploading…":"Upload"),1),e("input",{type:"file",class:"hidden",disabled:F.value,onChange:c,accept:".png,.jpg,.jpeg,.webp,.pdf,.docx,.xlsx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,image/png,image/jpeg,image/webp"},null,40,Qt)],2)]),e("div",Xt,[(v(!0),h(se,null,ae(X.value,_=>(v(),h("div",{key:_.id,class:"border rounded-lg p-2 bg-gray-50 flex flex-col"},[e("div",Zt,[_.data&&_.data.startsWith("data:")&&_.mime?.startsWith("image/")?(v(),h("img",{key:0,src:_.data,class:"object-contain w-full h-full",alt:"Attachment preview"},null,8,es)):(v(),h("div",ts,[(v(),h("svg",{style:{width:"64px",height:"64px"},viewBox:"0 0 24 24",class:z({"text-red-600":_.mime==="application/pdf","text-blue-600":_.mime==="application/vnd.openxmlformats-officedocument.wordprocessingml.document","text-emerald-600":_.mime==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text-gray-500":!_.mime||!_.mime.startsWith("image/")&&_.mime!=="application/pdf"})},[e("path",{d:P(_.mime)},null,8,ss)],2))]))]),e("div",os,[e("div",{class:"font-medium truncate",title:_.name},S(_.name),9,as),e("div",ns,[e("span",null,[j(S(Y(_.mime))+" ",1),_.ext?(v(),h("span",ls,"("+S(_.ext.toUpperCase())+")",1)):K("",!0)]),_.size?(v(),h("span",is,S(q(_.size)),1)):K("",!0)])]),e("div",rs,[e("button",{class:"inline-flex items-center gap-1 px-2 py-1 bg-white border rounded text-xs hover:bg-gray-50",onClick:M=>r(_),title:u(_)},[(v(),h("svg",us,[e("path",{d:n(_)},null,8,cs)])),j(" "+S(u(_)),1)],8,ds),e("button",{class:"inline-flex items-center gap-1 px-2 py-1 bg-red-600 text-white rounded text-xs",onClick:M=>a(_.id),title:"Remove"},[(v(),h("svg",fs,[e("path",{d:B(Ee)},null,8,ps)])),p[3]||(p[3]=j(" Remove ",-1))],8,ms)])]))),128))]),X.value.length?K("",!0):(v(),h("div",_s," No attachments yet. "))])])):K("",!0)}},gs="KOLEHIYO NG PANTUKAN",vs="Juan A. Sarenas Campus, Kingking, Pantukan, Davao de Oro",hs="https://osas.knp.edu.ph/verify-liquidation?id=",te=s=>s?_e(s).format("MMMM DD, YYYY"):"—",Q=(s,o=2)=>s==null||s===""||Number.isNaN(Number(s))?"—":Number(s).toLocaleString(void 0,{minimumFractionDigits:o,maximumFractionDigits:o}),de=(s,o)=>{if(Array.isArray(s)||s&&typeof s=="object")return s;try{return JSON.parse(s||"null")??o}catch{return o}},be="./",xs=`${be}images/logo.png`,ws=`${be}images/bg.jpg`;async function ue(s){try{const y=await(await fetch(s)).blob();return new Promise(d=>{const f=new FileReader;f.onloadend=()=>d(f.result),f.readAsDataURL(y)})}catch{return null}}function Ss(s){switch(s){case"APPROVED":return[32,141,85];case"PENDING":return[240,158,47];case"REJECTED":return[220,53,69];case"CANCELLED":return[107,114,128];case"COMPLETED":return[37,99,235];default:return[90,90,90]}}async function Cs(s){const o=s.internal.pageSize.getWidth(),y=110,d=36,f=await ue(ws);f?(s.addImage(f,"JPEG",0,0,o,y,void 0,"FAST"),s.setGState(new s.GState({opacity:.18})),s.setFillColor(0,0,0),s.rect(0,0,o,y,"F"),s.setGState(new s.GState({opacity:1}))):(s.setFillColor(21,62,121),s.rect(0,0,o,y,"F"));const x=await ue(xs);return x&&s.addImage(x,"PNG",d,20,70,70,void 0,"FAST"),s.setTextColor(255,255,255),s.setFont("helvetica","bold"),s.setFontSize(20),s.text(gs,d+86,38),s.setFont("helvetica","normal"),s.setFontSize(10),s.text(vs,d+86,58),s.setTextColor(20),s.setFont("helvetica","bold"),s.setFontSize(14),s.text("LIQUIDATION FUND",o/2,y+24,{align:"center"}),y+34}async function As(s,o,y){const d=s.internal.pageSize.getWidth(),f=36,x=o?.id??o?.reference_code??"",l=`${hs}${encodeURIComponent(String(x))}`,F=await xe.toDataURL(l,{margin:0,width:75,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#FFFFFF"}}),m=String(o.status||"").toUpperCase(),[C,I,b]=Ss(m),w=o.approved_at?te(o.approved_at):o.date_filed?te(o.date_filed):"—",E=`osas.knp.edu.ph/verify-liquidation?id=${String(x)}`;return D(s,{startY:y,theme:"plain",styles:{cellPadding:0,fontSize:9},bodyStyles:{minCellHeight:120},margin:{left:f,right:f},tableWidth:d-f*2,body:[[{content:""},{content:""}]],columnStyles:{0:{cellWidth:d-f*2-260},1:{cellWidth:260}},didDrawCell:L=>{if(L.section!=="body")return;const{x:g,y:$,width:P,height:Y}=L.cell,T=10;if(L.column.index===0){s.setFillColor(255,255,255),s.roundedRect(g,$,P-1,Y,6,6,"F");const N=24,q=Math.min(180,P-22);s.setFillColor(C,I,b),s.roundedRect(g+T,$+T,q,N,12,12,"F"),s.setTextColor(255,255,255),s.setFont("helvetica","bold"),s.setFontSize(10),s.text(m||"STATUS",g+T+10,$+T+16),s.setTextColor(20),s.setFont("helvetica","normal"),s.setFontSize(9);let G=$+T+N+16;s.text(`Ref No.: ${o.reference_code||"—"}`,g+T,G),G+=16,s.text(`Date Filed: ${te(o.date_filed)}`,g+T,G),G+=16,s.text(`Date Issued: ${w}`,g+T,G),s.setDrawColor(230),s.roundedRect(g,$,P-1,Y,6,6,"S")}if(L.column.index===1){s.setFillColor(255,255,255),s.roundedRect(g,$,P-1,Y,6,6,"F"),s.setFillColor(66,103,178),s.roundedRect(g,$,P-1,22,6,6,"F"),s.setTextColor(255,255,255),s.setFont("helvetica","bold"),s.setFontSize(10),s.text("VERIFY",g+T,$+15);const N=g+T,q=$+28;s.addImage(F,"PNG",N,q,75,75,void 0,"FAST"),s.setTextColor(20),s.setFont("helvetica","bold"),s.setFontSize(10),s.text("Scan to verify",N+100,q+14),s.setFont("helvetica","normal"),s.setFontSize(9),s.text("This document can be verified",N+100,q+32),s.text("online via the OSAS portal.",N+100,q+46),s.setTextColor(110),s.setFontSize(8),s.text(E,N+100,q+72),s.setDrawColor(230),s.roundedRect(g,$,P-1,Y,6,6,"S")}}}),s.lastAutoTable.finalY}async function Fs(s){const o=new he({unit:"pt",format:[612,936],orientation:"landscape"}),y=o.internal.pageSize.getWidth(),d=36,f=de(s.sources_of_fund,{}),x=de(s.uses_of_fund,[]);let l=await Cs(o);l=await As(o,s,l)+10,D(o,{startY:l,theme:"plain",styles:{fontSize:10},body:[[{content:"LINKED ACTIVITY",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",halign:"left",valign:"middle",cellPadding:6}}]],margin:{left:d,right:d}}),l=o.lastAutoTable.finalY;const F=s.activity_design||{};D(o,{startY:l,theme:"grid",styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},body:[[{content:"NAME OF ACTIVITY",styles:{fillColor:[243,248,255],fontStyle:"bold"}},F.name_of_activity||"—"],[{content:"DATE OF IMPLEMENTATION",styles:{fillColor:[243,248,255],fontStyle:"bold"}},te(F.date_of_implementation)],[{content:"SEMESTER",styles:{fillColor:[243,248,255],fontStyle:"bold"}},F.semester||"—"],[{content:"SCHOOL YEAR",styles:{fillColor:[243,248,255],fontStyle:"bold"}},F.school_year||"—"],[{content:"OFFICE/DEPARTMENT",styles:{fillColor:[243,248,255],fontStyle:"bold"}},F.office_department||F?.club?.name||"—"]],columnStyles:{0:{cellWidth:200,fontStyle:"bold"},1:{cellWidth:"auto"}},margin:{left:d,right:d}}),l=o.lastAutoTable.finalY+10,D(o,{startY:l,theme:"plain",styles:{fontSize:10},body:[[{content:"SUMMARY",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:d,right:d}}),l=o.lastAutoTable.finalY,D(o,{startY:l,theme:"grid",styles:{fontSize:9,cellPadding:8},body:[["Total Sources",Q(s.total_sources_amount,2)],["Total Uses",Q(s.total_uses_amount,2)],["Total Cash on Hand",Q(s.total_cash_on_hand,2)]],columnStyles:{0:{cellWidth:220,fontStyle:"bold"},1:{cellWidth:"auto"}},margin:{left:d,right:d}}),l=o.lastAutoTable.finalY+10,D(o,{startY:l,theme:"plain",styles:{fontSize:10},body:[[{content:"SOURCES OF FUND",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:d,right:d}}),l=o.lastAutoTable.finalY;const m=[["Contribution",f.contribution],["Payment from Fines",f.payment_from_fines],["Solicitations",f.solicitations],["Donations",f.donations],["Other Sources",f.other_sources],["Current Available Funds",f.current_available_funds]];D(o,{startY:l,theme:"grid",styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},head:[["PARTICULAR","AMOUNT"]],body:m.map(([w,E])=>[w,Q(E,2)]),columnStyles:{0:{cellWidth:320},1:{cellWidth:"auto",halign:"right"}},margin:{left:d,right:d}}),l=o.lastAutoTable.finalY,f?.other_sources_note&&(D(o,{startY:l,theme:"plain",styles:{fontSize:9},body:[[{content:`Note: ${String(f.other_sources_note)}`,styles:{cellPadding:6,textColor:[71,85,105]}}]],margin:{left:d,right:d}}),l=o.lastAutoTable.finalY),l+=10,D(o,{startY:l,theme:"plain",styles:{fontSize:10},body:[[{content:"USE OF FUND",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:d,right:d}}),l=o.lastAutoTable.finalY,Array.isArray(x)&&x.length?D(o,{startY:l,theme:"grid",styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},head:[["DATE","QTY","UNIT","PARTICULARS","SHEET NO.","AMOUNT","IN-CHARGE"]],body:x.map(w=>[w?.date?te(w.date):"—",Q(w?.qty??"",0),w?.unit||"—",w?.particulars||"—",w?.sheet_no||"—",Q(w?.amount??"",2),w?.in_charge||"—"]),columnStyles:{0:{cellWidth:82},1:{cellWidth:44,halign:"right"},2:{cellWidth:56},3:{cellWidth:200},4:{cellWidth:76},5:{cellWidth:78,halign:"right"},6:{cellWidth:"auto"}},margin:{left:d,right:d},foot:[["","","","","TOTAL",Q(s.total_uses_amount,2),""]],footStyles:{fontStyle:"bold"}}):D(o,{startY:l,theme:"grid",styles:{fontSize:9,cellPadding:8},body:[["—"]],margin:{left:d,right:d}}),l=o.lastAutoTable.finalY+10,D(o,{startY:l,theme:"plain",styles:{fontSize:10},body:[[{content:"REMARKS",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:d,right:d}}),l=o.lastAutoTable.finalY,D(o,{startY:l,theme:"grid",styles:{fontSize:9,cellPadding:8},body:[[s.remarks&&String(s.remarks).trim()?s.remarks:"—"]],margin:{left:d,right:d}}),l=o.lastAutoTable.finalY+10,D(o,{startY:l,theme:"plain",styles:{fontSize:10},body:[[{content:"SIGNATORIES",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:d,right:d}}),l=o.lastAutoTable.finalY;const C=s?.filed_by?`${s.filed_by.first_name||""} ${s.filed_by.last_name||""}`.trim():"",I=s?.approver?`${s.approver.first_name||""} ${s.approver.last_name||""}`.trim():"";D(o,{startY:l,theme:"grid",styles:{fontSize:9,cellPadding:10},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},head:[["PREPARED BY:","APPROVED BY:"]],body:[[C||" ",I||" "]],columnStyles:{0:{cellWidth:(y-d*2)/2},1:{cellWidth:"auto"}},didParseCell:w=>{w.section==="body"&&(w.cell.styles.halign="center",w.cell.styles.fontStyle="bold",w.cell.styles.cellPadding={top:16,right:10,bottom:18,left:10})},margin:{left:d,right:d}});const b=o.internal.pageSize.getHeight()-20;o.setFontSize(8),o.setTextColor(120),o.text(`Generated on ${_e().format("YYYY-MM-DD HH:mm")} • ${window.location.origin}`,d,b),o.save(`${s.reference_code||"Liquidation_Fund"}.pdf`)}const $s={class:"flex items-center gap-2"},Ts={class:"p-3 mb-4 rounded-xl border bg-white/60"},ks={class:"flex items-center gap-2 mb-2 text-gray-700"},Us={class:"w-4 h-4",viewBox:"0 0 24 24"},Es=["d"],Rs={class:"grid grid-cols-1 md:grid-cols-6 gap-2 text-sm"},Ls={class:"md:col-span-2 flex"},Vs={class:"w-5 h-5",viewBox:"0 0 24 24"},Ds=["d"],Bs=["value"],Ps={class:"md:col-span-2"},Ns={class:"flex items-center gap-2 md:col-span-1"},Ks={__name:"LiquidationFundsPage",setup(s){const o=le(),y=ce(),d={range:!0,partialRange:!0,multiCalendars:2,modelType:"yyyy-MM-dd",enableTimePicker:!1,autoApply:!0,clearable:!0},f=H({page:1,limit:10,sort:"created_at",order:"DESC",q:"",status:"",activity_design_id:"",filed_by_user_id:"",date_filed_from:"",date_filed_to:""}),x=O({get:()=>{const{date_filed_from:u,date_filed_to:n}=f.value;return u||n?[u||null,n||null]:null},set:u=>{if(!u)f.value.date_filed_from=null,f.value.date_filed_to=null;else{const[n,r]=u;f.value.date_filed_from=n||null,f.value.date_filed_to=r||null}}}),l=async(u={},n=!0)=>{f.value={...f.value,...u};const r={...f.value};["q","status","activity_design_id","filed_by_user_id","date_filed_from","date_filed_to"].forEach(t=>{(r[t]===""||r[t]==null)&&delete r[t]}),await o.fetchAll(r,n)};me(async()=>{await l({page:1,limit:10})});const F=O(()=>({total:o.items.total||0,totalPages:o.items.totalPages||1,currentPage:o.items.currentPage||1,pageSize:o.items.pageSize||10,data:o.items.data||[]})),m=["draft","pending","approved","rejected","cancelled","completed"],C=u=>{switch(String(u||"").toLowerCase()){case"draft":return"gray";case"pending":return"amber";case"approved":return"emerald";case"rejected":return"red";case"cancelled":return"zinc";case"completed":return"blue";default:return"gray"}},I=u=>{const n=Number(u);return Number.isFinite(n)?n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"—"},b=[{key:"reference_code",label:"Ref Code",sortable:!0,width:140},{key:"activity_design",label:"Activity",sortable:!1,minWidth:240,formatter:(u,n)=>n.activity_design?n.activity_design.name_of_activity:""},{key:"total_sources_amount",label:"Sources",sortable:!0,width:120},{key:"total_uses_amount",label:"Uses",sortable:!0,width:120},{key:"total_cash_on_hand",label:"Cash on Hand",sortable:!0,width:140},{key:"date_filed",label:"Date Filed",sortable:!0,width:120},{key:"status",label:"Status",sortable:!0,width:120}],w=async u=>{await l(u)},E=H(!1),L=H(!1),g=H(null),$=()=>{E.value=!0},P=async u=>{await o.create(u),E.value=!1,await l({},!0)},Y=async u=>{await o.fetchById(u.id);const n=o.selected||u;let r={},t=[];try{r=typeof n.sources_of_fund=="string"?JSON.parse(n.sources_of_fund||"{}"):n.sources_of_fund||{}}catch{}try{t=Array.isArray(n.uses_of_fund)?n.uses_of_fund:JSON.parse(n.uses_of_fund||"[]")}catch{}g.value={id:n.id,reference_code:n.reference_code,date_filed:n.date_filed||"",activity_design_id:n.activity_design_id||"",sources_of_fund:r,uses_of_fund:t,remarks:n.remarks||"",status:n.status||"draft"},L.value=!0},T=async u=>{const{id:n,...r}=u;await o.updateById(n,r),L.value=!1,await l({},!0)},N=async u=>{if(!u?.id)return;(await k.fire({title:`Delete liquidation "${u.reference_code}"?`,text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed&&(await o.deleteById(u.id),await l({},!0),await k.fire("Deleted","The liquidation fund has been deleted.","success"))},q=async u=>{await Y(u)},G=async u=>{if((await k.fire({title:"Submit for approval?",text:"You can no longer edit after submission.",icon:"question",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed)try{await o.submit(u.id),await l({},!0),await k.fire("Submitted","Liquidation is now pending approval.","success")}catch{await k.fire("Error",o.error||"Failed to submit.","error")}},X=async u=>{const n=await k.fire({title:"Approve liquidation?",input:"textarea",inputLabel:"Remarks (optional)",inputPlaceholder:"Add a note…",showCancelButton:!0,confirmButtonText:"Approve",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1});if(n.isConfirmed)try{await o.approve(u.id,n.value||""),await l({},!0),await k.fire("Approved","Liquidation has been approved.","success")}catch{await k.fire("Error",o.error||"Failed to approve.","error")}},c=async u=>{const n=await k.fire({title:"Reject liquidation?",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"State the reason…",inputValidator:r=>r?.trim()?void 0:"Reason is required",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Reject",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1});if(n.isConfirmed)try{await o.reject(u.id,n.value),await l({},!0),await k.fire("Rejected","Liquidation has been rejected.","success")}catch{await k.fire("Error",o.error||"Failed to reject.","error")}},a=async u=>{const n=await k.fire({title:"Cancel liquidation?",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"State the reason…",inputValidator:r=>r?.trim()?void 0:"Reason is required",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Cancel Liquidation",cancelButtonText:"Keep",allowOutsideClick:!1,allowEscapeKey:!1});if(n.isConfirmed)try{await o.cancel(u.id,n.value),await l({},!0),await k.fire("Cancelled","Liquidation has been cancelled.","success")}catch{await k.fire("Error",o.error||"Failed to cancel.","error")}},i=async u=>{if(String(u?.status||"").toLowerCase()!=="approved"){await k.fire("Not allowed","Only approved liquidation can be printed.","info");return}try{await o.fetchById(u.id);const r=o.selected||u;await Fs(r)}catch(r){await k.fire("Error",o.error||"Failed to generate PDF.","error"),console.error(r)}},V=H(!1),A=H(null),ne=async u=>{await o.fetchById(u.id),A.value=o.selected||u,V.value=!0};return(u,n)=>(v(),h(se,null,[W(Re,null,{default:J(()=>[W(Le,null,{default:J(()=>[B(o).error?(v(),ye(Ie,{key:0,icon:B(Ve),color:"danger"},{default:J(()=>[j(S(B(o).error),1)]),_:1},8,["icon"])):K("",!0),W(Ye,{icon:B(De),title:"Liquidation Funds",main:""},{default:J(()=>[e("div",$s,[W(ie,{icon:B(Be),color:"primary",label:"New Liquidation",onClick:$},null,8,["icon"]),W(ie,{icon:B(Pe),color:"info",label:"Refresh",onClick:n[0]||(n[0]=r=>l({},!0))},null,8,["icon"])])]),_:1},8,["icon"]),e("div",Ts,[e("div",ks,[(v(),h("svg",Us,[e("path",{d:B(Ne)},null,8,Es)])),n[11]||(n[11]=e("span",{class:"font-medium text-sm"},"Filters",-1))]),e("div",Rs,[e("div",Ls,[U(e("input",{"onUpdate:modelValue":n[1]||(n[1]=r=>f.value.q=r),placeholder:"Search by ref, remarks…",class:"border rounded-s px-2 py-2 flex-1",onKeyup:n[2]||(n[2]=ge(r=>l({page:1}),["enter"]))},null,544),[[R,f.value.q]]),e("button",{class:"px-3 border border-l-0 rounded-e bg-gray-50",title:"Search",onClick:n[3]||(n[3]=r=>l({page:1}))},[(v(),h("svg",Vs,[e("path",{d:B(Oe)},null,8,Ds)]))])]),U(e("select",{"onUpdate:modelValue":n[4]||(n[4]=r=>f.value.status=r),class:"border rounded px-2 py-2"},[n[12]||(n[12]=e("option",{value:""},"All status",-1)),(v(),h(se,null,ae(m,r=>e("option",{key:r,value:r},S(r),9,Bs)),64))],512),[[pe,f.value.status]]),e("div",Ps,[W(B(we),ve({modelValue:x.value,"onUpdate:modelValue":n[5]||(n[5]=r=>x.value=r)},d,{placeholder:"Date filed range"}),null,16,["modelValue"])]),e("div",Ns,[e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded text-xs",onClick:n[6]||(n[6]=r=>l({page:1}))}," Apply Filters "),e("button",{class:"px-4 py-2 bg-gray-200 rounded text-xs",onClick:n[7]||(n[7]=()=>{f.value.value={page:1,limit:10,sort:"created_at",order:"DESC",q:"",status:"",date_filed_from:"",date_filed_to:""},l({page:1},!0)})},"Reset")])])]),W(qe,{columns:b,data:F.value,loading:B(o).isLoading,onQueryChange:w},{"cell-total_sources_amount":J(({value:r})=>[e("span",null,S(I(r)),1)]),"cell-total_uses_amount":J(({value:r})=>[e("span",null,S(I(r)),1)]),"cell-total_cash_on_hand":J(({value:r})=>[e("span",{class:z(["font-medium",Number(r)<0?"text-red-600":"text-emerald-700"])},S(I(r)),3)]),"cell-status":J(({value:r})=>[W(ze,{text:r||"—",tone:C(r)},null,8,["text","tone"])]),"cell-actions":J(({row:r})=>[W(Me,{row:r,moderator:["admin","manager"].includes(String(B(y).user?.role||"").toLowerCase()),onAttachments:ne,onSubmit:G,onApprove:X,onReject:c,onEdit:Y,onDelete:N,onView:t=>q(r),onCancel:a,onPrint:i},null,8,["row","moderator","onView"])]),_:1},8,["data","loading"])]),_:1})]),_:1}),W(re,{modelValue:E.value,"onUpdate:modelValue":n[8]||(n[8]=r=>E.value=r),mode:"create",onSubmit:P},null,8,["modelValue"]),W(re,{modelValue:L.value,"onUpdate:modelValue":n[9]||(n[9]=r=>L.value=r),mode:"edit",initial:g.value||{},onSubmit:T},null,8,["modelValue","initial"]),W(ys,{modelValue:V.value,"onUpdate:modelValue":n[10]||(n[10]=r=>V.value=r),row:A.value},null,8,["modelValue","row"])],64))}};export{Ks as default};
