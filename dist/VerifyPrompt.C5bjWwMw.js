import{c as o,a as l,b as v,d as t,e as m,t as d,h as c,i as b,r as p,u as g,o as a}from"./index.kywONoMW.js";import{T as x}from"./ToasterComponent.XRVHT5gm.js";import{_ as h}from"./logo.Dx3Q79ni.js";import{_ as w}from"./_plugin-vue_export-helper.DlAUqK2U.js";const y={name:"VerifyPrompt",components:{ToasterComponent:x},data(){return{cooldown:0,cooldownTimer:null}},computed:{auth(){return g()},displayEmail(){return this.$route.query.email||this.auth.user?.email||""}},methods:{async onResend(){if(!this.displayEmail){this.$refs.toast.showToast("warning","No email found. Please go back and enter your email.");return}try{await this.auth.resendVerification(this.displayEmail),this.$refs.toast.showToast("success","Verification email sent. Please check your inbox."),this.startCooldown(30)}catch(i){this.$refs.toast.showToast("warning",i.message||"Failed to resend verification email.")}},openInbox(){window.open("https://mail.google.com/","_blank","noopener")},startCooldown(i){this.cooldown=i,this.cooldownTimer&&clearInterval(this.cooldownTimer),this.cooldownTimer=setInterval(()=>{this.cooldown>0&&(this.cooldown-=1),this.cooldown===0&&clearInterval(this.cooldownTimer)},1e3)}},unmounted(){this.cooldownTimer&&clearInterval(this.cooldownTimer)}},_={class:"min-h-screen relative overflow-hidden"},k={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},T={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},S={class:"w-full max-w-md"},C={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 hover:ring-black/10 transition"},V={class:"p-6 sm:p-7"},E={class:"mb-5 text-center"},I={class:"mt-1 text-sm font-semibold text-gray-800"},j={class:"space-y-3"},N=["disabled"],A={class:"inline-flex items-center justify-center gap-2"},R={key:0},O={key:1},P={class:"mt-4 text-xs text-gray-600 space-y-1 text-center"},B={class:"px-6 sm:px-7 pb-6"},D={class:"flex items-center justify-between text-[11px] text-gray-500"};function L(i,e,z,F,n,s){const u=p("router-link"),f=p("ToasterComponent");return a(),o("div",_,[e[13]||(e[13]=l('<div class="absolute inset-0" data-v-77f96e71><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-77f96e71></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-77f96e71></div><div class="absolute inset-0 backdrop-blur-sm" data-v-77f96e71></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-77f96e71></div></div>',1)),s.auth.isLoading?(a(),o("div",k,e[2]||(e[2]=[t("div",{class:"loader"},null,-1)]))):v("",!0),t("div",T,[t("div",S,[e[11]||(e[11]=l('<div class="mb-6 text-center" data-v-77f96e71><a href="index.html" class="inline-flex items-center justify-center" data-v-77f96e71><img src="'+h+'" alt="OSAS" class="h-14 w-auto" data-v-77f96e71></a><h1 class="mt-4 text-2xl font-extrabold tracking-wide text-white" data-v-77f96e71> Office of Student Affairs &amp; Services </h1><p class="mt-1 text-primary-text/90 text-sm" data-v-77f96e71>Serve. Support. Empower.</p></div>',1)),t("div",C,[t("div",V,[t("div",E,[e[3]||(e[3]=l('<div class="inline-flex items-center gap-2" data-v-77f96e71><span class="inline-grid h-8 w-8 place-items-center rounded-full bg-primary/10" data-v-77f96e71><i class="mdi mdi-email-check-outline text-primary text-xl" data-v-77f96e71></i></span><h2 class="text-lg font-bold text-gray-900" data-v-77f96e71>Verify your email</h2></div><p class="text-xs text-gray-500 mt-2" data-v-77f96e71>We sent a verification link to</p>',2)),t("p",I,d(s.displayEmail),1)]),t("div",j,[t("button",{class:"w-full py-2.5 px-4 rounded-xl bg-primary text-white font-semibold tracking-wide shadow-md hover:shadow-lg hover:bg-tertiary transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:!s.displayEmail||n.cooldown>0||s.auth.isLoading,onClick:e[0]||(e[0]=(...r)=>s.onResend&&s.onResend(...r))},[t("span",A,[e[4]||(e[4]=t("i",{class:"mdi mdi-email-fast-outline"},null,-1)),n.cooldown===0?(a(),o("span",R,"Resend verification email")):(a(),o("span",O,"Resend in "+d(n.cooldown)+"s",1))])],8,N),t("button",{type:"button",class:"w-full py-2.5 px-4 rounded-xl border border-gray-300/80 bg-white/70 text-gray-800 font-semibold hover:bg-white transition",onClick:e[1]||(e[1]=(...r)=>s.openInbox&&s.openInbox(...r))},e[5]||(e[5]=[t("span",{class:"inline-flex items-center justify-center gap-2"},[t("i",{class:"mdi mdi-open-in-new"}),t("span",null,"Open my inbox")],-1)]))]),t("div",P,[e[9]||(e[9]=t("p",null,"Didn’t get the email? Check your spam folder or try resending.",-1)),t("p",null,[e[7]||(e[7]=c(" Entered the wrong email? ",-1)),m(u,{class:"text-primary hover:underline font-semibold",to:{name:"login"}},{default:b(()=>e[6]||(e[6]=[c("Go back to Login",-1)])),_:1,__:[6]}),e[8]||(e[8]=c(" to try again. ",-1))])])]),t("div",B,[t("div",D,[e[10]||(e[10]=t("span",null,"OSAS Kiosk v1.0",-1)),t("span",null,"© "+d(new Date().getFullYear())+" Student Services",1)])])]),e[12]||(e[12]=t("div",{class:"mt-6 text-center text-xs text-gray-300"},[t("p",null,"After verifying, return to the app and log in.")],-1))])]),m(f,{ref:"toast"},null,512)])}const Y=w(y,[["render",L],["__scopeId","data-v-77f96e71"]]);export{Y as default};
