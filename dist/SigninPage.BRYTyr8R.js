import{T as w}from"./ToasterComponent.D9UL-MuU.js";import{c as i,a as p,b as n,d as t,e as x,t as u,w as v,f as c,v as g,g as _,n as f,h as b,i as k,r as P,u as y,o as a}from"./index.nbT22hqw.js";import{_ as S}from"./_plugin-vue_export-helper.DlAUqK2U.js";const C=""+new URL("images/logo.png",import.meta.url).href,A={data(){return{username:"",password:"",birthdate:"",isAuthenticated:!1,loading:!1,forgotPassword:!1,showPassword:!1,capsOn:!1,rememberMe:!1}},computed:{canSubmit(){return this.forgotPassword?this.username.trim().length>0&&this.birthdate!=="":this.username.trim().length>0&&this.password.length>0}},methods:{async login(){const l=y();let e=null;try{this.loading=!0,e=await l.login(this.username,{password:this.password,remember:this.rememberMe})}catch(d){console.error("Error:",d)}finally{this.loading=!1,e?(this.isAuthenticated=!0,this.$refs.toast.showToast("success","Login successfully!"),setTimeout(()=>{this.$router.push("/index/dashboard")},800)):this.$refs.toast.showToast("warning","Invalid login credentials!")}},toggleForgotPassword(){this.forgotPassword=!this.forgotPassword,this.username="",this.password="",this.birthdate="",this.showPassword=!1,this.capsOn=!1},async resetPassword(){const l=y(),[e,d,m]=this.birthdate.split("-"),s=`${d}/${m}/${e}`;try{this.loading=!0,await l.reset({studentno:this.username,birthday:s},{password:"123456"}),this.$refs.toast.showToast("info","If all fields are valid, the password is reset to default."),this.isAuthenticated=!0}catch(o){console.error(o),this.$refs.toast.showToast("warning","Reset failed. Check your details.")}finally{this.loading=!1,setTimeout(()=>{this.forgotPassword=!1,this.isAuthenticated=!1},900)}},detectCaps(l){l.getModifierState&&(this.capsOn=l.getModifierState("CapsLock"))}},components:{ToasterComponent:w}},T={class:"min-h-screen relative overflow-hidden"},M={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},V={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},N={class:"w-full max-w-md"},O={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 hover:ring-black/10 transition"},B={class:"p-6 sm:p-7"},F={class:"mb-5 text-center"},j={class:"inline-flex items-center gap-2"},I={class:"text-lg font-bold text-gray-900"},R={key:0,class:"text-xs text-gray-500 mt-2"},U={key:1,class:"text-xs text-gray-500 mt-2"},L={class:"relative"},D=["readonly"],q={key:0,class:"space-y-2"},z={class:"relative"},E=["type","readonly"],K={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},G={key:1,class:"space-y-2"},Y={key:2,class:"flex items-center justify-between"},H={class:"inline-flex items-center gap-2 text-sm text-gray-700"},J={class:"pt-1"},Q=["disabled"],W={class:"inline-flex items-center justify-center gap-2"},X={class:"text-center"},Z={class:"px-6 sm:px-7 pb-6"},$={class:"flex items-center justify-between text-[11px] text-gray-500"};function ee(l,e,d,m,s,o){const h=P("ToasterComponent");return a(),i("div",T,[e[22]||(e[22]=p('<div class="absolute inset-0" data-v-5c29d099><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-5c29d099></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-5c29d099></div><div class="absolute inset-0 backdrop-blur-sm" data-v-5c29d099></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-5c29d099></div></div>',1)),s.loading?(a(),i("div",M,e[9]||(e[9]=[t("div",{class:"loader"},null,-1)]))):n("",!0),t("div",V,[t("div",N,[e[20]||(e[20]=p('<div class="mb-6 text-center" data-v-5c29d099><a href="index.html" class="inline-flex items-center justify-center" data-v-5c29d099><img src="'+C+'" alt="OSAS" class="h-14 w-auto" data-v-5c29d099></a><h1 class="mt-4 text-2xl font-extrabold tracking-wide text-white" data-v-5c29d099> Office of Student Affairs &amp; Services </h1><p class="mt-1 text-primary-text/90 text-sm" data-v-5c29d099>Serve. Support. Empower.</p></div>',1)),t("div",O,[t("div",B,[t("div",F,[t("div",j,[e[10]||(e[10]=t("span",{class:"inline-grid h-8 w-8 place-items-center rounded-full bg-primary/10"},[t("i",{class:"mdi mdi-account-key text-primary text-xl"})],-1)),t("h2",I,u(s.forgotPassword?"Reset Password":"SignIn"),1)]),s.forgotPassword?(a(),i("p",U,"Verify your birthdate to reset")):(a(),i("p",R,"Use your Student Number and password"))]),t("form",{onSubmit:e[8]||(e[8]=v(r=>s.forgotPassword?o.resetPassword():o.login(),["prevent"])),class:"space-y-4",novalidate:""},[t("div",L,[e[11]||(e[11]=t("label",{class:"sr-only"},"Student Number",-1)),e[12]||(e[12]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-card-account-details-outline text-gray-400 text-xl"})],-1)),c(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",inputmode:"numeric",required:"",readonly:s.isAuthenticated,placeholder:"Student Number","onUpdate:modelValue":e[0]||(e[0]=r=>s.username=r),autocomplete:"off"},null,8,D),[[g,s.username,void 0,{trim:!0}]])]),s.forgotPassword?n("",!0):(a(),i("div",q,[t("div",z,[e[13]||(e[13]=t("label",{class:"sr-only"},"Password",-1)),e[14]||(e[14]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-lock-outline text-gray-400 text-xl"})],-1)),c(t("input",{type:s.showPassword?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",readonly:s.isAuthenticated,placeholder:"Password","onUpdate:modelValue":e[1]||(e[1]=r=>s.password=r),onKeyup:e[2]||(e[2]=r=>o.detectCaps(r)),autocomplete:"off"},null,40,E),[[_,s.password]]),t("button",{type:"button",onClick:e[3]||(e[3]=r=>s.showPassword=!s.showPassword),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[t("i",{class:f(s.showPassword?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),s.capsOn?(a(),i("div",K,e[15]||(e[15]=[t("i",{class:"mdi mdi-alert"},null,-1),t("span",null,"Caps Lock is ON",-1)]))):n("",!0)])),s.forgotPassword?(a(),i("div",G,[e[16]||(e[16]=t("label",{for:"birthdate",class:"block text-xs font-medium text-gray-700"},"Birthdate",-1)),c(t("input",{id:"birthdate",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 px-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition",type:"date",required:"","onUpdate:modelValue":e[4]||(e[4]=r=>s.birthdate=r)},null,512),[[g,s.birthdate]])])):n("",!0),s.forgotPassword?n("",!0):(a(),i("div",Y,[t("label",H,[c(t("input",{type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary/40","onUpdate:modelValue":e[5]||(e[5]=r=>s.rememberMe=r)},null,512),[[k,s.rememberMe]]),e[17]||(e[17]=b(" Remember me ",-1))]),t("button",{type:"button",class:"text-sm text-primary hover:underline",onClick:e[6]||(e[6]=(...r)=>o.toggleForgotPassword&&o.toggleForgotPassword(...r))},"Forgot password?")])),t("div",J,[t("button",{class:"w-full py-2.5 px-4 rounded-xl bg-primary text-white font-semibold tracking-wide shadow-md hover:shadow-lg hover:bg-tertiary transition disabled:opacity-60 disabled:cursor-not-allowed",type:"submit",disabled:s.isAuthenticated||!o.canSubmit},[t("span",W,[t("i",{class:f(["mdi",s.forgotPassword?"mdi-key-change":"mdi-login-variant"])},null,2),t("span",null,u(s.forgotPassword?"Reset Password":"Log In"),1)])],8,Q)]),t("div",X,[t("button",{type:"button",class:"text-sm text-primary-text hover:underline",onClick:e[7]||(e[7]=(...r)=>o.toggleForgotPassword&&o.toggleForgotPassword(...r))},[e[18]||(e[18]=t("i",{class:"mdi mdi-lock mr-1"},null,-1)),b(" "+u(s.forgotPassword?"Back to Sign In":"Reset Password"),1)])])],32)]),t("div",Z,[t("div",$,[e[19]||(e[19]=t("span",null,"OSAS Kiosk v1.0",-1)),t("span",null,"Â© "+u(new Date().getFullYear())+" Student Services",1)])])]),e[21]||(e[21]=t("div",{class:"mt-6 text-center text-xs text-gray-300"},[t("p",null,"By signing in, you agree to our Student Portal Guidelines.")],-1))])]),x(h,{ref:"toast"},null,512)])}const oe=S(A,[["render",ee],["__scopeId","data-v-5c29d099"]]);export{oe as default};
