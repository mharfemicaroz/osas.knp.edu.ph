import{A as se,B as ht,C as Zt,r as p,o as tt,D as at,E as ea,F as ta,G as ve,n as ct,c as z,R as aa,z as te,q as i,l as ie,d as w,a as u,j as Z,t as m,H as lt,g as j,I as st,e as t,J as Ye,f as J,h as U,K as la,L as sa,M as H,N as W,v as T,T as na,O as Q,P as nt,k as F,Q as le,b as vt,S as he}from"./index.DopRILyw.js";import{a as Ge,m as oa,b as ra,c as pt,d as ia,e as ua,f as da,g as wt,h as ca,_ as va,i as pa,j as ma,k as fa,l as ba,n as ya,o as ga}from"./LayoutAuthenticated.C_HOoZg_.js";import{_ as xa}from"./SectionMain.CVWYolRH.js";import{_ as ha}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./ToasterComponent.m1nnd3CH.js";var wa=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Ca=function(a){return wa.map(function(s){return s.toLowerCase()}).indexOf(a.toLowerCase())!==-1},ka=function(a,s,o){Object.keys(s).filter(Ca).forEach(function(c){var r=s[c];typeof r=="function"&&(c==="onInit"?r(a,o):o.on(c.substring(2),function(_){return r(_,o)}))})},_a=function(a,s,o,c){var r=a.modelEvents?a.modelEvents:null,_=Array.isArray(r)?r.join(" "):r;se(c,function(f,v){o&&typeof f=="string"&&f!==v&&f!==o.getContent({format:a.outputFormat})&&o.setContent(f)}),o.on(_||"change input undo redo",function(){s.emit("update:modelValue",o.getContent({format:a.outputFormat}))})},Sa=function(a,s,o,c,r,_){c.setContent(_()),o.attrs["onUpdate:modelValue"]&&_a(s,o,c,r),ka(a,o.attrs,c)},mt=0,Ct=function(a){var s=Date.now(),o=Math.floor(Math.random()*1e9);return mt++,a+"_"+o+mt+String(s)},Ba=function(a){return a!==null&&a.tagName.toLowerCase()==="textarea"},ft=function(a){return typeof a>"u"||a===""?[]:Array.isArray(a)?a:a.split(" ")},Da=function(a,s){return ft(a).concat(ft(s))},$a=function(a){return a==null},bt=function(a){var s;return typeof((s=a.options)===null||s===void 0?void 0:s.set)=="function"&&a.options.isRegistered("disabled")},yt=function(){return{listeners:[],scriptId:Ct("tiny-script"),scriptLoaded:!1}},Ua=function(){var a=yt(),s=function(r,_,f,v){var $=_.createElement("script");$.referrerPolicy="origin",$.type="application/javascript",$.id=r,$.src=f;var S=function(){$.removeEventListener("load",S),v()};$.addEventListener("load",S),_.head&&_.head.appendChild($)},o=function(r,_,f){a.scriptLoaded?f():(a.listeners.push(f),r.getElementById(a.scriptId)||s(a.scriptId,r,_,function(){a.listeners.forEach(function(v){return v()}),a.scriptLoaded=!0}))},c=function(){a=yt()};return{load:o,reinitialize:c}},Va=Ua(),Pa=function(){return typeof window<"u"?window:global},fe=function(){var a=Pa();return a&&a.tinymce?a.tinymce:null},Aa={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,readonly:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(a){return a==="html"||a==="text"}}},oe=function(){return oe=Object.assign||function(a){for(var s,o=1,c=arguments.length;o<c;o++){s=arguments[o];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},oe.apply(this,arguments)},Ia=function(a,s,o,c){return a(c||"div",{id:s,ref:o})},Ea=function(a,s,o){return a("textarea",{id:s,visibility:"hidden",ref:o})},Ze={selector:void 0,target:void 0},et=function(a,s){var o;typeof((o=a.mode)===null||o===void 0?void 0:o.set)=="function"?a.mode.set(s):a.setMode(s)},gt=ht({props:Aa,setup:function(a,s){var o=a.init?oe(oe({},a.init),Ze):oe({},Ze),c=Zt(a),r=c.disabled,_=c.readonly,f=c.modelValue,v=c.tagName,$=p(null),S=null,K=a.id||Ct("tiny-vue"),D=a.init&&a.init.inline||a.inline,g=!!s.attrs["onUpdate:modelValue"],b=!0,x=a.initialValue?a.initialValue:"",y="",B=function(V){return g?function(){return f?.value?f.value:""}:function(){return V?x:y}},h=function(){var V=B(b),R=oe(oe({},o),{disabled:a.disabled,readonly:a.readonly,target:$.value,plugins:Da(o.plugins,a.plugins),toolbar:a.toolbar||o.toolbar,inline:D,license_key:a.licenseKey,setup:function(ee){S=ee,!bt(S)&&a.disabled===!0&&et(S,"readonly"),ee.on("init",function(Ce){return Sa(Ce,a,s,ee,f,V)}),typeof o.setup=="function"&&o.setup(ee)}});Ba($.value)&&($.value.style.visibility=""),fe().init(R),b=!1};se(_,function(V){S!==null&&et(S,V?"readonly":"design")}),se(r,function(V){S!==null&&(bt(S)?S.options.set("disabled",V):et(S,V?"readonly":"design"))}),se(v,function(V){var R;S&&(g||(y=S.getContent()),(R=fe())===null||R===void 0||R.remove(S),ct(function(){return h()}))}),tt(function(){if(fe()!==null)h();else if($.value&&$.value.ownerDocument){var V=a.cloudChannel?a.cloudChannel:"8",R=a.apiKey?a.apiKey:"no-api-key",ee=$a(a.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(R,"/tinymce/").concat(V,"/tinymce.min.js"):a.tinymceScriptSrc;Va.load($.value.ownerDocument,ee,h)}}),at(function(){fe()!==null&&fe().remove(S)}),D||(ea(function(){b||h()}),ta(function(){var V;S&&(g||(y=S.getContent()),(V=fe())===null||V===void 0||V.remove(S))}));var P=function(V){var R;S&&(y=S.getContent(),(R=fe())===null||R===void 0||R.remove(S),o=oe(oe(oe({},o),V),Ze),ct(function(){return h()}))};return s.expose({rerender:P,getEditor:function(){return S}}),function(){return D?Ia(ve,K,$,a.tagName):Ea(ve,K,$)}}});const kt={white:"bg-white text-black",primary:"bg-[var(--primary-color)] text-white",secondary:"bg-[var(--secondary-color)] text-white",tertiary:"bg-[var(--tertiary-color)] text-white",accent:"bg-[var(--accent)] text-black"},Fe={white:"text-black dark:text-slate-100",primary:"text-[var(--primary-color)]",secondary:"text-[var(--secondary-color)]",tertiary:"text-[var(--tertiary-color)]",accent:"text-[var(--accent)]",contrast:"dark:text-white"},Ma={primary:[Fe.primary,"border-[var(--primary-color)]"],secondary:[Fe.secondary,"border-[var(--secondary-color)]"],tertiary:[Fe.tertiary,"border-[var(--tertiary-color)]"],accent:[Fe.accent,"border-[var(--accent)]"]},ja=(a,s,o,c=!1)=>{const r={ring:{primary:"ring-[var(--primary-color)]/40",secondary:"ring-[var(--secondary-color)]/40",tertiary:"ring-[var(--tertiary-color)]/40",accent:"ring-[var(--accent)]/40"},active:{primary:"bg-[var(--tertiary-color)] text-white",secondary:"bg-[var(--primary-color)] text-white",tertiary:"bg-[var(--secondary-color)] text-white",accent:"bg-[var(--accent)] text-black"},bg:{primary:"bg-[var(--primary-color)] text-white",secondary:"bg-[var(--secondary-color)] text-white",tertiary:"bg-[var(--tertiary-color)] text-white",accent:"bg-[var(--accent)] text-black"},bgHover:{primary:"hover:bg-[var(--tertiary-color)]",secondary:"hover:bg-[var(--primary-color)]",tertiary:"hover:bg-[var(--secondary-color)]",accent:"hover:bg-yellow-600"},borders:{primary:"border-[var(--primary-color)]",secondary:"border-[var(--secondary-color)]",tertiary:"border-[var(--tertiary-color)]",accent:"border-[var(--accent)]"},text:{primary:"text-[var(--primary-color)]",secondary:"text-[var(--secondary-color)]",tertiary:"text-[var(--tertiary-color)]",accent:"text-[var(--accent)]"},outlineHover:{primary:"hover:bg-[var(--primary-color)] hover:text-white",secondary:"hover:bg-[var(--secondary-color)] hover:text-white",tertiary:"hover:bg-[var(--tertiary-color)] hover:text-white",accent:"hover:bg-[var(--accent)] hover:text-black"}};if(!r.bg[a])return a;const _=s,f=[r.borders[a],r.ring[a]];return c?f.push(r.active[a]):f.push(_?r.text[a]:r.bg[a]),o&&f.push(_?r.outlineHover[a]:r.bgHover[a]),f},re={__name:"BaseButton",props:{label:{type:[String,Number],default:null},icon:{type:String,default:null},iconSize:{type:[String,Number],default:24},href:{type:String,default:null},target:{type:String,default:null},to:{type:[String,Object],default:null},type:{type:String,default:null},color:{type:String,default:"white"},as:{type:String,default:null},small:Boolean,outline:Boolean,active:Boolean,disabled:Boolean,roundedFull:Boolean},setup(a){const s=a,o=z(()=>s.as?s.as:s.to?aa:s.href?"a":"button"),c=z(()=>o.value==="button"?s.type??"button":null),r=z(()=>s.small&&s.icon?"px-1":"px-2"),_=z(()=>{const f=["inline-flex","justify-center","items-center","whitespace-nowrap","focus:outline-none","transition-colors","focus:ring","duration-150","border",s.disabled?"cursor-not-allowed":"cursor-pointer",s.roundedFull?"rounded-full":"rounded",ja(s.color,s.outline,!s.disabled,s.active)];return!s.label&&s.icon?f.push("p-1"):s.small?f.push("text-sm",s.roundedFull?"px-3 py-1":"p-1"):f.push("py-2",s.roundedFull?"px-6":"px-3"),s.disabled&&f.push(s.outline?"opacity-50":"opacity-70"),f});return(f,v)=>(i(),te(lt(o.value),{class:Z(_.value),href:a.href,type:c.value,to:a.to,target:a.target,disabled:a.disabled},{default:ie(()=>[a.icon?(i(),te(Ge,{key:0,path:a.icon,size:a.iconSize},null,8,["path","size"])):w("",!0),a.label?(i(),u("span",{key:1,class:Z(r.value)},m(a.label),3)):w("",!0)]),_:1},8,["class","href","type","to","target","disabled"]))}},Oa={__name:"IconRounded",props:{icon:{type:String,required:!0},color:{type:String,default:null},w:{type:String,default:"w-12"},h:{type:String,default:"h-12"},bg:Boolean},setup(a){return(s,o)=>(i(),te(Ge,{path:a.icon,w:a.w,h:a.h,size:"24",class:Z(["rounded-full",a.bg?j(kt)[a.color]:[j(Fe)[a.color],"bg-gray-50 dark:bg-slate-800"]])},null,8,["path","w","h","class"]))}},La={class:"flex items-center justify-start mb-4 sm:mb-0"},Fa={class:"flex-shrink-0"},Ta={__name:"SectionTitleLineWithButton",props:{icon:{type:String,default:null},title:{type:String,required:!0},main:Boolean},setup(a){return z(()=>st().default),(s,o)=>(i(),u("section",{class:Z([{"pt-6":!a.main},"mb-6 flex flex-col sm:flex-row items-center justify-between"])},[t("div",La,[a.icon&&a.main?(i(),te(Oa,{key:0,icon:a.icon,color:"light",class:"mr-3",bg:""},null,8,["icon"])):a.icon?(i(),te(Ge,{key:1,path:a.icon,class:"mr-2",size:"20"},null,8,["path"])):w("",!0),t("h1",{class:Z([a.main?"text-3xl":"text-2xl","leading-tight"])},m(a.title),3)]),t("div",Fa,[Ye(s.$slots,"default",{},()=>[J(re,{icon:j(oa),color:"whiteDark"},null,8,["icon"])])])],2))}},za={class:"checkbox"},xt={__name:"TableCheckboxCell",props:{type:{type:String,default:"td"},modelValue:Boolean},emits:["update:modelValue"],setup(a,{emit:s}){const o=a,c=s,r=p(o.modelValue);return se(r,_=>{c("update:modelValue",_)}),se(()=>o.modelValue,_=>{r.value=_}),(_,f)=>(i(),te(lt(a.type),{class:"lg:w-1"},{default:ie(()=>[t("label",za,[U(t("input",{"onUpdate:modelValue":f[0]||(f[0]=v=>r.value=v),type:"checkbox"},null,512),[[la,r.value]]),f[1]||(f[1]=t("span",{class:"check"},null,-1))])]),_:1}))}},Ra=Object.assign({name:"BaseButtons"},{__name:"BaseButtons",props:{noWrap:{type:Boolean,default:!1},type:{type:String,default:"justify-start"},classAddon:{type:String,default:"mr-3 last:mr-0 mb-3"},mb:{type:String,default:"-mb-3"}},setup(a){const s=a,o=st(),c=z(()=>{const r=!!o.default,_=["flex","items-center",s.type,s.noWrap?"flex-nowrap":"flex-wrap"];s.mb&&_.push(s.mb);const f=r?o.default().map(v=>v&&v.children&&typeof v.children=="object"?ve(v,{},v.children.map($=>ve($,{class:[s.classAddon]}))):ve(v,{class:[s.classAddon]})):null;return ve("div",{class:_},f)});return(r,_)=>(i(),te(lt(c.value)))}}),Na={class:"w-full border-collapse bg-white min-w-max"},Ka={class:"bg-white text-gray-700 text-sm border-b"},Ha={key:0,class:"p-2 w-10 text-center"},Qa={class:"flex items-center justify-between"},Wa={class:"font-medium"},Ya={class:"flex items-center gap-2"},Ga={key:0,class:"mt-1 p-2 border rounded bg-white shadow-md"},qa=["onUpdate:modelValue","onInput"],Ja={key:1,class:"px-2 py-1 whitespace-nowrap text-right w-1"},Xa={key:0,class:"p-2 w-10 text-center","data-label":"Select"},Za=["data-label"],el={key:0},tl={key:1},al={key:1,class:"px-4 py-2 whitespace-nowrap","data-label":"Action"},ll={key:0,class:"border-t text-sm font-semibold bg-gray-50"},sl={key:0,class:"p-2 w-10"},nl=["data-label"],ol={key:0},rl={key:1,class:"px-4 py-2"},il={class:"p-3 border-t bg-white text-sm flex flex-col sm:flex-row sm:justify-between sm:items-center"},ul={class:"mb-2 sm:mb-0"},dl={class:"flex flex-wrap items-center gap-2"},cl=["value"],vl={__name:"BaseTable",props:{columns:Array,data:{type:Object,default:()=>({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]})},checkable:Boolean,loading:{type:Boolean,default:!1},showAction:{type:Boolean,default:!0}},emits:["query-change","selected","sort","filter","edit"],setup(a,{emit:s}){const o=a,c=s,r=p(null),_=sa.useLoading(),f=p(null);se(()=>o.loading,C=>{C?f.value||(f.value=_.show({container:r.value,canCancel:!1,isFullPage:!1,color:"#3b82f6",opacity:.8})):f.value&&(f.value.hide(),f.value=null)},{immediate:!0}),at(()=>{f.value&&(f.value.hide(),f.value=null)});const v=p(o.data.currentPage||1),$=p(o.data.pageSize||10),S=p(null),K=p("desc"),D=p({}),g=p({}),b=p(new Set);se(()=>o.data.currentPage,C=>{v.value=C||1}),se(()=>o.data.pageSize,C=>{$.value=C||10});const x=z(()=>o.data||{total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),y=z(()=>x.value.data.filter(C=>Object.keys(D.value).every(E=>D.value[E]?C[E]?.toString().toLowerCase().includes(D.value[E].toLowerCase()):!0))),B=z(()=>b.value.size===y.value.length&&y.value.length>0),h=z(()=>x.value.totalPages||Math.ceil(x.value.total/$.value)||1),P=z(()=>{const C=h.value,E=v.value,k=2,I=[];if(C<=7)for(let X=1;X<=C;X++)I.push(X);else{I.push(1);let X=Math.max(2,E-k),ae=Math.min(C-1,E+k);X>2&&I.push("...");for(let Y=X;Y<=ae;Y++)I.push(Y);ae<C-1&&I.push("..."),I.push(C)}return I}),V=()=>{c("query-change",{page:v.value,limit:$.value,sort:S.value,order:K.value,filters:D.value})},R=C=>{C>=1&&C<=h.value&&(v.value=C,V())},ee=C=>{$.value=Number(C.target.value),v.value=1,V()},Ce=C=>{S.value===C?K.value=K.value==="asc"?"desc":"asc":(S.value=C,K.value="desc"),c("sort",{key:S.value,order:K.value}),V()},Te=C=>{g.value[C]=!g.value[C]},pe=(C,E)=>{D.value[C]=E,c("filter",D.value),V()},ze=C=>{C?b.value=new Set(y.value.map(E=>E.id)):b.value.clear(),c("selected",Array.from(b.value))},be=(C,E)=>{C?b.value.add(E.id):b.value.delete(E.id),c("selected",Array.from(b.value))},ke=C=>{c("edit",C)},ye=z(()=>{const C={};return o.columns.forEach(E=>{if(E.aggregate){let k=0;x.value.data.forEach(I=>{const X=parseFloat(I[E.key]);isNaN(X)||(k+=X)}),C[E.key]=k}}),C}),qe=z(()=>o.columns.some(C=>C.aggregate));return(C,E)=>(i(),u("div",{ref_key:"tableContainer",ref:r,class:"table-container relative rounded-lg border border-gray-200 shadow-sm bg-white"},[t("table",Na,[t("thead",Ka,[t("tr",null,[a.checkable?(i(),u("th",Ha,[J(xt,{modelValue:B.value,"onUpdate:modelValue":ze},null,8,["modelValue"])])):w("",!0),(i(!0),u(H,null,W(a.columns,k=>(i(),u("th",{key:k.key,class:"px-4 py-2 text-left whitespace-nowrap"},[t("div",Qa,[t("span",Wa,m(k.label),1),t("div",Ya,[k.sortable?(i(),te(re,{key:0,icon:S.value===k.key?K.value==="asc"?j(ra):j(pt):j(pt),small:"",onClick:I=>Ce(k.key)},null,8,["icon","onClick"])):w("",!0),k.filterable?(i(),te(re,{key:1,icon:j(ia),small:"",onClick:I=>Te(k.key)},null,8,["icon","onClick"])):w("",!0)])]),J(na,{name:"fade"},{default:ie(()=>[g.value[k.key]?(i(),u("div",Ga,[U(t("input",{"onUpdate:modelValue":I=>D.value[k.key]=I,class:"w-full px-2 py-1 text-xs border rounded",placeholder:"Filter...",onInput:I=>pe(k.key,I.target.value)},null,40,qa),[[T,D.value[k.key]]])])):w("",!0)]),_:2},1024)]))),128)),a.showAction?(i(),u("th",Ja)):w("",!0)])]),t("tbody",null,[(i(!0),u(H,null,W(x.value.data,k=>(i(),u("tr",{key:k.id,class:"border-t text-sm hover:bg-gray-50"},[a.checkable?(i(),u("td",Xa,[J(xt,{modelValue:b.value.has(k.id),"onUpdate:modelValue":I=>be(I,k)},null,8,["modelValue","onUpdate:modelValue"])])):w("",!0),(i(!0),u(H,null,W(a.columns,I=>(i(),u("td",{key:I.key,class:"px-4 py-2 whitespace-nowrap","data-label":I.label},[I.formatter?(i(),u("span",el,m(I.formatter(k[I.key],k)),1)):(i(),u("span",tl,m(k[I.key]||"-"),1))],8,Za))),128)),a.showAction?(i(),u("td",al,[Ye(C.$slots,"cell-actions",{row:k},()=>[J(Ra,null,{default:ie(()=>[J(re,{icon:j(wt),small:"",onClick:I=>ke(k)},null,8,["icon","onClick"])]),_:2},1024)],!0)])):w("",!0)]))),128)),qe.value?(i(),u("tr",ll,[a.checkable?(i(),u("td",sl)):w("",!0),(i(!0),u(H,null,W(a.columns,k=>(i(),u("td",{key:k.key,class:"px-4 py-2 whitespace-nowrap","data-label":k.label},[k.aggregate?(i(),u("span",ol,m(ye.value[k.key]),1)):w("",!0)],8,nl))),128)),a.showAction?(i(),u("td",rl)):w("",!0)])):w("",!0)])]),t("div",il,[t("span",ul,m((v.value-1)*$.value+1)+" - "+m(Math.min(v.value*$.value,x.value.total))+" of "+m(x.value.total)+" items ",1),t("div",dl,[J(re,{icon:j(ua),small:"",disabled:v.value===1,onClick:E[0]||(E[0]=k=>R(v.value-1))},null,8,["icon","disabled"]),(i(!0),u(H,null,W(P.value,(k,I)=>(i(),te(re,{key:I,active:k!=="..."&&k===v.value,label:k,small:"",disabled:k==="...",onClick:X=>k!=="..."&&R(k)},null,8,["active","label","disabled","onClick"]))),128)),J(re,{icon:j(da),small:"",disabled:v.value===h.value,onClick:E[1]||(E[1]=k=>R(v.value+1))},null,8,["icon","disabled"]),t("select",{class:"border p-1 text-sm rounded",onChange:ee,value:$.value},E[2]||(E[2]=[t("option",{value:"5"},"5 / page",-1),t("option",{value:"10"},"10 / page",-1),t("option",{value:"20"},"20 / page",-1)]),40,cl)])])],512))}},pl=ha(vl,[["__scopeId","data-v-b7183b3c"]]),ml=ht({name:"BaseLevel",props:{mobile:Boolean,type:{type:String,default:"justify-between"}},render(){const a=[this.type,"items-center"],s=["flex"],o=["block","md:flex"],c=["flex","items-center","justify-center"];return ve("div",{class:a.concat(this.mobile?s:o)},this.$slots.default().map((r,_)=>{const f=!this.mobile&&this.$slots.default().length>_+1?c.concat(["mb-6","md:mb-0"]):c;return ve("div",{class:f},[r])}))}}),fl={class:"flex flex-col md:flex-row items-center"},bl={class:"text-center md:text-left md:py-2"},yl={__name:"NotificationBar",props:{icon:{type:String,default:null},outline:Boolean,color:{type:String,required:!0},autoClose:{type:Number,default:5}},setup(a){const s=a,o=z(()=>s.outline?Ma[s.color]:kt[s.color]),c=p(!1);let r=null;const _=()=>{r&&(clearTimeout(r),r=null),c.value=!0},f=st(),v=z(()=>f.right);return tt(()=>{s.autoClose>0&&(r=setTimeout(()=>{_()},s.autoClose*1e3))}),at(()=>{r&&(clearTimeout(r),r=null)}),($,S)=>c.value?w("",!0):(i(),u("div",{key:0,class:Z([o.value,"px-3 py-6 md:py-3 mb-6 last:mb-0 border rounded-lg transition-colors duration-150"])},[J(ml,null,{default:ie(()=>[t("div",fl,[a.icon?(i(),te(Ge,{key:0,path:a.icon,w:"w-10 md:w-5",h:"h-10 md:h-5",size:"24",class:"md:mr-2"},null,8,["path"])):w("",!0),t("span",bl,[Ye($.$slots,"default")])]),v.value?Ye($.$slots,"right",{key:0}):(i(),te(re,{key:1,icon:j(ca),small:"","rounded-full":"",color:"white",onClick:_},null,8,["icon"]))]),_:3})],2))}},de={async create(a){return(await Q.post("/clubs",a)).data},async getById(a){return(await Q.get(`/clubs/${a}`)).data},async updateById(a,s){return(await Q.put(`/clubs/${a}`,s)).data},async delete(a){return(await Q.delete(`/clubs/${a}`)).data},async list(a){return(await Q.get("/clubs",{params:a})).data},async addUsers(a,s){return(await Q.post(`/clubs/${a}/users`,{userIds:s})).data},async removeUser(a,s){return(await Q.delete(`/clubs/${a}/users/${s}`)).data},async updateMember(a,s,o){const{data:c}=await Q.patch(`/clubs/${a}/users/${s}`,o);return c}},gl=nt("club",()=>{const a=p({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),s=p(!1),o=p(null),c=p(!1),r=p(null),_=async(y={},B=!1)=>{if(o.value=null,!(!B&&c.value))try{s.value=!0;const h=await de.list(y);Object.assign(a.value,{total:h.total||0,totalPages:h.totalPages||1,currentPage:y.page||1,pageSize:y.limit||10,data:h.data||[]}),c.value=!0}catch(h){o.value=h?.response?.message||"Failed to fetch clubs"}finally{s.value=!1}},f=async y=>{o.value=null;try{s.value=!0;const B=await de.getById(y);r.value=B}catch(B){o.value=B?.response?.message||"Failed to fetch club"}finally{s.value=!1}},v=async y=>{o.value=null;try{s.value=!0;const B=await de.create(y);a.value.data.push(B),a.value.total+=1}catch(B){o.value=B?.response?.message||"Failed to create club"}finally{s.value=!1}},$=async(y,B)=>{o.value=null;try{s.value=!0;const h=await de.updateById(y,B),P=a.value.data.findIndex(V=>V.id===y);P!==-1&&(a.value.data[P]=h),r.value?.id===y&&(r.value=h)}catch(h){o.value=h?.response?.message||"Failed to update club"}finally{s.value=!1}},S=async y=>{o.value=null;try{s.value=!0,await de.delete(y),a.value.data=a.value.data.filter(B=>B.id!==y),a.value.total-=1,r.value?.id===y&&(r.value=null)}catch(B){o.value=B?.response?.message||"Failed to delete club"}finally{s.value=!1}},K=async(y,B)=>{o.value=null;try{s.value=!0;const h=await de.addUsers(y,B),P=a.value.data.findIndex(V=>V.id===y);P!==-1&&(a.value.data[P]=h),r.value?.id===y&&(r.value=h)}catch(h){o.value=h?.response?.message||"Failed to add users to club"}finally{s.value=!1}},D=async(y,B)=>{o.value=null;try{s.value=!0,await de.removeUser(y,B),r.value?.id===y&&Array.isArray(r.value.users)&&(r.value.users=r.value.users.filter(P=>P.id!==B));const h=a.value.data.findIndex(P=>P.id===y);h!==-1&&Array.isArray(a.value.data[h].users)&&(a.value.data[h].users=a.value.data[h].users.filter(P=>P.id!==B))}catch(h){o.value=h?.response?.message||"Failed to remove user from club"}finally{s.value=!1}};async function g(y,B,h){try{s.value=!0;const P=await de.updateMember(y,B,{status:h});r.value=P}catch(P){throw o.value=P?.response?.data?.message||"Failed to update member status",P}finally{s.value=!1}}async function b(y,B,h){try{s.value=!0;const P=await de.updateMember(y,B,{role:h});r.value=P}catch(P){throw o.value=P?.response?.data?.message||"Failed to update member role",P}finally{s.value=!1}}return{clubs:a,selectedClub:r,isLoading:s,error:o,isLoaded:c,fetchAll:_,fetchById:f,create:v,updateById:$,deleteById:S,addUsersToClub:K,removeUserFromClub:D,updateMemberRole:b,updateMemberStatus:g,resetStore:()=>{a.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},r.value=null,c.value=!1,s.value=!1,o.value=null}}}),Le={async create(a){return(await Q.post("/users",a)).data},async getById(a){return(await Q.get(`/users/${a}`)).data},async updateById(a,s){return(await Q.put(`/users/${a}`,s)).data},async delete(a){return(await Q.delete(`/users/${a}`)).data},async list(a){return(await Q.get("/users",{params:a})).data}},xl=nt("user",()=>{const a=p({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),s=p(!1),o=p(null),c=p(!1),r=p(null);return{users:a,selectedUser:r,isLoading:s,error:o,isLoaded:c,fetchAll:async(D={},g=!1)=>{if(o.value=null,!(!g&&c.value))try{s.value=!0;const b=await Le.list(D);Object.assign(a.value,{total:b.total||0,totalPages:b.totalPages||1,currentPage:D.page||1,pageSize:D.limit||10,data:b.data||[]}),c.value=!0}catch(b){o.value=b?.response?.message||"Failed to fetch users"}finally{s.value=!1}},fetchById:async D=>{o.value=null;try{s.value=!0;const g=await Le.getById(D);r.value=g}catch(g){o.value=g?.response?.message||"Failed to fetch user"}finally{s.value=!1}},create:async D=>{o.value=null;try{s.value=!0;const g=await Le.create(D);a.value.data.push(g),a.value.total+=1}catch(g){o.value=g?.response?.message||"Failed to create user"}finally{s.value=!1}},updateById:async(D,g)=>{o.value=null;try{s.value=!0;const b=await Le.updateById(D,g),x=a.value.data.findIndex(y=>y.id===D);x!==-1&&(a.value.data[x]=b),r.value?.id===D&&(r.value=b)}catch(b){o.value=b?.response?.message||"Failed to update user"}finally{s.value=!1}},deleteById:async D=>{o.value=null;try{s.value=!0,await Le.delete(D),a.value.data=a.value.data.filter(g=>g.id!==D),a.value.total-=1,r.value?.id===D&&(r.value=null)}catch(g){o.value=g?.response?.message||"Failed to delete user"}finally{s.value=!1}},resetStore:()=>{a.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},r.value=null,c.value=!1,s.value=!1,o.value=null}}}),we={async create(a){const{data:s}=await Q.post("/clubs/docs",a);return s},async getById(a){const{data:s}=await Q.get(`/clubs/docs/${a}`);return s},async updateById(a,s){const{data:o}=await Q.put(`/clubs/docs/${a}`,s);return o},async delete(a){const{data:s}=await Q.delete(`/clubs/docs/${a}`);return s},async list(a){const{data:s}=await Q.get("/clubs/docs",{params:a});return s},async listByClub(a,s={}){const o={...s,club_id:a},{data:c}=await Q.get("/clubs/docs",{params:o});return c}},hl=nt("clubDoc",()=>{const a=p({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),s=p(!1),o=p(null),c=p(!1),r=p(null);return{docs:a,selectedDoc:r,isLoading:s,error:o,isLoaded:c,fetchAll:async(g={},b=!1)=>{if(o.value=null,!(!b&&c.value))try{s.value=!0;const x=await we.list(g);Object.assign(a.value,{total:x.total||0,totalPages:x.totalPages||1,currentPage:g.page||1,pageSize:g.limit||10,data:x.data||[]}),c.value=!0}catch(x){o.value=x?.response?.data?.message||"Failed to fetch club docs"}finally{s.value=!1}},fetchByClub:async(g,b={})=>{o.value=null;try{s.value=!0;const x=await we.listByClub(g,b);Object.assign(a.value,{total:x.total||0,totalPages:x.totalPages||1,currentPage:b.page||1,pageSize:b.limit||10,data:x.data||[]}),c.value=!0}catch(x){o.value=x?.response?.data?.message||"Failed to fetch club docs by club"}finally{s.value=!1}},fetchById:async g=>{o.value=null;try{s.value=!0;const b=await we.getById(g);r.value=b}catch(b){o.value=b?.response?.data?.message||"Failed to fetch club doc"}finally{s.value=!1}},create:async g=>{o.value=null;try{s.value=!0;const b=await we.create(g);return a.value.data.unshift(b),a.value.total+=1,b}catch(b){throw o.value=b?.response?.data?.message||"Failed to create club doc",b}finally{s.value=!1}},updateById:async(g,b)=>{o.value=null;try{s.value=!0;const x=await we.updateById(g,b),y=a.value.data.findIndex(B=>B.id===g);return y!==-1&&(a.value.data[y]=x),r.value?.id===g&&(r.value=x),x}catch(x){throw o.value=x?.response?.data?.message||"Failed to update club doc",x}finally{s.value=!1}},deleteById:async g=>{o.value=null;try{s.value=!0,await we.delete(g),a.value.data=a.value.data.filter(b=>b.id!==g),a.value.total=Math.max(0,a.value.total-1),r.value?.id===g&&(r.value=null)}catch(b){throw o.value=b?.response?.data?.message||"Failed to delete club doc",b}finally{s.value=!1}},resetStore:()=>{a.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},r.value=null,c.value=!1,s.value=!1,o.value=null}}}),wl={class:"flex items-center gap-2"},Cl={class:"flex items-center gap-2"},kl=["onClick"],_l={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},Sl=["d"],Bl=["onClick"],Dl={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},$l=["d"],Ul=["onClick"],Vl={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},Pl=["d"],Al=["onClick"],Il={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},El=["d"],Ml={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},jl={class:"bg-white p-4 rounded shadow-lg w-[860px] max-h-screen overflow-auto"},Ol={class:"flex items-center justify-between mb-2"},Ll={class:"grid grid-cols-2 gap-3 text-sm"},Fl={key:0,class:"text-red-600 text-xs mt-1"},Tl={key:0,class:"text-red-600 text-xs mt-1"},zl={class:"col-span-2"},Rl={class:"flex justify-end gap-2 mt-4"},Nl={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},Kl={class:"bg-white p-4 rounded shadow-lg w-[860px] max-h-screen overflow-auto"},Hl={class:"flex items-center justify-between mb-2"},Ql={class:"grid grid-cols-2 gap-3 text-sm"},Wl={key:0,class:"text-red-600 text-xs mt-1"},Yl={key:0,class:"text-red-600 text-xs mt-1"},Gl={class:"col-span-2"},ql={class:"flex justify-end gap-2 mt-4"},Jl={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},Xl={class:"bg-white p-4 rounded shadow-lg w-[860px] max-h-screen overflow-auto"},Zl={class:"flex items-center justify-between"},es={class:"text-lg font-semibold"},ts={class:"text-gray-600"},as={class:"mt-3 flex flex-col gap-2"},ls={class:"flex items-center gap-2"},ss=["value"],ns={class:"text-[12px] text-gray-600"},os={class:"mt-4"},rs={class:"relative"},is={key:0,class:"absolute z-10 mt-1 w-full bg-white border rounded shadow max-h-64 overflow-auto"},us={key:0,class:"px-3 py-2 text-xs text-gray-500"},ds=["onClick"],cs={class:"font-medium"},vs={class:"text-gray-500"},ps={class:"text-xs text-gray-500"},ms={key:0,class:"px-3 py-2 text-xs text-gray-500"},fs={key:0,class:"flex flex-wrap gap-2 mt-2"},bs=["onClick"],ys={class:"flex justify-end mt-2"},gs=["disabled"],xs={class:"space-y-2 mt-4 max-h-[60vh] overflow-y-auto pr-2 -mr-2"},hs={class:"text-sm"},ws={class:"font-semibold"},Cs={class:"text-gray-500 text-xs"},ks={class:"text-gray-600 text-xs"},_s={class:"mt-1 text-xs flex flex-wrap items-center gap-3"},Ss=["disabled","value","onChange"],Bs=["value"],Ds=["disabled","value","onChange"],$s=["value"],Us={key:0,class:"text-[11px] text-gray-500"},Vs=["onClick"],Ps={class:"flex justify-between items-center mt-3 text-xs text-gray-600"},As={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},Is={class:"bg-white p-4 rounded shadow-lg w-[900px] max-h-screen overflow-auto"},Es={class:"flex items-center justify-between"},Ms={class:"text-lg font-semibold"},js={class:"text-gray-600"},Os={class:"flex items-center gap-2"},Ls={class:"mt-3 flex flex-col gap-2"},Fs={class:"flex items-center gap-2"},Ts=["value"],zs=["value"],Rs={class:"text-[12px] text-gray-600"},Ns={class:"space-y-2 mt-4 max-h-[60vh] overflow-y-auto pr-2 -mr-2"},Ks={class:"text-sm"},Hs={class:"flex flex-wrap items-center gap-2"},Qs={class:"font-semibold"},Ws={class:"px-2 py-[2px] text-[11px] rounded bg-indigo-100 text-indigo-700 uppercase"},Ys={class:"text-xs text-gray-600"},Gs={class:"shrink-0 flex items-center gap-2"},qs=["onClick"],Js=["onClick"],Xs={class:"flex justify-between items-center mt-3 text-xs text-gray-600"},Zs={key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},en={class:"bg-white p-4 rounded shadow-lg w-[1024px] max-h-screen overflow-auto"},tn={class:"flex items-center justify-between mb-2"},an={class:"flex items-center gap-2"},ln={class:"bg-white w-full max-w-[1024px] max-h-screen rounded-2xl shadow-lg flex flex-col"},sn={class:"p-5 flex-1 overflow-auto"},nn={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},on=["aria-invalid"],rn=["value"],un={key:0,class:"text-red-600 text-xs mt-1"},dn=["aria-invalid"],cn=["value"],vn={key:0,class:"text-red-600 text-xs mt-1"},pn={class:"md:col-span-2"},mn=["aria-invalid"],fn={key:0,class:"text-red-600 text-xs mt-1"},bn={class:"md:col-span-2"},yn={key:0,class:"text-red-600 text-xs mt-1"},gn={class:"md:col-span-2"},xn={class:"border-t p-4 bg-white flex items-center justify-end gap-2"},hn=["disabled"],wn={key:5,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},Cn={class:"bg-white p-4 rounded shadow-lg w-[1024px] max-h-screen overflow-auto w-[760px]"},kn={class:"flex items-center justify-between mb-2"},_n={class:"flex items-center gap-2"},Sn={class:"bg-white w-full max-w-[1024px] max-h-screen rounded-2xl shadow-lg flex flex-col"},Bn={class:"p-5 flex-1 overflow-auto"},Dn={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},$n=["aria-invalid"],Un=["value"],Vn={key:0,class:"text-red-600 text-xs mt-1"},Pn=["aria-invalid"],An=["value"],In={key:0,class:"text-red-600 text-xs mt-1"},En={class:"md:col-span-2"},Mn=["aria-invalid"],jn={key:0,class:"text-red-600 text-xs mt-1"},On={class:"md:col-span-2"},Ln={key:0,class:"text-red-600 text-xs mt-1"},Fn={class:"border-t p-4 bg-white flex items-center justify-end gap-2"},Tn=["disabled"],Qe=10,We=10,Qn={__name:"ClubsOrganizationPage",setup(a){const s=p(null),o=p(!1),c=(n,e)=>{s.value=e},r=()=>{s.value&&(s.value.execCommand("mceFullScreen"),o.value=!o.value)},_=()=>{o.value&&s.value&&(s.value.execCommand("mceFullScreen"),o.value=!1),Ae.value=!1},f={menubar:!1,height:320,plugins:"lists link image table code paste fullscreen",toolbar:"undo redo | blocks | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | removeformat | code | fullscreen",paste_data_images:!0,image_dimensions:!0,image_caption:!0,object_resizing:"img",branding:!1,content_style:"body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; font-size:14px}",automatic_uploads:!1,file_picker_types:"image",file_picker_callback:n=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=()=>{const l=e.files?.[0];if(!l)return;const d=new FileReader;d.onload=()=>n(d.result),d.readAsDataURL(l)},e.click()}},v=gl(),$=xl(),S=hl(),K=p({page:1,limit:10}),D=async(n={},e=!0)=>{K.value={...K.value,...n},await v.fetchAll(K.value,e)};tt(()=>D({page:1,limit:10}));const g=z(()=>({total:v.clubs.total||0,totalPages:v.clubs.totalPages||1,currentPage:v.clubs.currentPage||1,pageSize:v.clubs.pageSize||10,data:v.clubs.data||[]})),b=p(!1),x=p(null),y=p(""),B=p([]),h=p(1),P=p(""),V=p("all"),R=p("all"),ee=["president","vice-president","secretary","treasurer","pio","business manager","bod","officer"],Ce=new Set([...ee,"officer"]),Te=[...ee,"member"],pe=n=>(n??"member").toString().trim().toLowerCase()||"member",ze=n=>{const e=pe(n);if(e==="member")return 999;const l=ee.indexOf(e);return l===-1?ee.indexOf("officer"):l},be=n=>{const e=pe(n?.UserClub?.role);return Ce.has(e)},ke=["pending","active","inactive"],ye=n=>{const e=(n??"active").toString().trim().toLowerCase();return ke.includes(e)?e:"active"},qe=n=>{const e=pe(n?.UserClub?.role);return e==="member"?"member":Te.includes(e)?e:"officer"},C=(n,e)=>{if(!e)return!0;const l=`${n.first_name||""} ${n.last_name||""}`.toLowerCase(),d=(n.username||"").toLowerCase(),A=(n.email||"").toLowerCase();return l.includes(e)||d.includes(e)||A.includes(e)},E=z(()=>{const n=P.value.trim().toLowerCase(),e=V.value,l=R.value;let d=B.value||[];return e==="officers"?d=d.filter(be):e==="members"&&(d=d.filter(A=>!be(A))),l!=="all"&&(d=d.filter(A=>ye(A?.UserClub?.status)===l)),n&&(d=d.filter(A=>C(A,n))),d.slice().sort((A,ce)=>{const Ee=ze(A.UserClub?.role),Me=ze(ce.UserClub?.role);if(Ee!==Me)return Ee-Me;const je=(A.last_name||"").toLowerCase(),Oe=(ce.last_name||"").toLowerCase();if(je!==Oe)return je.localeCompare(Oe);const He=(A.first_name||"").toLowerCase(),Xe=(ce.first_name||"").toLowerCase();return He!==Xe?He.localeCompare(Xe):(A.username||"").toLowerCase().localeCompare((ce.username||"").toLowerCase())})}),k=z(()=>(B.value||[]).filter(be).length),I=z(()=>(B.value||[]).filter(n=>!be(n)).length),X=z(()=>{const n=E.value.length,e=Math.ceil(Math.max(n,1)/Qe),l=Math.min(h.value,e||1),d=(l-1)*Qe,A=E.value.slice(d,d+Qe);return{total:n,totalPages:e,currentPage:l,pageSize:Qe,data:A}});se([P,V,R],()=>{h.value=1});const ae=p(""),Y=p([]),Re=p(!1),ne=p([]);let ot=null;const _t=n=>{const e={};return n&&(n.includes("@")?e.email=n:e.username=n,e.is_active=!0),e},rt=n=>{const e=new Set((B.value||[]).map(d=>d.id)),l=new Set((ne.value||[]).map(d=>d.id));return(n||[]).filter(d=>!e.has(d.id)&&!l.has(d.id))},St=async()=>{const n=ae.value.trim();if(!n){Y.value=[];return}Re.value=!0;try{await $.fetchAll({page:1,limit:8,filters:_t(n)},!0),Y.value=rt($.users.data||[])}finally{Re.value=!1}};se(ae,n=>{if(clearTimeout(ot),!n?.trim()){Y.value=[];return}ot=setTimeout(St,250)});const Bt=n=>{ne.value.push(n),Y.value=Y.value.filter(e=>e.id!==n.id),ae.value=""},Dt=n=>{ne.value=ne.value.filter(e=>e.id!==n)},$t=async()=>{if(!ne.value.length||!x.value)return;const n=ne.value.map(e=>e.id);await v.addUsersToClub(x.value,n),B.value=Array.isArray(v.selectedClub?.users)?v.selectedClub.users:[],ne.value=[],Y.value=[],ae.value="",h.value=1},_e=p(!1),O=p({name:"",code:"",category:"",description:"",is_active:!0,established_at:"",website:"",email:"",phone:""}),ge=p({}),Ut=()=>{ge.value={},Object.assign(O.value,{name:"",code:"",category:"",description:"",is_active:!0,established_at:"",website:"",email:"",phone:""}),_e.value=!0},Vt=()=>{const n={};return O.value.name?.trim()||(n.name="Name is required"),O.value.code?.trim()||(n.code="Code is required"),ge.value=n,Object.keys(n).length===0},Pt=async()=>{if(!Vt())return;const n={...O.value};Object.keys(n).forEach(e=>{n[e]===""&&(n[e]=null)}),await v.create(n),_e.value=!1,await D(K.value,!0)},Se=p(!1),L=p({id:null,name:"",code:"",category:"",description:"",is_active:!0,established_at:"",website:"",email:"",phone:""}),xe=p({}),At=async n=>{xe.value={},x.value=n.id,y.value=n.name||"",await v.fetchById(n.id);const e=v.selectedClub||n;Object.assign(L.value,{id:e.id,name:e.name||"",code:e.code||"",category:e.category||"",description:e.description||"",is_active:e.is_active??!0,established_at:e.established_at?String(e.established_at).slice(0,10):"",website:e.website||"",email:e.email||"",phone:e.phone||""}),Se.value=!0},It=()=>{const n={};return L.value.name?.trim()||(n.name="Name is required"),L.value.code?.trim()||(n.code="Code is required"),xe.value=n,Object.keys(n).length===0},Et=async()=>{if(!It())return;const{id:n,...e}=L.value,l={...e};Object.keys(l).forEach(d=>{l[d]===""&&(l[d]=null)}),await v.updateById(n,l),Se.value=!1,await D(K.value,!0)},Mt=async n=>{if(!n?.id)return;(await he.fire({title:`Delete club "${n.name}"?`,text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed&&(await v.deleteById(n.id),await D(K.value,!0),await he.fire("Deleted!","The club has been deleted.","success"))},jt=async n=>{x.value=n.id,y.value=n.name||"",h.value=1,await v.fetchById(n.id),B.value=Array.isArray(v.selectedClub?.users)?v.selectedClub.users:[],P.value="",V.value="all",R.value="all",ae.value="",Y.value=[],ne.value=[],b.value=!0},Ot=async n=>{x.value&&(await v.removeUserFromClub(x.value,n),B.value=B.value.filter(e=>e.id!==n),ae.value.trim()&&Y.value.length&&(Y.value=rt(Y.value)))},it=n=>{h.value=n},Ne=p(new Set),Ke=p(new Set),Lt=async(n,e)=>{if(!x.value)return;const l=ye(e),d=ye(n.UserClub?.status);if(d!==l){Ne.value.add(n.id),n.UserClub||(n.UserClub={}),n.UserClub.status=l;try{await v.updateMemberStatus(x.value,n.id,l)}catch{n.UserClub.status=d,he.fire("Update failed",v.error||"Unable to update status","error")}finally{Ne.value.delete(n.id)}}},Ft=async(n,e)=>{if(!x.value)return;const l=pe(e),d=pe(n.UserClub?.role);if(d!==l){Ke.value.add(n.id),n.UserClub||(n.UserClub={}),n.UserClub.role=l;try{await v.updateMemberRole(x.value,n.id,l)}catch{n.UserClub.role=d,he.fire("Update failed",v.error||"Unable to update role","error")}finally{Ke.value.delete(n.id)}}},Je=p(!1),me=p([]),ue=p(1),Be=p(""),De=p("all"),$e=p("all"),Tt=["cbl","resolution","minute"],Ue=["draft","published","archived"],Ve=["cbl","resolution","minute"],zt=n=>{const e=(n||"").toString().toLowerCase();return Ve.includes(e)?e:"cbl"},ut=n=>{const e=zt(n),l=Tt.indexOf(e);return l===-1?999:l},Rt=(n,e)=>{if(!e)return!0;const l=(n.title||"").toLowerCase(),d=(n.content||"").toLowerCase();return l.includes(e)||d.includes(e)},dt=z(()=>{const n=Be.value.trim().toLowerCase(),e=De.value,l=$e.value;let d=me.value||[];return e!=="all"&&(d=d.filter(A=>(A.type||"").toLowerCase()===e)),l!=="all"&&(d=d.filter(A=>(A.status||"").toLowerCase()===l)),n&&(d=d.filter(A=>Rt(A,n))),d.slice().sort((A,ce)=>{const Ee=ut(A.type),Me=ut(ce.type);if(Ee!==Me)return Ee-Me;const je=A.doc_date||A.created_at,Oe=ce.doc_date||ce.created_at,He=je?new Date(je).getTime():0;return(Oe?new Date(Oe).getTime():0)-He})}),Pe=z(()=>{const n=dt.value.length,e=Math.ceil(Math.max(n,1)/We),l=Math.min(ue.value,e||1),d=(l-1)*We,A=dt.value.slice(d,d+We);return{total:n,totalPages:e,currentPage:l,pageSize:We,data:A}});se([Be,De,$e],()=>{ue.value=1});const Nt=async n=>{x.value=n.id,y.value=n.name||"",Be.value="",De.value="all",$e.value="all",ue.value=1,await S.fetchByClub(n.id,{page:1,limit:200}),me.value=Array.isArray(S.docs?.data)?S.docs.data:[],Je.value=!0},Ae=p(!1),N=p({type:"cbl",title:"",content:"",status:"draft",doc_date:""}),G=p({}),Kt=()=>{G.value={},Object.assign(N.value,{type:"cbl",title:"",content:"",status:"draft",doc_date:""}),Ae.value=!0},Ht=()=>{const n={};return N.value.type||(n.type="Type is required"),N.value.title?.trim()||(n.title="Title is required"),N.value.content?.trim()||(n.content="Content is required"),N.value.status&&!Ue.includes(N.value.status)&&(n.status="Invalid status"),G.value=n,Object.keys(n).length===0},Qt=async()=>{if(!x.value||!Ht())return;const n={club_id:x.value,type:N.value.type,title:N.value.title,content:N.value.content,status:N.value.status||"draft",doc_date:N.value.doc_date||null},e=await S.create(n);me.value.unshift(e),Ae.value=!1},Ie=p(!1),M=p({id:null,type:"cbl",title:"",content:"",status:"draft",doc_date:""}),q=p({}),Wt=n=>{q.value={},Object.assign(M.value,{id:n.id,type:n.type||"cbl",title:n.title||"",content:n.content||"",status:n.status||"draft",doc_date:n.doc_date?String(n.doc_date).slice(0,10):""}),Ie.value=!0},Yt=()=>{const n={};return M.value.type&&!Ve.includes(M.value.type)&&(n.type="Invalid type"),M.value.title?.trim()||(n.title="Title is required"),M.value.content?.trim()||(n.content="Content is required"),M.value.status&&!Ue.includes(M.value.status)&&(n.status="Invalid status"),q.value=n,Object.keys(n).length===0},Gt=async()=>{if(!Yt())return;const n=M.value.id,e={type:M.value.type,title:M.value.title,content:M.value.content,status:M.value.status,doc_date:M.value.doc_date||null},l=await S.updateById(n,e),d=me.value.findIndex(A=>A.id===n);d!==-1&&(me.value[d]=l),Ie.value=!1},qt=async n=>{(await he.fire({title:`Delete document "${n.title}"?`,text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed&&(await S.deleteById(n.id),me.value=me.value.filter(l=>l.id!==n.id),await he.fire("Deleted!","The document has been deleted.","success"))},Jt=[{key:"name",label:"Name",sortable:!0,filterable:!0},{key:"code",label:"Code",sortable:!0,filterable:!0},{key:"category",label:"Category",sortable:!0,filterable:!0},{key:"is_active",label:"Active",sortable:!0,formatter:n=>n?"Yes":"No"}],Xt=async n=>{await D(n)};return(n,e)=>(i(),u(H,null,[J(va,null,{default:ie(()=>[J(xa,null,{default:ie(()=>[j(v).error?(i(),te(yl,{key:0,icon:j(pa),color:"danger"},{default:ie(()=>[F(m(j(v).error),1)]),_:1},8,["icon"])):w("",!0),J(Ta,{icon:j(ma),title:"Clubs",main:""},{default:ie(()=>[t("div",wl,[J(re,{icon:j(fa),color:"primary",label:"Add Club",onClick:Ut},null,8,["icon"]),J(re,{color:"info",label:"Refresh",onClick:e[0]||(e[0]=l=>D({page:1,limit:g.value.pageSize}))})])]),_:1},8,["icon"]),J(pl,{columns:Jt,data:g.value,loading:j(v).isLoading,onQueryChange:Xt},{"cell-actions":ie(({row:l})=>[t("div",Cl,[t("button",{class:"text-blue-600 underline flex items-center gap-1",onClick:d=>jt(l),title:"View Members"},[(i(),u("svg",_l,[t("path",{d:j(ba)},null,8,Sl)])),e[49]||(e[49]=F(" Members ",-1))],8,kl),t("button",{class:"text-indigo-600 underline flex items-center gap-1",onClick:d=>Nt(l),title:"View Docs"},[(i(),u("svg",Dl,[t("path",{d:j(ya)},null,8,$l)])),e[50]||(e[50]=F(" Documents ",-1))],8,Bl),t("button",{class:"text-emerald-600 underline flex items-center gap-1",onClick:d=>At(l),title:"Edit Club"},[(i(),u("svg",Vl,[t("path",{d:j(wt)},null,8,Pl)])),e[51]||(e[51]=F(" Edit ",-1))],8,Ul),t("button",{class:"text-red-600 underline flex items-center gap-1",onClick:d=>Mt(l),title:"Delete Club"},[(i(),u("svg",Il,[t("path",{d:j(ga)},null,8,El)])),e[52]||(e[52]=F(" Delete ",-1))],8,Al)])]),_:1},8,["data","loading"])]),_:1})]),_:1}),_e.value?(i(),u("div",Ml,[t("div",jl,[t("div",Ol,[e[53]||(e[53]=t("h2",{class:"text-lg font-semibold"},"Add New Club",-1)),t("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:e[1]||(e[1]=l=>_e.value=!1)},"Close")]),t("div",Ll,[t("div",null,[e[54]||(e[54]=t("label",{class:"block mb-1"},[F("Name "),t("span",{class:"text-red-500"},"*")],-1)),U(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>O.value.name=l),class:"w-full border rounded px-2 py-1",placeholder:"e.g. Math Society"},null,512),[[T,O.value.name]]),ge.value.name?(i(),u("p",Fl,m(ge.value.name),1)):w("",!0)]),t("div",null,[e[55]||(e[55]=t("label",{class:"block mb-1"},[F("Code "),t("span",{class:"text-red-500"},"*")],-1)),U(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>O.value.code=l),class:"w-full border rounded px-2 py-1",placeholder:"e.g. MATHSOC"},null,512),[[T,O.value.code]]),ge.value.code?(i(),u("p",Tl,m(ge.value.code),1)):w("",!0)]),t("div",null,[e[57]||(e[57]=t("label",{class:"block mb-1"},"Category",-1)),U(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>O.value.category=l),class:"w-full border rounded px-2 py-1"},e[56]||(e[56]=[vt('<option disabled value="">Select a category</option><option value="Academic">Academic</option><option value="Cultural">Cultural</option><option value="Athletics">Athletics</option><option value="Social">Social</option><option value="Community Service">Community Service</option><option value="Religious/Spiritual">Religious / Spiritual</option><option value="Environmental">Environmental</option><option value="Leadership">Leadership</option><option value="Others">Others</option>',10)]),512),[[le,O.value.category]])]),t("div",null,[e[59]||(e[59]=t("label",{class:"block mb-1"},"Active?",-1)),U(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>O.value.is_active=l),class:"w-full border rounded px-2 py-1"},e[58]||(e[58]=[t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[le,O.value.is_active]])]),t("div",zl,[e[60]||(e[60]=t("label",{class:"block mb-1"},"Description",-1)),U(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=l=>O.value.description=l),class:"w-full border rounded px-2 py-1",rows:"3"},null,512),[[T,O.value.description]])]),t("div",null,[e[61]||(e[61]=t("label",{class:"block mb-1"},"Established At",-1)),U(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>O.value.established_at=l),type:"date",class:"w-full border rounded px-2 py-1"},null,512),[[T,O.value.established_at]])]),t("div",null,[e[62]||(e[62]=t("label",{class:"block mb-1"},"Website",-1)),U(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>O.value.website=l),class:"w-full border rounded px-2 py-1",placeholder:"https://…"},null,512),[[T,O.value.website]])]),t("div",null,[e[63]||(e[63]=t("label",{class:"block mb-1"},"Email",-1)),U(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>O.value.email=l),type:"email",class:"w-full border rounded px-2 py-1",placeholder:"club@example.com"},null,512),[[T,O.value.email]])]),t("div",null,[e[64]||(e[64]=t("label",{class:"block mb-1"},"Phone",-1)),U(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>O.value.phone=l),class:"w-full border rounded px-2 py-1",placeholder:"+63…"},null,512),[[T,O.value.phone]])])]),t("div",Rl,[t("button",{class:"px-4 py-2 bg-gray-200 rounded text-xs",onClick:e[11]||(e[11]=l=>_e.value=!1)},"Cancel"),t("button",{class:"px-4 py-2 bg-blue-600 text-white rounded text-xs",onClick:Pt},"Create")])])])):w("",!0),Se.value?(i(),u("div",Nl,[t("div",Kl,[t("div",Hl,[e[65]||(e[65]=t("h2",{class:"text-lg font-semibold"},"Edit Club",-1)),t("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:e[12]||(e[12]=l=>Se.value=!1)},"Close")]),t("div",Ql,[t("div",null,[e[66]||(e[66]=t("label",{class:"block mb-1"},[F("Name "),t("span",{class:"text-red-500"},"*")],-1)),U(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>L.value.name=l),class:"w-full border rounded px-2 py-1"},null,512),[[T,L.value.name]]),xe.value.name?(i(),u("p",Wl,m(xe.value.name),1)):w("",!0)]),t("div",null,[e[67]||(e[67]=t("label",{class:"block mb-1"},[F("Code "),t("span",{class:"text-red-500"},"*")],-1)),U(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>L.value.code=l),class:"w-full border rounded px-2 py-1"},null,512),[[T,L.value.code]]),xe.value.code?(i(),u("p",Yl,m(xe.value.code),1)):w("",!0)]),t("div",null,[e[69]||(e[69]=t("label",{class:"block mb-1"},"Category",-1)),U(t("select",{"onUpdate:modelValue":e[15]||(e[15]=l=>L.value.category=l),class:"w-full border rounded px-2 py-1"},e[68]||(e[68]=[vt('<option disabled value="">Select a category</option><option value="Academic">Academic</option><option value="Cultural">Cultural</option><option value="Athletics">Athletics</option><option value="Social">Social</option><option value="Community Service">Community Service</option><option value="Religious/Spiritual">Religious / Spiritual</option><option value="Environmental">Environmental</option><option value="Leadership">Leadership</option><option value="Others">Others</option>',10)]),512),[[le,L.value.category]])]),t("div",null,[e[71]||(e[71]=t("label",{class:"block mb-1"},"Active?",-1)),U(t("select",{"onUpdate:modelValue":e[16]||(e[16]=l=>L.value.is_active=l),class:"w-full border rounded px-2 py-1"},e[70]||(e[70]=[t("option",{value:!0},"Yes",-1),t("option",{value:!1},"No",-1)]),512),[[le,L.value.is_active]])]),t("div",Gl,[e[72]||(e[72]=t("label",{class:"block mb-1"},"Description",-1)),U(t("textarea",{"onUpdate:modelValue":e[17]||(e[17]=l=>L.value.description=l),class:"w-full border rounded px-2 py-1",rows:"3"},null,512),[[T,L.value.description]])]),t("div",null,[e[73]||(e[73]=t("label",{class:"block mb-1"},"Established At",-1)),U(t("input",{"onUpdate:modelValue":e[18]||(e[18]=l=>L.value.established_at=l),type:"date",class:"w-full border rounded px-2 py-1"},null,512),[[T,L.value.established_at]])]),t("div",null,[e[74]||(e[74]=t("label",{class:"block mb-1"},"Website",-1)),U(t("input",{"onUpdate:modelValue":e[19]||(e[19]=l=>L.value.website=l),class:"w-full border rounded px-2 py-1"},null,512),[[T,L.value.website]])]),t("div",null,[e[75]||(e[75]=t("label",{class:"block mb-1"},"Email",-1)),U(t("input",{"onUpdate:modelValue":e[20]||(e[20]=l=>L.value.email=l),type:"email",class:"w-full border rounded px-2 py-1"},null,512),[[T,L.value.email]])]),t("div",null,[e[76]||(e[76]=t("label",{class:"block mb-1"},"Phone",-1)),U(t("input",{"onUpdate:modelValue":e[21]||(e[21]=l=>L.value.phone=l),class:"w-full border rounded px-2 py-1"},null,512),[[T,L.value.phone]])])]),t("div",ql,[t("button",{class:"px-4 py-2 bg-gray-200 rounded text-xs",onClick:e[22]||(e[22]=l=>Se.value=!1)},"Cancel"),t("button",{class:"px-4 py-2 bg-emerald-600 text-white rounded text-xs",onClick:Et}," Save Changes ")])])])):w("",!0),b.value?(i(),u("div",Jl,[t("div",Xl,[t("div",Zl,[t("h2",es,[e[77]||(e[77]=F("Club Members — ",-1)),t("span",ts,m(y.value),1)]),t("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:e[23]||(e[23]=l=>b.value=!1)},"Close")]),t("div",as,[t("div",ls,[U(t("select",{"onUpdate:modelValue":e[24]||(e[24]=l=>V.value=l),class:"border rounded px-2 py-1 text-sm"},e[78]||(e[78]=[t("option",{value:"all"},"All roles",-1),t("option",{value:"officers"},"Officers",-1),t("option",{value:"members"},"Members",-1)]),512),[[le,V.value]]),U(t("select",{"onUpdate:modelValue":e[25]||(e[25]=l=>R.value=l),class:"border rounded px-2 py-1 text-sm"},[e[79]||(e[79]=t("option",{value:"all"},"All statuses",-1)),(i(),u(H,null,W(ke,l=>t("option",{key:l,value:l},m(l),9,ss)),64))],512),[[le,R.value]]),U(t("input",{"onUpdate:modelValue":e[26]||(e[26]=l=>P.value=l),type:"text",placeholder:"Search club members by name, username, or email…",class:"border rounded px-2 py-1 text-sm w-full"},null,512),[[T,P.value]])]),t("div",ns," Showing "+m(X.value.total)+" result(s). Officers: "+m(k.value)+" • Members: "+m(I.value),1)]),t("div",os,[t("div",rs,[U(t("input",{"onUpdate:modelValue":e[27]||(e[27]=l=>ae.value=l),type:"text",placeholder:"Add users: search by username or email…",class:"border rounded px-2 py-1 text-sm w-full",autocomplete:"off"},null,512),[[T,ae.value]]),ae.value&&(Y.value.length||Re.value)?(i(),u("div",is,[Re.value?(i(),u("div",us,"Searching…")):(i(),u(H,{key:1},[(i(!0),u(H,null,W(Y.value,l=>(i(),u("button",{key:l.id,class:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm",onClick:d=>Bt(l)},[t("div",cs,[F(m(l.first_name)+" "+m(l.last_name)+" ",1),t("span",vs,"@"+m(l.username),1)]),t("div",ps,m(l.email),1)],8,ds))),128)),Y.value.length?w("",!0):(i(),u("div",ms,"No matches"))],64))])):w("",!0)]),ne.value.length?(i(),u("div",fs,[(i(!0),u(H,null,W(ne.value,l=>(i(),u("span",{key:l.id,class:"inline-flex items-center gap-2 px-2 py-1 bg-blue-50 border border-blue-200 rounded text-xs"},[F(m(l.first_name)+" "+m(l.last_name)+" (@"+m(l.username)+") ",1),t("button",{class:"ml-1 text-blue-600",onClick:d=>Dt(l.id)},"✕",8,bs)]))),128))])):w("",!0),t("div",ys,[t("button",{class:"px-3 py-1 bg-blue-600 text-white rounded text-xs disabled:opacity-50",disabled:!ne.value.length,onClick:$t}," Add Selected ",8,gs)])]),t("div",xs,[(i(!0),u(H,null,W(X.value.data,l=>(i(),u("div",{key:l.id,class:"flex items-start justify-between p-3 border bg-gray-50 rounded"},[t("div",hs,[t("div",ws,[F(m(l.first_name)+" "+m(l.last_name)+" ",1),t("span",Cs,"(@"+m(l.username)+")",1)]),t("div",ks,m(l.email),1),t("div",_s,[t("span",null,[e[80]||(e[80]=F("Role: ",-1)),t("select",{class:"border rounded px-1 py-0.5 text-xs",disabled:Ke.value.has(l.id),value:qe(l),onChange:d=>Ft(l,d.target.value)},[(i(),u(H,null,W(Te,d=>t("option",{key:d,value:d},m(d),9,Bs)),64))],40,Ss)]),t("span",null,[e[81]||(e[81]=F("Status: ",-1)),t("select",{class:"border rounded px-1 py-0.5 text-xs",disabled:Ne.value.has(l.id),value:ye(l.UserClub?.status),onChange:d=>Lt(l,d.target.value)},[(i(),u(H,null,W(ke,d=>t("option",{key:d,value:d},m(d),9,$s)),64))],40,Ds)]),t("span",null,[e[82]||(e[82]=F("Joined: ",-1)),t("strong",null,m(l.UserClub?.joined_at?new Date(l.UserClub.joined_at).toLocaleDateString():"—"),1)]),Ke.value.has(l.id)||Ne.value.has(l.id)?(i(),u("span",Us,"Saving…")):w("",!0)])]),t("div",null,[t("button",{class:"px-2 py-1 bg-red-600 text-white rounded text-xs",onClick:d=>Ot(l.id)}," Remove ",8,Vs)])]))),128))]),t("div",Ps,[h.value>1?(i(),u("button",{key:0,onClick:e[28]||(e[28]=l=>it(h.value-1)),class:"px-3 py-1 bg-gray-300 rounded"}," Previous ")):w("",!0),t("div",null,"Page "+m(X.value.currentPage)+" of "+m(X.value.totalPages||1),1),h.value<X.value.totalPages?(i(),u("button",{key:1,onClick:e[29]||(e[29]=l=>it(h.value+1)),class:"px-3 py-1 bg-gray-300 rounded"}," Next ")):w("",!0)])])])):w("",!0),Je.value?(i(),u("div",As,[t("div",Is,[t("div",Es,[t("h2",Ms,[e[83]||(e[83]=F(" Club Documents — ",-1)),t("span",js,m(y.value),1)]),t("div",Os,[t("button",{class:"px-3 py-1 text-xs bg-blue-600 text-white rounded",onClick:Kt}," + Add Document "),t("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:e[30]||(e[30]=l=>Je.value=!1)},"Close")])]),t("div",Ls,[t("div",Fs,[U(t("select",{"onUpdate:modelValue":e[31]||(e[31]=l=>De.value=l),class:"border rounded px-2 py-1 text-sm"},[e[84]||(e[84]=t("option",{value:"all"},"All types",-1)),(i(),u(H,null,W(Ve,l=>t("option",{key:l,value:l},m(l),9,Ts)),64))],512),[[le,De.value]]),U(t("select",{"onUpdate:modelValue":e[32]||(e[32]=l=>$e.value=l),class:"border rounded px-2 py-1 text-sm"},[e[85]||(e[85]=t("option",{value:"all"},"All statuses",-1)),(i(),u(H,null,W(Ue,l=>t("option",{key:l,value:l},m(l),9,zs)),64))],512),[[le,$e.value]]),U(t("input",{"onUpdate:modelValue":e[33]||(e[33]=l=>Be.value=l),type:"text",placeholder:"Search documents by title or content…",class:"border rounded px-2 py-1 text-sm w-full"},null,512),[[T,Be.value]])]),t("div",Rs," Showing "+m(Pe.value.total)+" document(s). Ordered by type → date. ",1)]),t("div",Ns,[(i(!0),u(H,null,W(Pe.value.data,l=>(i(),u("div",{key:l.id,class:"border rounded p-3 bg-gray-50 flex items-start justify-between gap-4"},[t("div",Ks,[t("div",Hs,[t("span",Qs,m(l.title),1),t("span",Ws,m(l.type),1),t("span",{class:Z(["px-2 py-[2px] text-[11px] rounded",{"bg-yellow-100 text-yellow-700":l.status==="draft","bg-emerald-100 text-emerald-700":l.status==="published","bg-gray-200 text-gray-700":l.status==="archived"}])},m(l.status),3),t("span",Ys,m(l.doc_date?new Date(l.doc_date).toLocaleDateString():l.created_at?new Date(l.created_at).toLocaleDateString():"—"),1)])]),t("div",Gs,[t("button",{class:"px-2 py-1 bg-amber-500 hover:bg-amber-600 text-white rounded text-xs",onClick:d=>Wt(l)}," Edit ",8,qs),t("button",{class:"px-2 py-1 bg-red-600 text-white rounded text-xs",onClick:d=>qt(l)}," Delete ",8,Js)])]))),128))]),t("div",Xs,[ue.value>1?(i(),u("button",{key:0,onClick:e[34]||(e[34]=l=>ue.value=ue.value-1),class:"px-3 py-1 bg-gray-300 rounded"}," Previous ")):w("",!0),t("div",null,"Page "+m(Pe.value.currentPage)+" of "+m(Pe.value.totalPages||1),1),ue.value<Pe.value.totalPages?(i(),u("button",{key:1,onClick:e[35]||(e[35]=l=>ue.value=ue.value+1),class:"px-3 py-1 bg-gray-300 rounded"}," Next ")):w("",!0)])])])):w("",!0),Ae.value?(i(),u("div",Zs,[t("div",en,[t("div",tn,[e[86]||(e[86]=t("h2",{class:"text-lg font-semibold"},"Add Document",-1)),t("div",an,[t("button",{class:"px-3 py-1 text-xs bg-indigo-600 text-white rounded",onClick:r},m(o.value?"Restore":"Maximize"),1),t("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:_}," Close ")])]),t("div",ln,[t("div",sn,[t("div",nn,[t("div",null,[e[87]||(e[87]=t("label",{for:"doc-type",class:"block mb-1 font-medium text-gray-700"},[F("Type "),t("span",{class:"text-red-500"},"*")],-1)),U(t("select",{id:"doc-type","onUpdate:modelValue":e[36]||(e[36]=l=>N.value.type=l),"aria-invalid":!!G.value.type,class:Z(["w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",G.value.type?"border-red-500":"border-gray-300"])},[(i(),u(H,null,W(Ve,l=>t("option",{key:l,value:l},m(l),9,rn)),64))],10,on),[[le,N.value.type]]),G.value.type?(i(),u("p",un,m(G.value.type),1)):w("",!0)]),t("div",null,[e[88]||(e[88]=t("label",{for:"doc-status",class:"block mb-1 font-medium text-gray-700"},"Status",-1)),U(t("select",{id:"doc-status","onUpdate:modelValue":e[37]||(e[37]=l=>N.value.status=l),"aria-invalid":!!G.value.status,class:Z(["w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",G.value.status?"border-red-500":"border-gray-300"])},[(i(),u(H,null,W(Ue,l=>t("option",{key:l,value:l},m(l),9,cn)),64))],10,dn),[[le,N.value.status]]),G.value.status?(i(),u("p",vn,m(G.value.status),1)):w("",!0)]),t("div",pn,[e[89]||(e[89]=t("label",{for:"doc-title",class:"block mb-1 font-medium text-gray-700"},[F("Title "),t("span",{class:"text-red-500"},"*")],-1)),U(t("input",{id:"doc-title","onUpdate:modelValue":e[38]||(e[38]=l=>N.value.title=l),"aria-invalid":!!G.value.title,placeholder:"Document title",class:Z(["w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",G.value.title?"border-red-500":"border-gray-300"])},null,10,mn),[[T,N.value.title]]),G.value.title?(i(),u("p",fn,m(G.value.title),1)):w("",!0)]),t("div",bn,[e[90]||(e[90]=t("label",{class:"block mb-1 font-medium text-gray-700"},[F("Content "),t("span",{class:"text-red-500"},"*")],-1)),t("div",{class:Z(["rounded-lg border",G.value.content?"border-red-500":"border-gray-300"])},[J(j(gt),{modelValue:N.value.content,"onUpdate:modelValue":e[39]||(e[39]=l=>N.value.content=l),init:f,onInit:c,"tinymce-script-src":"/tinymce/tinymce.min.js",licenseKey:"gpl"},null,8,["modelValue"])],2),G.value.content?(i(),u("p",yn,m(G.value.content),1)):w("",!0)]),t("div",gn,[e[91]||(e[91]=t("label",{for:"doc-date",class:"block mb-1 font-medium text-gray-700"},"Document Date",-1)),U(t("input",{id:"doc-date","onUpdate:modelValue":e[40]||(e[40]=l=>N.value.doc_date=l),type:"date",class:"w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 border-gray-300"},null,512),[[T,N.value.doc_date]])])])]),t("div",xn,[t("button",{type:"button",class:"px-4 py-2 rounded-lg text-xs border border-gray-300 hover:bg-gray-100 transition",onClick:e[41]||(e[41]=l=>Ae.value=!1)}," Cancel "),t("button",{type:"button",class:"px-4 py-2 rounded-lg text-xs bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 transition",disabled:n.isSubmitting,onClick:Qt}," Create ",8,hn)])])])])):w("",!0),Ie.value?(i(),u("div",wn,[t("div",Cn,[t("div",kn,[e[92]||(e[92]=t("h2",{class:"text-lg font-semibold"},"Edit Document",-1)),t("div",_n,[t("button",{class:"px-3 py-1 text-xs bg-indigo-600 text-white rounded",onClick:r},m(o.value?"Restore":"Maximize"),1),t("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:e[42]||(e[42]=l=>Ie.value=!1)},"Close")])]),t("div",Sn,[t("div",Bn,[t("div",Dn,[t("div",null,[e[93]||(e[93]=t("label",{for:"edit-type",class:"block mb-1 font-medium text-gray-700"},"Type",-1)),U(t("select",{id:"edit-type","onUpdate:modelValue":e[43]||(e[43]=l=>M.value.type=l),"aria-invalid":!!q.value.type,class:Z(["w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",q.value.type?"border-red-500":"border-gray-300"])},[(i(),u(H,null,W(Ve,l=>t("option",{key:l,value:l},m(l),9,Un)),64))],10,$n),[[le,M.value.type]]),q.value.type?(i(),u("p",Vn,m(q.value.type),1)):w("",!0)]),t("div",null,[e[94]||(e[94]=t("label",{for:"edit-status",class:"block mb-1 font-medium text-gray-700"},"Status",-1)),U(t("select",{id:"edit-status","onUpdate:modelValue":e[44]||(e[44]=l=>M.value.status=l),"aria-invalid":!!q.value.status,class:Z(["w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",q.value.status?"border-red-500":"border-gray-300"])},[(i(),u(H,null,W(Ue,l=>t("option",{key:l,value:l},m(l),9,An)),64))],10,Pn),[[le,M.value.status]]),q.value.status?(i(),u("p",In,m(q.value.status),1)):w("",!0)]),t("div",En,[e[95]||(e[95]=t("label",{for:"edit-title",class:"block mb-1 font-medium text-gray-700"},[F("Title "),t("span",{class:"text-red-500"},"*")],-1)),U(t("input",{id:"edit-title","onUpdate:modelValue":e[45]||(e[45]=l=>M.value.title=l),"aria-invalid":!!q.value.title,placeholder:"Document title",class:Z(["w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",q.value.title?"border-red-500":"border-gray-300"])},null,10,Mn),[[T,M.value.title]]),q.value.title?(i(),u("p",jn,m(q.value.title),1)):w("",!0)]),t("div",null,[e[96]||(e[96]=t("label",{for:"edit-date",class:"block mb-1 font-medium text-gray-700"},"Document Date",-1)),U(t("input",{id:"edit-date","onUpdate:modelValue":e[46]||(e[46]=l=>M.value.doc_date=l),type:"date",class:"w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 border-gray-300"},null,512),[[T,M.value.doc_date]])]),t("div",On,[e[97]||(e[97]=t("label",{class:"block mb-1 font-medium text-gray-700"},[F("Content "),t("span",{class:"text-red-500"},"*")],-1)),t("div",{class:Z(["rounded-lg border",q.value.content?"border-red-500":"border-gray-300"])},[J(j(gt),{modelValue:M.value.content,"onUpdate:modelValue":e[47]||(e[47]=l=>M.value.content=l),init:f,onInit:c,"tinymce-script-src":"/tinymce/tinymce.min.js",licenseKey:"gpl"},null,8,["modelValue"])],2),q.value.content?(i(),u("p",Ln,m(q.value.content),1)):w("",!0)])])]),t("div",Fn,[t("button",{type:"button",class:"px-4 py-2 rounded-lg text-xs border border-gray-300 hover:bg-gray-100 transition",onClick:e[48]||(e[48]=l=>Ie.value=!1)}," Cancel "),t("button",{type:"button",class:"px-4 py-2 rounded-lg text-xs bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50 transition",disabled:n.isSubmitting,onClick:Gt}," Save Changes ",8,Tn)])])])])):w("",!0)],64))}};export{Qn as default};
