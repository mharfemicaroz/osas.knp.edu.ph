import{T as w}from"./ToasterComponent.DCwK9ahc.js";import{c as o,a as u,b as l,d as e,e as f,w as _,f as d,v as c,g,n as p,h as x,t as m,i as k,r as y,u as S,o as n}from"./index.BrnGoOvj.js";import{_ as C}from"./logo.Dx3Q79ni.js";import{_ as V}from"./_plugin-vue_export-helper.DlAUqK2U.js";const P={data(){return{username:"",email:"",first_name:"",last_name:"",role:"student",is_active:0,password:"",confirmPassword:"",showPassword:!1,showConfirm:!1,capsOnPwd:!1,capsOnConfirm:!1,triedSubmit:!1,honeypot:"",captchaA:0,captchaB:0,captchaInput:"",captchaError:""}},computed:{auth(){return S()},usernameValid(){return/^[a-zA-Z0-9._-]{4,20}$/.test(this.username)},validEmailDomain(){return/@knp\.edu\.ph$/i.test(this.email)},passwordValid(){return/^(?=.*[A-Za-z])(?=.*\d).{8,}$/.test(this.password)},passwordsDontMatch(){return this.password&&this.confirmPassword&&this.password!==this.confirmPassword},captchaAnswer(){return this.captchaA+this.captchaB},captchaValid(){return String(parseInt(this.captchaInput||"NaN",10))===String(this.captchaAnswer)},captchaStateClass(){return this.captchaInput?this.captchaValid?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-400 border border-gray-200"},captchaIconClass(){return this.captchaInput?this.captchaValid?"mdi mdi-check-bold text-xl":"mdi mdi-close-thick text-xl":"mdi mdi-help-circle-outline text-xl"},canSubmit(){return this.usernameValid&&this.validEmailDomain&&this.first_name.trim().length>0&&this.last_name.trim().length>0&&this.passwordValid&&!this.passwordsDontMatch&&this.captchaValid&&!this.honeypot}},methods:{async onSubmit(){if(this.triedSubmit=!0,!this.honeypot){if(!this.canSubmit){this.captchaValid||(this.captchaError="Incorrect captcha answer.");return}this.captchaError="";try{const a={username:this.username.trim(),email:this.email.trim(),password:this.password,role:this.role,is_active:this.is_active,first_name:this.first_name.trim(),last_name:this.last_name.trim()};await this.auth.register(a),this.$refs.toast.showToast("success","Registration successful! Please sign in."),this.username="",this.email="",this.first_name="",this.last_name="",this.password="",this.confirmPassword="",this.captchaInput="",this.triedSubmit=!1,setTimeout(()=>{this.$router.push({name:"login"})},500)}catch(a){const t=a?.message||"Registration failed";this.$refs.toast.showToast("warning",t),this.genCaptcha()}}},detectCaps(a){return a.getModifierState?a.getModifierState("CapsLock"):!1},genCaptcha(){const a=(t,h)=>Math.floor(Math.random()*(h-t+1))+t;this.captchaA=a(10,49),this.captchaB=a(10,49),this.captchaInput="",this.captchaError=""},signUpWithSchoolAccount(){try{this.auth.startGoogleLogin("#/register")}catch(a){this.$refs.toast.showToast("warning",a.message||"Unable to start Google sign-up")}},tryConsumeSso(){try{this.auth.consumeSsoFromHash()&&this.$refs.toast?.showToast("success","Signed up with school account")}catch(a){this.$refs.toast?.showToast("warning",a.message||"Google sign-up failed")}}},components:{ToasterComponent:w},created(){this.genCaptcha()},mounted(){this.tryConsumeSso(),this.$nextTick(()=>this.tryConsumeSso())}},A={class:"min-h-screen relative overflow-hidden"},U={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},E={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},I={class:"w-full max-w-md"},T={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 hover:ring-black/10 transition"},O={class:"p-6 sm:p-7"},j={class:"space-y-1"},D={class:"relative"},L={key:0,class:"text-xs text-rose-600"},M={class:"space-y-1"},N={class:"relative"},q={key:0,class:"text-xs text-rose-600"},B={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},F={class:"space-y-1"},z={class:"relative"},G={key:0,class:"text-xs text-rose-600"},R={class:"space-y-1"},K={class:"relative"},W={key:0,class:"text-xs text-rose-600"},Z={class:"space-y-2"},H={class:"relative"},Y=["type"],J={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},Q={key:1,class:"text-xs text-rose-600"},X={class:"space-y-2"},$={class:"relative"},tt=["type"],et={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},st={key:1,class:"text-xs text-rose-600"},it={class:"space-y-2"},rt={class:"flex items-center justify-between"},at={class:"flex items-center gap-3"},ot={class:"flex-1"},nt={class:"w-full rounded-xl border border-gray-300/80 bg-white/70 px-3 py-2.5 text-gray-900 flex items-center justify-between"},lt={class:"text-sm select-none"},dt={key:0,class:"text-xs text-red-600"},ct={class:"pt-1"},ut=["disabled"],pt=["disabled"],mt={class:"text-center text-xs"},ht={class:"px-6 sm:px-7 pb-6"},ft={class:"flex items-center justify-between text-[11px] text-gray-500"};function gt(a,t,h,xt,s,r){const b=y("router-link"),v=y("ToasterComponent");return n(),o("div",A,[t[41]||(t[41]=u('<div class="absolute inset-0" data-v-80fe82d5><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-80fe82d5></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-80fe82d5></div><div class="absolute inset-0 backdrop-blur-sm" data-v-80fe82d5></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-80fe82d5></div></div>',1)),r.auth.isLoading?(n(),o("div",U,t[16]||(t[16]=[e("div",{class:"loader"},null,-1)]))):l("",!0),e("div",E,[e("div",I,[t[39]||(t[39]=u('<div class="mb-6 text-center" data-v-80fe82d5><a href="index.html" class="inline-flex items-center justify-center" data-v-80fe82d5><img src="'+C+'" alt="OSAS" class="h-14 w-auto" data-v-80fe82d5></a><h1 class="mt-4 text-2xl font-extrabold tracking-wide text-white" data-v-80fe82d5> Office of Student Affairs &amp; Services </h1><p class="mt-1 text-primary-text/90 text-sm" data-v-80fe82d5>Serve. Support. Empower.</p></div>',1)),e("div",T,[e("div",O,[t[37]||(t[37]=u('<div class="mb-5 text-center" data-v-80fe82d5><div class="inline-flex items-center gap-2" data-v-80fe82d5><span class="inline-grid h-8 w-8 place-items-center rounded-full bg-primary/10" data-v-80fe82d5><i class="mdi mdi-account-plus text-primary text-xl" data-v-80fe82d5></i></span><h2 class="text-lg font-bold text-gray-900" data-v-80fe82d5>Create Account</h2></div><p class="text-xs text-gray-500 mt-2" data-v-80fe82d5>Fill in the details to register</p></div>',1)),e("form",{onSubmit:t[15]||(t[15]=_((...i)=>r.onSubmit&&r.onSubmit(...i),["prevent"])),class:"space-y-4",novalidate:""},[d(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>s.honeypot=i),class:"hidden",tabindex:"-1",autocomplete:"off","aria-hidden":"true"},null,512),[[c,s.honeypot]]),e("div",j,[e("div",D,[t[17]||(t[17]=e("label",{class:"sr-only"},"Username",-1)),t[18]||(t[18]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"mdi mdi-account-outline text-gray-400 text-xl"})],-1)),d(e("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"Username","onUpdate:modelValue":t[1]||(t[1]=i=>s.username=i),autocomplete:"username"},null,512),[[c,s.username,void 0,{trim:!0}]])]),s.username&&!r.usernameValid?(n(),o("p",L," Username must be 4â€“20 characters and use letters, numbers, dot, underscore, or hyphen. ")):l("",!0)]),e("div",M,[e("div",N,[t[19]||(t[19]=e("label",{class:"sr-only"},"Email",-1)),t[20]||(t[20]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"mdi mdi-email-outline text-gray-400 text-xl"})],-1)),d(e("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"email",required:"",placeholder:"Email (must be @knp.edu.ph)","onUpdate:modelValue":t[2]||(t[2]=i=>s.email=i),autocomplete:"email"},null,512),[[c,s.email,void 0,{trim:!0}]])]),s.email&&!r.validEmailDomain?(n(),o("p",q,"Email must end with @knp.edu.ph")):l("",!0)]),e("div",B,[e("div",F,[e("div",z,[t[21]||(t[21]=e("label",{class:"sr-only"},"First name",-1)),t[22]||(t[22]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"mdi mdi-card-account-details-outline text-gray-400 text-xl"})],-1)),d(e("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"First name","onUpdate:modelValue":t[3]||(t[3]=i=>s.first_name=i),autocomplete:"given-name"},null,512),[[c,s.first_name,void 0,{trim:!0}]])]),s.first_name===""&&s.triedSubmit?(n(),o("p",G,"First name is required.")):l("",!0)]),e("div",R,[e("div",K,[t[23]||(t[23]=e("label",{class:"sr-only"},"Last name",-1)),t[24]||(t[24]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"mdi mdi-card-account-details text-gray-400 text-xl"})],-1)),d(e("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"Last name","onUpdate:modelValue":t[4]||(t[4]=i=>s.last_name=i),autocomplete:"family-name"},null,512),[[c,s.last_name,void 0,{trim:!0}]])]),s.last_name===""&&s.triedSubmit?(n(),o("p",W,"Last name is required.")):l("",!0)])]),d(e("input",{type:"hidden","onUpdate:modelValue":t[5]||(t[5]=i=>s.role=i)},null,512),[[c,s.role]]),e("div",Z,[e("div",H,[t[25]||(t[25]=e("label",{class:"sr-only"},"Password",-1)),t[26]||(t[26]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"mdi mdi-lock-outline text-gray-400 text-xl"})],-1)),d(e("input",{type:s.showPassword?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",placeholder:"Password","onUpdate:modelValue":t[6]||(t[6]=i=>s.password=i),onKeyup:t[7]||(t[7]=i=>s.capsOnPwd=r.detectCaps(i)),autocomplete:"new-password",minlength:"8"},null,40,Y),[[g,s.password]]),e("button",{type:"button",onClick:t[8]||(t[8]=i=>s.showPassword=!s.showPassword),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[e("i",{class:p(s.showPassword?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),s.capsOnPwd?(n(),o("div",J,t[27]||(t[27]=[e("i",{class:"mdi mdi-alert"},null,-1),e("span",null,"Caps Lock is ON",-1)]))):l("",!0),s.password&&!r.passwordValid?(n(),o("p",Q," Password must be at least 8 characters and include letters and numbers. ")):l("",!0)]),e("div",X,[e("div",$,[t[28]||(t[28]=e("label",{class:"sr-only"},"Confirm Password",-1)),t[29]||(t[29]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"mdi mdi-lock-check-outline text-gray-400 text-xl"})],-1)),d(e("input",{type:s.showConfirm?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",placeholder:"Confirm password","onUpdate:modelValue":t[9]||(t[9]=i=>s.confirmPassword=i),onKeyup:t[10]||(t[10]=i=>s.capsOnConfirm=r.detectCaps(i)),autocomplete:"new-password",minlength:"8"},null,40,tt),[[g,s.confirmPassword]]),e("button",{type:"button",onClick:t[11]||(t[11]=i=>s.showConfirm=!s.showConfirm),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[e("i",{class:p(s.showConfirm?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),s.capsOnConfirm?(n(),o("div",et,t[30]||(t[30]=[e("i",{class:"mdi mdi-alert"},null,-1),e("span",null,"Caps Lock is ON",-1)]))):l("",!0),r.passwordsDontMatch?(n(),o("p",st,"Passwords do not match.")):l("",!0)]),e("div",it,[e("div",rt,[t[32]||(t[32]=e("label",{class:"text-sm font-medium text-gray-700"},"Captcha",-1)),e("button",{type:"button",onClick:t[12]||(t[12]=(...i)=>r.genCaptcha&&r.genCaptcha(...i)),class:"text-xs text-primary hover:underline inline-flex items-center gap-1"},t[31]||(t[31]=[e("i",{class:"mdi mdi-refresh"},null,-1),x(" Refresh ",-1)]))]),e("div",at,[e("div",ot,[e("div",nt,[e("span",lt,m(s.captchaA)+" + "+m(s.captchaB)+" =",1),d(e("input",{class:"ml-3 w-24 text-right bg-transparent focus:outline-none",inputmode:"numeric",pattern:"[0-9]*",placeholder:"Answer","onUpdate:modelValue":t[13]||(t[13]=i=>s.captchaInput=i)},null,512),[[c,s.captchaInput,void 0,{trim:!0}]])])]),e("span",{class:p(["inline-flex h-9 w-9 items-center justify-center rounded-lg",r.captchaStateClass])},[e("i",{class:p(r.captchaIconClass)},null,2)],2)]),s.captchaError?(n(),o("p",dt,m(s.captchaError),1)):l("",!0)]),e("div",ct,[e("button",{class:"w-full py-2.5 px-4 rounded-xl bg-primary text-white font-semibold tracking-wide shadow-md hover:shadow-lg hover:bg-tertiary transition disabled:opacity-60 disabled:cursor-not-allowed",type:"submit",disabled:!r.canSubmit||r.auth.isLoading},t[33]||(t[33]=[e("span",{class:"inline-flex items-center justify-center gap-2"},[e("i",{class:"mdi mdi-account-check-outline"}),e("span",null,"Create Account")],-1)]),8,ut)]),t[36]||(t[36]=u('<div class="relative my-4" data-v-80fe82d5><div class="absolute inset-0 flex items-center" data-v-80fe82d5><span class="w-full border-t border-gray-200" data-v-80fe82d5></span></div><div class="relative flex justify-center text-xs" data-v-80fe82d5><span class="bg-white/80 px-2 text-gray-500" data-v-80fe82d5>or sign up with</span></div></div>',1)),e("div",null,[e("button",{type:"button",class:"w-full py-2.5 px-4 rounded-xl bg-white text-gray-800 font-semibold tracking-wide border border-gray-300/80 shadow-sm hover:shadow-md hover:bg-gray-50 transition disabled:opacity-60",disabled:r.auth.isLoading,onClick:t[14]||(t[14]=(...i)=>r.signUpWithSchoolAccount&&r.signUpWithSchoolAccount(...i))},t[34]||(t[34]=[e("span",{class:"inline-flex items-center justify-center gap-2"},[e("i",{class:"mdi mdi-google"}),e("span",null,"Sign up with School Account"),e("span",{class:"text-xs text-gray-500"},"(knp.edu.ph)")],-1)]),8,pt)]),e("div",mt,[f(b,{to:"/login",class:"text-primary hover:underline"},{default:k(()=>t[35]||(t[35]=[x(" Already have an account? Sign in ",-1)])),_:1,__:[35]})])],32)]),e("div",ht,[e("div",ft,[t[38]||(t[38]=e("span",null,"OSAS Kiosk v1.0",-1)),e("span",null,"Â© "+m(new Date().getFullYear())+" Student Services",1)])])]),t[40]||(t[40]=e("div",{class:"mt-6 text-center text-xs text-gray-300"},[e("p",null,"By registering, you agree to our Student Portal Guidelines.")],-1))])]),f(v,{ref:"toast"},null,512)])}const _t=V(P,[["render",gt],["__scopeId","data-v-80fe82d5"]]);export{_t as default};
