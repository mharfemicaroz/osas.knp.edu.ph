import{D as B,m as N,g as k,y as i,S as P,V as G,C as I,s as z,c as $,f as M,d as W,e as q,N as Y,h as K,j as R,B as L,k as X,l as A,n as J,_ as O,E as Q,o as V,p as Z,q as E,r as ee,t as te,u as se,v as S}from"./index.B5noqL4G.js";import{c as g,a as C,d as H,q as _,e as y,t as T,F as ae,B as ne,w as ie}from"./index.C20gUimh.js";class le extends L{constructor(){super(...arguments),this.state={textId:k()}}render(){let{theme:e,dateEnv:t,options:a,viewApi:l}=this.context,{cellId:n,dayDate:o,todayRange:c}=this.props,{textId:d}=this.state,f=X(o,c),v=a.listDayFormat?t.format(o,a.listDayFormat):"",x=a.listDaySideFormat?t.format(o,a.listDaySideFormat):"",p=Object.assign({date:t.toDate(o),view:l,textId:d,text:v,sideText:x,navLinkAttrs:A(this.context,o),sideNavLinkAttrs:A(this.context,o,"day",!1)},f);return i(I,{elTag:"tr",elClasses:["fc-list-day",...J(f,e)],elAttrs:{"data-date":M(o)},renderProps:p,generatorName:"dayHeaderContent",customGenerator:a.dayHeaderContent,defaultGenerator:re,classNameGenerator:a.dayHeaderClassNames,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},h=>i("th",{scope:"colgroup",colSpan:3,id:n,"aria-labelledby":d},i(h,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]})))}}function re(s){return i(O,null,s.text&&i("a",Object.assign({id:s.textId,className:"fc-list-day-text"},s.navLinkAttrs),s.text),s.sideText&&i("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},s.sideNavLinkAttrs),s.sideText))}const oe=V({hour:"numeric",minute:"2-digit",meridiem:"short"});class de extends L{render(){let{props:e,context:t}=this,{options:a}=t,{seg:l,timeHeaderId:n,eventHeaderId:o,dateHeaderId:c}=e,d=a.eventTimeFormat||oe;return i(Q,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",l.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>ce(l,t),seg:l,timeText:"",disableDragging:!0,disableResizing:!0}),(f,v)=>i(O,null,ue(l,d,t,n,c),i("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},i("span",{className:"fc-list-event-dot",style:{borderColor:v.borderColor||v.backgroundColor}})),i(f,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${o} ${c}`}})))}}function ce(s,e){let t=ee(s,e);return i("a",Object.assign({},t),s.eventRange.def.title)}function ue(s,e,t,a,l){let{options:n}=t;if(n.displayEventTime!==!1){let o=s.eventRange.def,c=s.eventRange.instance,d=!1,f;if(o.allDay?d=!0:Z(s.eventRange.range)?s.isStart?f=E(s,e,t,null,null,c.range.start,s.end):s.isEnd?f=E(s,e,t,null,null,s.start,c.range.end):d=!0:f=E(s,e,t),d){let v={text:t.options.allDayText,view:t.viewApi};return i(I,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${a} ${l}`},renderProps:v,generatorName:"allDayContent",customGenerator:n.allDayContent,defaultGenerator:fe,classNameGenerator:n.allDayClassNames,didMount:n.allDayDidMount,willUnmount:n.allDayWillUnmount})}return i("td",{className:"fc-list-event-time"},f)}return null}function fe(s){return s.text}class ve extends B{constructor(){super(...arguments),this.computeDateVars=N(ye),this.eventStoreToSegs=N(this._eventStoreToSegs),this.state={timeHeaderId:k(),eventHeaderId:k(),dateHeaderIdRoot:k()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:t}=this,{dayDates:a,dayRanges:l}=this.computeDateVars(e.dateProfile),n=this.eventStoreToSegs(e.eventStore,e.eventUiBases,l);return i(G,{elRef:this.setRootEl,elClasses:["fc-list",t.theme.getClass("table"),t.options.stickyHeaderDates!==!1?"fc-list-sticky":""],viewSpec:t.viewSpec},i(P,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},n.length>0?this.renderSegList(n,a):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:t}=this.context,a={text:e.noEventsText,view:t};return i(I,{elTag:"div",elClasses:["fc-list-empty"],renderProps:a,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:ge,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},l=>i(l,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(e,t){let{theme:a,options:l}=this.context,{timeHeaderId:n,eventHeaderId:o,dateHeaderIdRoot:c}=this.state,d=pe(e);return i(Y,{unit:"day"},(f,v)=>{let x=[];for(let p=0;p<d.length;p+=1){let h=d[p];if(h){let b=M(t[p]),w=c+"-"+b;x.push(i(le,{key:b,cellId:w,dayDate:t[p],todayRange:v})),h=W(h,l.eventOrder);for(let D of h)x.push(i(de,Object.assign({key:b+":"+D.eventRange.instance.instanceId,seg:D,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:n,eventHeaderId:o,dateHeaderId:w},q(D,v,f))))}}return i("table",{className:"fc-list-table "+a.getClass("table")},i("thead",null,i("tr",null,i("th",{scope:"col",id:n},l.timeHint),i("th",{scope:"col","aria-hidden":!0}),i("th",{scope:"col",id:o},l.eventHint))),i("tbody",null,x))})}_eventStoreToSegs(e,t,a){return this.eventRangesToSegs(z(e,t,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,a)}eventRangesToSegs(e,t){let a=[];for(let l of e)a.push(...this.eventRangeToSegs(l,t));return a}eventRangeToSegs(e,t){let{dateEnv:a}=this.context,{nextDayThreshold:l}=this.context.options,n=e.range,o=e.def.allDay,c,d,f,v=[];for(c=0;c<t.length;c+=1)if(d=$(n,t[c]),d&&(f={component:this,eventRange:e,start:d.start,end:d.end,isStart:e.isStart&&d.start.valueOf()===n.start.valueOf(),isEnd:e.isEnd&&d.end.valueOf()===n.end.valueOf(),dayIndex:c},v.push(f),!f.isEnd&&!o&&c+1<t.length&&n.end<a.add(t[c+1].start,l))){f.end=n.end,f.isEnd=!0;break}return v}}function ge(s){return s.text}function ye(s){let e=K(s.renderRange.start),t=s.renderRange.end,a=[],l=[];for(;e<t;)a.push(e),l.push({start:e,end:R(e,1)}),e=R(e,1);return{dayDates:a,dayRanges:l}}function pe(s){let e=[],t,a;for(t=0;t<s.length;t+=1)a=s[t],(e[a.dayIndex]||(e[a.dayIndex]=[])).push(a);return e}var he=':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}';te(he);const me={listDayFormat:F,listDaySideFormat:F,noEventsClassNames:S,noEventsContent:S,noEventsDidMount:S,noEventsWillUnmount:S};function F(s){return s===!1?null:V(s)}var Ne=se({name:"@fullcalendar/list",optionRefiners:me,views:{list:{component:ve,buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});const xe={class:"bg-white rounded-2xl shadow-2xl w-full sm:w-[720px] max-w-[95vw] max-h-[90vh] overflow-hidden"},be={class:"px-4 py-3 border-b flex items-center justify-between"},De={class:"min-w-0"},we={class:"text-base font-semibold truncate"},Se={class:"flex items-center gap-2"},Ce={class:"p-4 space-y-3 overflow-auto",style:{"max-height":"65vh"}},_e={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ke={class:"text-[11px] uppercase tracking-wide text-gray-500"},Ee={class:"text-sm text-gray-900 break-words"},Re={__name:"EventDetailsModal",props:{modelValue:{type:Boolean,default:!1},event:{type:Object,default:null}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,a=e,l=g({get:()=>t.modelValue,set:u=>a("update:modelValue",u)}),n=g(()=>t.event||{}),o=g(()=>n.value?.extendedProps||{}),c=g(()=>o.value?.type||""),d=g(()=>o.value?.ref||o.value?.reference_code||""),f=g(()=>n.value?.title||"Event"),v=g(()=>n.value?.start?new Date(n.value.start):null),x=g(()=>n.value?.end?new Date(n.value.end):null),p=g(()=>!!n.value?.allDay),h=g(()=>o.value?.club?.name||o.value?.club_name||""),b=g(()=>Array.isArray(o.value?.facilities)?o.value.facilities:[]),w=g(()=>o.value?.record||o.value?.raw||null),D=g(()=>{const u=[];c.value&&u.push(["Type",c.value]),d.value&&u.push(["Reference",d.value]),h.value&&u.push(["Club",h.value]),p.value&&u.push(["All-day","Yes"]),v.value&&u.push(["Start",v.value.toLocaleString()]),x.value&&u.push(["End",x.value.toLocaleString()]);const r=w.value||{},m=(c.value||"").toLowerCase();return m.includes("activity")?(r.name_of_activity&&u.push(["Activity",r.name_of_activity]),r.venue&&u.push(["Venue",r.venue]),r.date_of_implementation&&u.push(["Implementation Date",new Date(r.date_of_implementation).toLocaleDateString()]),r.status&&u.push(["Status",String(r.status).toUpperCase()])):m.includes("utilization")?(r.activity_design?.name_of_activity&&u.push(["Activity",r.activity_design.name_of_activity]),b.value?.length&&u.push(["Facilities",b.value.join(", ")]),r.status&&u.push(["Status",String(r.status).toUpperCase()])):m.includes("annual plan")&&(r.school_year&&u.push(["School Year",r.school_year]),r.status&&u.push(["Status",String(r.status).toUpperCase()])),u}),j=async u=>{try{await navigator.clipboard.writeText(String(u||""))}catch{}};return(u,r)=>l.value?(_(),C("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 backdrop-blur-sm p-2",onClick:r[2]||(r[2]=ie(m=>l.value=!1,["self"]))},[y("div",xe,[y("div",be,[y("div",De,[r[3]||(r[3]=y("div",{class:"text-xs uppercase tracking-wide text-gray-500"},"Event Details",-1)),y("h2",we,T(f.value),1)]),y("div",Se,[d.value?(_(),C("button",{key:0,class:"px-2 py-1 text-xs bg-gray-100 border rounded",onClick:r[0]||(r[0]=m=>j(d.value))},"Copy Ref")):H("",!0),y("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:r[1]||(r[1]=m=>l.value=!1)},"Close")])]),y("div",Ce,[y("div",_e,[(_(!0),C(ae,null,ne(D.value,(m,U)=>(_(),C("div",{key:U,class:"flex flex-col rounded-lg border bg-white p-3"},[y("div",ke,T(m[0]),1),y("div",Ee,T(m[1]||"—"),1)]))),128))])]),r[4]||(r[4]=y("div",{class:"px-4 py-2 text-[11px] text-gray-500 border-t"}," Click outside or Close to dismiss. ",-1))])])):H("",!0)}};export{Re as _,Ne as i};
