import{u as ee,r as l,c as i,o as te,n as se,a as r,b as C,d as n,e as t,f as B,g as T,w as ae,h as u,v as x,i as D,j as A,k as F,t as $,l as le,m as ie,p as re,q as o}from"./index.BiRlO2qs.js";import{_ as oe}from"./logo.Dx3Q79ni.js";import{T as ne}from"./ToasterComponent.BXwuoPoD.js";import{_ as de}from"./_plugin-vue_export-helper.DlAUqK2U.js";const ue={class:"min-h-screen relative overflow-hidden"},ce={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},pe={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},ve={class:"w-full max-w-md"},me={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 hover:ring-black/10 transition"},ge={class:"p-6 sm:p-7"},ye={class:"space-y-1"},xe={class:"relative"},fe={key:0,class:"text-xs text-rose-600"},be={class:"space-y-1"},he={class:"relative"},we={key:0,class:"text-xs text-rose-600"},_e={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ke={class:"space-y-1"},Se={class:"relative"},Ce={key:0,class:"text-xs text-rose-600"},Ae={class:"space-y-1"},Ve={class:"relative"},Pe={key:0,class:"text-xs text-rose-600"},Te={class:"space-y-2"},Ue={class:"relative"},Ee=["type"],je={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},Le={key:1,class:"text-xs text-rose-600"},qe={class:"space-y-2"},Me={class:"relative"},Ne=["type"],Re={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},Oe={key:1,class:"text-xs text-rose-600"},ze={class:"flex items-center justify-between"},Ie={class:"ml-1"},Be={class:"pt-1"},De=["disabled"],Fe=["disabled"],$e={class:"text-center text-xs"},Ge={class:"px-6 sm:px-7 pb-6"},Ke={class:"flex items-center justify-between text-[11px] text-gray-500"},He=Object.assign({name:"RegisterPage"},{__name:"RegisterPage",setup(Ze){const G=re(),c=ee(),p=l(""),v=l(""),m=l(""),g=l(""),V=l("student"),K=l(0),d=l(""),f=l(""),b=l(!1),h=l(!1),U=l(!1),E=l(!1),w=l(!1),_=l(""),k=l(!1),S=l(""),y=l(null),j=i(()=>/^[a-zA-Z0-9._-]{4,20}$/.test(p.value)),L=i(()=>/@knp\.edu\.ph$/i.test(v.value)),q=i(()=>/^(?=.*[A-Za-z])(?=.*\d).{8,}$/.test(d.value)),M=i(()=>d.value&&f.value&&d.value!==f.value),H=i(()=>captchaA.value+captchaB.value),N=i(()=>String(parseInt(captchaInput.value||"NaN",10))===String(H.value)),Z=i(()=>S.value?"text-red-600":k.value?"text-green-700":"text-gray-500"),W=i(()=>S.value?"mdi mdi-close-circle-outline":k.value?"mdi mdi-check-circle-outline":"mdi mdi-dots-horizontal-circle-outline"),Y=i(()=>S.value?"unavailable":k.value?"ready":"initializing…"),R=i(()=>j.value&&L.value&&m.value.trim().length>0&&g.value.trim().length>0&&q.value&&!M.value&&N.value&&!_.value),O=a=>a.getModifierState?a.getModifierState("CapsLock"):!1,J=()=>{const a=(e,P)=>Math.floor(Math.random()*(P-e+1))+e;captchaA.value=a(10,49),captchaB.value=a(10,49),captchaInput.value="",captchaError.value=""},Q=async()=>{if(w.value=!0,!_.value){if(!R.value){N.value||(captchaError.value="Incorrect captcha answer.");return}captchaError.value="";try{const a={username:p.value.trim(),email:v.value.trim(),password:d.value,role:V.value,is_active:K.value,first_name:m.value.trim(),last_name:g.value.trim()};await c.register(a),y.value.showToast("success","Registration successful! Please sign in."),p.value="",v.value="",m.value="",g.value="",d.value="",f.value="",captchaInput.value="",w.value=!1,setTimeout(()=>{G.push({name:"login"})},500)}catch(a){const e=a?.message||"Registration failed";y.value.showToast("warning",e),J()}}},X=()=>{try{c.startGoogleLogin("#/register")}catch(a){y.value.showToast("warning",a.message||"Unable to start Google sign-up")}},z=()=>{try{c.consumeSsoFromHash()&&y.value?.showToast("success","Signed up with school account")}catch(a){y.value?.showToast("warning",a.message||"Google sign-up failed")}},I=()=>{try{const a=window.grecaptcha?.enterprise||window.grecaptcha;a?.ready?a.ready(()=>{k.value=!0}):setTimeout(I,600)}catch{S.value="not loaded"}};return te(()=>{z(),se(()=>z()),I()}),(a,e)=>{const P=ie("router-link");return o(),r("div",ue,[e[36]||(e[36]=C('<div class="absolute inset-0" data-v-8c0a990d><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-8c0a990d></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-8c0a990d></div><div class="absolute inset-0 backdrop-blur-sm" data-v-8c0a990d></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-8c0a990d></div></div>',1)),T(c).isLoading?(o(),r("div",ce,e[12]||(e[12]=[t("div",{class:"loader"},null,-1)]))):n("",!0),t("div",pe,[t("div",ve,[e[34]||(e[34]=C('<div class="mb-6 text-center" data-v-8c0a990d><a href="index.html" class="inline-flex items-center justify-center" data-v-8c0a990d><img src="'+oe+'" alt="OSAS" class="h-14 w-auto" data-v-8c0a990d></a><h1 class="mt-4 text-2xl font-extrabold tracking-wide text-white" data-v-8c0a990d> Office of Student Affairs &amp; Services </h1><p class="mt-1 text-primary-text/90 text-sm" data-v-8c0a990d>Serve. Support. Empower.</p></div>',1)),t("div",me,[t("div",ge,[e[32]||(e[32]=C('<div class="mb-5 text-center" data-v-8c0a990d><div class="inline-flex items-center gap-2" data-v-8c0a990d><span class="inline-grid h-8 w-8 place-items-center rounded-full bg-primary/10" data-v-8c0a990d><i class="mdi mdi-account-plus text-primary text-xl" data-v-8c0a990d></i></span><h2 class="text-lg font-bold text-gray-900" data-v-8c0a990d>Create Account</h2></div><p class="text-xs text-gray-500 mt-2" data-v-8c0a990d>Fill in the details to register</p></div>',1)),t("form",{onSubmit:ae(Q,["prevent"]),class:"space-y-4",novalidate:""},[u(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>_.value=s),class:"hidden",tabindex:"-1",autocomplete:"off","aria-hidden":"true"},null,512),[[x,_.value]]),t("div",ye,[t("div",xe,[e[13]||(e[13]=t("label",{class:"sr-only"},"Username",-1)),e[14]||(e[14]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-account-outline text-gray-400 text-xl"})],-1)),u(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"Username","onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),autocomplete:"username"},null,512),[[x,p.value,void 0,{trim:!0}]])]),p.value&&!j.value?(o(),r("p",fe," Username must be 4–20 characters and use letters, numbers, dot, underscore, or hyphen. ")):n("",!0)]),t("div",be,[t("div",he,[e[15]||(e[15]=t("label",{class:"sr-only"},"Email",-1)),e[16]||(e[16]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-email-outline text-gray-400 text-xl"})],-1)),u(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"email",required:"",placeholder:"Email (must be @knp.edu.ph)","onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s),autocomplete:"email"},null,512),[[x,v.value,void 0,{trim:!0}]])]),v.value&&!L.value?(o(),r("p",we," Email must end with @knp.edu.ph ")):n("",!0)]),t("div",_e,[t("div",ke,[t("div",Se,[e[17]||(e[17]=t("label",{class:"sr-only"},"First name",-1)),e[18]||(e[18]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-card-account-details-outline text-gray-400 text-xl"})],-1)),u(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"First name","onUpdate:modelValue":e[3]||(e[3]=s=>m.value=s),autocomplete:"given-name"},null,512),[[x,m.value,void 0,{trim:!0}]])]),m.value===""&&w.value?(o(),r("p",Ce," First name is required. ")):n("",!0)]),t("div",Ae,[t("div",Ve,[e[19]||(e[19]=t("label",{class:"sr-only"},"Last name",-1)),e[20]||(e[20]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-card-account-details text-gray-400 text-xl"})],-1)),u(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"Last name","onUpdate:modelValue":e[4]||(e[4]=s=>g.value=s),autocomplete:"family-name"},null,512),[[x,g.value,void 0,{trim:!0}]])]),g.value===""&&w.value?(o(),r("p",Pe," Last name is required. ")):n("",!0)])]),u(t("input",{type:"hidden","onUpdate:modelValue":e[5]||(e[5]=s=>V.value=s)},null,512),[[x,V.value]]),t("div",Te,[t("div",Ue,[e[21]||(e[21]=t("label",{class:"sr-only"},"Password",-1)),e[22]||(e[22]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-lock-outline text-gray-400 text-xl"})],-1)),u(t("input",{type:b.value?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",placeholder:"Password","onUpdate:modelValue":e[6]||(e[6]=s=>d.value=s),onKeyup:e[7]||(e[7]=s=>U.value=O(s)),autocomplete:"new-password",minlength:"8"},null,40,Ee),[[D,d.value]]),t("button",{type:"button",onClick:e[8]||(e[8]=s=>b.value=!b.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[t("i",{class:A(b.value?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),U.value?(o(),r("div",je,e[23]||(e[23]=[t("i",{class:"mdi mdi-alert"},null,-1),t("span",null,"Caps Lock is ON",-1)]))):n("",!0),d.value&&!q.value?(o(),r("p",Le," Password must be at least 8 characters and include letters and numbers. ")):n("",!0)]),t("div",qe,[t("div",Me,[e[24]||(e[24]=t("label",{class:"sr-only"},"Confirm Password",-1)),e[25]||(e[25]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-lock-check-outline text-gray-400 text-xl"})],-1)),u(t("input",{type:h.value?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",placeholder:"Confirm password","onUpdate:modelValue":e[9]||(e[9]=s=>f.value=s),onKeyup:e[10]||(e[10]=s=>E.value=O(s)),autocomplete:"new-password",minlength:"8"},null,40,Ne),[[D,f.value]]),t("button",{type:"button",onClick:e[11]||(e[11]=s=>h.value=!h.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[t("i",{class:A(h.value?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),E.value?(o(),r("div",Re,e[26]||(e[26]=[t("i",{class:"mdi mdi-alert"},null,-1),t("span",null,"Caps Lock is ON",-1)]))):n("",!0),M.value?(o(),r("p",Oe,"Passwords do not match.")):n("",!0)]),t("div",ze,[e[27]||(e[27]=t("span",{class:"text-[11px] text-gray-500 inline-flex items-center gap-1"},[t("i",{class:"mdi mdi-shield-check-outline"}),F(" Protected by reCAPTCHA Enterprise ")],-1)),t("span",{class:A(["text-[11px]",Z.value])},[t("i",{class:A(W.value)},null,2),t("span",Ie,$(Y.value),1)],2)]),t("div",Be,[t("button",{class:"w-full py-2.5 px-4 rounded-xl bg-primary text-white font-semibold tracking-wide shadow-md hover:shadow-lg hover:bg-tertiary transition disabled:opacity-60 disabled:cursor-not-allowed",type:"submit",disabled:!R.value||T(c).isLoading},e[28]||(e[28]=[t("span",{class:"inline-flex items-center justify-center gap-2"},[t("i",{class:"mdi mdi-account-check-outline"}),t("span",null,"Create Account")],-1)]),8,De)]),e[31]||(e[31]=C('<div class="relative my-4" data-v-8c0a990d><div class="absolute inset-0 flex items-center" data-v-8c0a990d><span class="w-full border-t border-gray-200" data-v-8c0a990d></span></div><div class="relative flex justify-center text-xs" data-v-8c0a990d><span class="bg-white/80 px-2 text-gray-500" data-v-8c0a990d>or sign up with</span></div></div>',1)),t("div",null,[t("button",{type:"button",class:"w-full py-2.5 px-4 rounded-xl bg-white text-gray-800 font-semibold tracking-wide border border-gray-300/80 shadow-sm hover:shadow-md hover:bg-gray-50 transition disabled:opacity-60",disabled:T(c).isLoading,onClick:X},e[29]||(e[29]=[t("span",{class:"inline-flex items-center justify-center gap-2"},[t("i",{class:"mdi mdi-google"}),t("span",null,"Sign up with School Account"),t("span",{class:"text-xs text-gray-500"},"(knp.edu.ph)")],-1)]),8,Fe)]),t("div",$e,[B(P,{to:"/login",class:"text-primary hover:underline"},{default:le(()=>e[30]||(e[30]=[F(" Already have an account? Sign in ",-1)])),_:1,__:[30]})])],32)]),t("div",Ge,[t("div",Ke,[e[33]||(e[33]=t("span",null,"OSAS Kiosk v1.0",-1)),t("span",null,"© "+$(new Date().getFullYear())+" Student Services",1)])])]),e[35]||(e[35]=t("div",{class:"mt-6 text-center text-xs text-gray-300"},[t("p",null,"By registering, you agree to our Student Portal Guidelines.")],-1))])]),B(ne,{ref_key:"toast",ref:y},null,512)])}}}),Xe=de(He,[["__scopeId","data-v-8c0a990d"]]);export{Xe as default};
