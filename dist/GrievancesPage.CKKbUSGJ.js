import{c as y,u as te,z as le,r as R,o as J,x as ne,a as r,d as c,q as i,e as a,t as m,h as S,k as K,v as Q,j as H,C as N,g as d,F as U,B as D,E as oe,f as V,A as T,l as _,L as re,S as G}from"./index.BJlvp4Na.js";import{u as ue,v as de,y as ce,af as me,a9 as ve,aa as fe,z as pe,A as be,_ as ge,a as ye,M as X,L as we,K as xe}from"./SectionMain.DMxHESiT.js";import{_ as _e,a as Z}from"./SectionTitleLineWithButton.P4h81DEB.js";import{_ as ke,B as he,a as Ce}from"./Badge.6ksg36uK.js";import{u as ae}from"./club.DFRHvukI.js";import{u as se}from"./grievance.WTmsuQsQ.js";import{u as ie}from"./clubScope.DQ_0X4Hj.js";import{_ as L}from"./IconifyButton.BJNeCS8o.js";import"./appContext.ujt1nuvj.js";import"./activityDesignService.CxzO5bYn.js";import"./utilizationRequestService.wE-qNsi3.js";import"./liquidationFundService.DBEzh_fE.js";import"./ToasterComponent.Big7TJk-.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";const $e={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 p-4"},Se={class:"w-full max-w-3xl bg-white rounded-lg shadow-lg p-4"},Re={class:"flex items-center justify-between"},Ae={class:"font-semibold text-lg"},Be={class:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"},je={class:"md:col-span-2"},Ve=["disabled"],Te={key:0,class:"text-red-600 text-[11px] mt-0.5"},Ue=["disabled"],De=["value"],Ee={key:0,class:"text-red-600 text-[11px] mt-0.5"},Ie=["value"],ze={class:"md:col-span-2"},Me=["disabled"],Le={key:0,class:"text-red-600 text-[11px] mt-0.5"},Ne={key:0,class:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-3"},qe=["value"],Fe=["value"],Pe={key:1,class:"md:col-span-2"},Ge={class:"flex justify-end gap-1.5 mt-4"},We={class:"mt-4 border-t pt-3"},Oe={class:"flex items-center justify-between"},Ke=["disabled"],Qe={key:0,class:"mt-2 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"},Ye=["title"],He={class:"mt-1"},Je=["src"],Xe={class:"mt-2 flex justify-between items-center"},Ze=["href"],et=["onClick"],tt={key:1,class:"mt-2 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"},lt=["title"],at={class:"mt-1"},st=["src"],it={class:"mt-2 flex justify-end items-center"},nt=["onClick"],ot={key:2,class:"text-xs text-gray-500 mt-2"},ee={__name:"GrievanceFormModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"create"},initial:{type:Object,default:()=>({id:null,title:"",description:"",club_id:"",filed_by_user_id:"",assigned_to_user_id:"",status:"submitted",resolution_notes:""})}},emits:["update:modelValue","submit"],setup(f,{emit:p}){const k=f,C=p,A=y({get:()=>k.modelValue,set:v=>C("update:modelValue",v)}),$=te(),w=ae(),b=le(),E=y(()=>$.user?.id||null),q=y(()=>String($.user?.role||"").toLowerCase()),g=y(()=>["admin","manager"].includes(q.value)),{isClub:B,activeClubId:h}=ie(),o=R({...k.initial}),s=R({}),n=R(!1),u=R([]),I=se();J(async()=>{(!Array.isArray(w.clubs?.data)||!w.clubs.data.length)&&await w.fetchAll({page:1,limit:200,officer:!0},!0),(!Array.isArray(b.users?.data)||!b.users.data.length)&&await b.fetchAll({page:1,limit:200},!0),B.value&&h.value&&!o.value.club_id&&(o.value.club_id=Number(h.value))}),ne(()=>k.initial,v=>{o.value={...v},!o.value.filed_by_user_id&&E.value&&(o.value.filed_by_user_id=E.value),!o.value.club_id&&B.value&&h.value&&(o.value.club_id=Number(h.value)),s.value={}},{immediate:!0});const W=["submitted","in_review","resolved","rejected"],z=y(()=>{if(k.mode==="create"||g.value)return!1;const v=String(o.value.filed_by_user_id||"")===String($.user?.id||""),t=String(o.value.status||"")==="submitted";return!(v&&t)}),F=()=>{if(s.value={},o.value.title?.trim()||(s.value.title="Title is required"),o.value.description?.trim()||(s.value.description="Description is required"),o.value.club_id||(s.value.club_id="Club is required"),Object.keys(s.value).length)return;const v={...o.value};!o.value.id&&u.value.length&&(v.attachments=u.value.map(t=>({data:t.data,filename:t.filename,mime:t.mime}))),C("submit",v)},j=y(()=>!!o.value?.id),M=y(()=>!z.value),P=y(()=>{const v=o.value?.attachments;if(!v)return[];try{return Array.isArray(v)?v:JSON.parse(v||"[]")}catch{return[]}}),Y=async v=>{const t=v.target?.files?.[0];if(v.target.value="",!!t&&M.value){if(!j.value){const e=new FileReader;e.onload=()=>{u.value.push({data:e.result,filename:t.name,mime:t.type})},e.readAsDataURL(t);return}try{n.value=!0;const e=await I.uploadAttachment(o.value.id,t);o.value={...e}}finally{n.value=!1}}},O=async v=>{if(!M.value)return;if(!j.value){typeof v=="number"&&u.value.splice(v,1);return}const t=String(v),e=await I.deleteAttachment(o.value.id,t);o.value={...e}};return(v,t)=>A.value?(i(),r("div",$e,[a("div",Se,[a("div",Re,[a("h3",Ae,m(f.mode==="create"?"File Grievance":"Edit Grievance"),1),a("button",{class:"text-gray-500 hover:text-gray-800",onClick:t[0]||(t[0]=e=>A.value=!1)},"✕")]),a("div",Be,[a("div",je,[t[9]||(t[9]=a("label",{class:"block mb-0.5"},[K("Title "),a("span",{class:"text-red-500"},"*")],-1)),S(a("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.title=e),class:H(["w-full border rounded px-2 py-1.5",s.value.title?"border-red-500":""]),disabled:z.value},null,10,Ve),[[Q,o.value.title]]),s.value.title?(i(),r("p",Te,m(s.value.title),1)):c("",!0)]),a("div",null,[t[11]||(t[11]=a("label",{class:"block mb-0.5"},[K("Club "),a("span",{class:"text-red-500"},"*")],-1)),S(a("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.value.club_id=e),class:"w-full border rounded px-2 py-1.5",disabled:z.value||d(B)&&!!d(h)},[t[10]||(t[10]=a("option",{value:""},"Select club…",-1)),(i(!0),r(U,null,D(d(B)&&d(h)?(d(w).clubs.data||[]).filter(e=>Number(e.id)===Number(d(h))):d(w).clubs.data||[],e=>(i(),r("option",{key:e.id,value:e.id},m(e.name),9,De))),128))],8,Ue),[[N,o.value.club_id]]),s.value.club_id?(i(),r("p",Ee,m(s.value.club_id),1)):c("",!0)]),a("div",null,[t[12]||(t[12]=a("label",{class:"block mb-0.5"},"Filed By",-1)),S(a("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.value.filed_by_user_id=e),class:"w-full border rounded px-2 py-1.5",disabled:!0},[a("option",{value:d($).user?.id},m(d($).user?.first_name)+" "+m(d($).user?.last_name),9,Ie)],512),[[N,o.value.filed_by_user_id]])]),a("div",ze,[t[13]||(t[13]=a("label",{class:"block mb-0.5"},[K("Description "),a("span",{class:"text-red-500"},"*")],-1)),S(a("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.value.description=e),rows:"5",class:H(["w-full border rounded px-2 py-1.5",s.value.description?"border-red-500":""]),disabled:z.value},null,10,Me),[[Q,o.value.description]]),s.value.description?(i(),r("p",Le,m(s.value.description),1)):c("",!0)]),g.value?(i(),r("div",Ne,[a("div",null,[t[14]||(t[14]=a("label",{class:"block mb-0.5"},"Status",-1)),S(a("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.value.status=e),class:"w-full border rounded px-2 py-1.5"},[(i(),r(U,null,D(W,e=>a("option",{key:e,value:e},m(e),9,qe)),64))],512),[[N,o.value.status]])]),a("div",null,[t[16]||(t[16]=a("label",{class:"block mb-0.5"},"Assigned To",-1)),S(a("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.value.assigned_to_user_id=e),class:"w-full border rounded px-2 py-1.5"},[t[15]||(t[15]=a("option",{value:""},"— Unassigned —",-1)),(i(!0),r(U,null,D(d(b).users.data||[],e=>(i(),r("option",{key:e.id,value:e.id},m(e.first_name)+" "+m(e.last_name)+" ("+m(e.username)+") ",9,Fe))),128))],512),[[N,o.value.assigned_to_user_id]])])])):c("",!0),g.value?(i(),r("div",Pe,[t[17]||(t[17]=a("label",{class:"block mb-0.5"},"Resolution Notes",-1)),S(a("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.value.resolution_notes=e),rows:"3",class:"w-full border rounded px-2 py-1.5"},null,512),[[Q,o.value.resolution_notes]])])):c("",!0)]),a("div",Ge,[a("button",{class:"px-3 py-1.5 bg-gray-200 rounded text-xs",onClick:t[8]||(t[8]=e=>A.value=!1)},"Close"),z.value?c("",!0):(i(),r("button",{key:0,class:"px-3 py-1.5 bg-blue-600 text-white rounded text-xs",onClick:F},m(f.mode==="create"?"File Grievance":"Save Changes"),1))]),a("div",We,[a("div",Oe,[t[18]||(t[18]=a("h4",{class:"font-medium text-sm"},"Attachments",-1)),a("label",{class:H(["inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-600 text-white rounded text-xs cursor-pointer disabled:opacity-60",{"opacity-60 pointer-events-none":n.value||!M.value}])},[a("span",null,m(n.value?"Uploading…":j.value?"Upload":"Add File"),1),a("input",{type:"file",class:"hidden",disabled:n.value||!M.value,onChange:Y,accept:".png,.jpg,.jpeg,.webp,.pdf,.docx,.xlsx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,image/png,image/jpeg,image/webp"},null,40,Ke)],2)]),j.value&&P.value.length?(i(),r("div",Qe,[(i(!0),r(U,null,D(P.value,e=>(i(),r("div",{key:e.id,class:"border rounded p-2 bg-gray-50"},[a("div",{class:"text-xs font-medium truncate",title:e.filename||e.name},m(e.filename||e.name||"Attachment"),9,Ye),a("div",He,[String(e?.mime||"").startsWith("image/")&&e.data?.startsWith("data:")?(i(),r("img",{key:0,src:e.data,class:"w-full h-24 object-contain border rounded"},null,8,Je)):c("",!0)]),a("div",Xe,[e.data?.startsWith("data:")?(i(),r("a",{key:0,href:e.data,target:"_blank",class:"text-xs text-blue-600"},"Open",8,Ze)):c("",!0),M.value?(i(),r("button",{key:1,class:"text-xs text-red-600",onClick:l=>O(e.id)},"Remove",8,et)):c("",!0)])]))),128))])):c("",!0),!j.value&&u.value.length?(i(),r("div",tt,[(i(!0),r(U,null,D(u.value,(e,l)=>(i(),r("div",{key:l,class:"border rounded p-2 bg-gray-50"},[a("div",{class:"text-xs font-medium truncate",title:e.filename},m(e.filename),9,lt),a("div",at,[String(e?.mime||"").startsWith("image/")&&e.data?.startsWith("data:")?(i(),r("img",{key:0,src:e.data,class:"w-full h-24 object-contain border rounded"},null,8,st)):c("",!0)]),a("div",it,[a("button",{class:"text-xs text-red-600",onClick:x=>O(l)},"Remove",8,nt)])]))),128))])):c("",!0),j.value&&!P.value.length||!j.value&&!u.value.length?(i(),r("div",ot,"No attachments yet.")):c("",!0)])])])):c("",!0)}},rt={class:"flex items-center gap-1 md:gap-2"},ut=["aria-expanded"],dt={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24","aria-hidden":"true"},ct=["d"],mt={__name:"GrievanceRowActions",props:{row:{type:Object,required:!0},moderator:{type:Boolean,default:!1}},emits:["attachments","edit","view","markInReview","resolve","reject","delete"],setup(f,{emit:p}){const k=f,C=y(()=>String(k.row?.status||"").toLowerCase()),A=y(()=>C.value==="submitted"),$=y(()=>!0),w=y(()=>k.moderator&&C.value==="submitted"),b=y(()=>k.moderator&&C.value==="in_review"),E=y(()=>k.moderator&&C.value==="in_review"),q=y(()=>k.moderator),g=R(!1),B=R(null),h=R(null),o=s=>{if(!g.value)return;const n=B.value,u=h.value;n&&!n.contains(s.target)&&u&&!u.contains(s.target)&&(g.value=!1)};return J(()=>document.addEventListener("click",o)),oe(()=>document.removeEventListener("click",o)),(s,n)=>(i(),r("div",rt,[V(L,{"icon-path":d(ue),color:"text-indigo-600",label:"Attachments",tooltip:"Attachments",size:"sm",onClick:n[0]||(n[0]=u=>s.$emit("attachments",f.row))},null,8,["icon-path"]),$.value?(i(),T(L,{key:0,"icon-path":d(de),color:"text-gray-700",label:"View",tooltip:"View",size:"sm",onClick:n[1]||(n[1]=u=>s.$emit("view",f.row))},null,8,["icon-path"])):c("",!0),A.value?(i(),T(L,{key:1,"icon-path":d(ce),color:"text-amber-600",label:"Edit",tooltip:"Edit",size:"sm",onClick:n[2]||(n[2]=u=>s.$emit("edit",f.row))},null,8,["icon-path"])):c("",!0),w.value?(i(),T(L,{key:2,"icon-path":d(me),color:"text-blue-600",label:"In Review",tooltip:"Mark In Review",size:"sm",onClick:n[3]||(n[3]=u=>s.$emit("markInReview",f.row))},null,8,["icon-path"])):c("",!0),b.value?(i(),T(L,{key:3,"icon-path":d(ve),color:"text-emerald-600",label:"Resolve",tooltip:"Resolve",size:"sm",onClick:n[4]||(n[4]=u=>s.$emit("resolve",f.row))},null,8,["icon-path"])):c("",!0),E.value?(i(),T(L,{key:4,"icon-path":d(fe),color:"text-rose-600",label:"Reject",tooltip:"Reject",size:"sm",onClick:n[5]||(n[5]=u=>s.$emit("reject",f.row))},null,8,["icon-path"])):c("",!0),q.value?(i(),T(L,{key:5,"icon-path":d(pe),color:"text-red-600",label:"Delete",tooltip:"Delete",size:"sm",onClick:n[6]||(n[6]=u=>s.$emit("delete",f.row))},null,8,["icon-path"])):c("",!0),a("div",{class:"relative md:hidden",ref_key:"btnRef",ref:h},[a("button",{class:"inline-flex items-center justify-center rounded-xl p-1.5 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-1","aria-expanded":g.value,"aria-haspopup":"menu",title:"More",onClick:n[7]||(n[7]=u=>g.value=!g.value)},[(i(),r("svg",dt,[a("path",{d:d(be)},null,8,ct)]))],8,ut),g.value?(i(),r("div",{key:0,ref_key:"menuRef",ref:B,role:"menu",class:"absolute right-0 z-20 mt-1 w-44 overflow-hidden rounded-xl border bg-white shadow-lg"},[a("button",{role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:n[8]||(n[8]=u=>{g.value=!1,s.$emit("attachments",f.row)})},"Attachments"),$.value?(i(),r("button",{key:0,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:n[9]||(n[9]=u=>{g.value=!1,s.$emit("view",f.row)})},"View")):c("",!0),A.value?(i(),r("button",{key:1,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:n[10]||(n[10]=u=>{g.value=!1,s.$emit("edit",f.row)})},"Edit")):c("",!0),w.value?(i(),r("button",{key:2,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:n[11]||(n[11]=u=>{g.value=!1,s.$emit("markInReview",f.row)})},"Mark In Review")):c("",!0),b.value?(i(),r("button",{key:3,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:n[12]||(n[12]=u=>{g.value=!1,s.$emit("resolve",f.row)})},"Resolve")):c("",!0),E.value?(i(),r("button",{key:4,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm text-rose-600 hover:bg-rose-50",onClick:n[13]||(n[13]=u=>{g.value=!1,s.$emit("reject",f.row)})},"Reject")):c("",!0),q.value?(i(),r("button",{key:5,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50",onClick:n[14]||(n[14]=u=>{g.value=!1,s.$emit("delete",f.row)})},"Delete")):c("",!0)],512)):c("",!0)],512)]))}},vt={class:"grid grid-cols-1 md:grid-cols-4 gap-2 mb-3"},ft=["value"],pt=["value"],bt=["value"],gt={class:"flex justify-end"},Tt={__name:"GrievancesPage",setup(f){const p=se(),k=te(),C=ae(),A=le(),$=y(()=>String(k.user?.role||"").toLowerCase()),w=y(()=>["admin","manager"].includes($.value)),b=R({page:1,limit:10,q:"",status:"",club_id:"",filed_by_user_id:""}),E=["submitted","in_review","resolved","rejected"],q=t=>{switch(String(t||"").toLowerCase()){case"submitted":return"amber";case"in_review":return"blue";case"resolved":return"emerald";case"rejected":return"red";default:return"gray"}},g=y(()=>({total:p.items.total||0,totalPages:p.items.totalPages||1,currentPage:p.items.currentPage||1,pageSize:p.items.pageSize||10,data:p.items.data||[]})),{isClub:B,activeClubId:h,withClub:o}=ie(),s=async(t={},e=!0)=>{b.value={...b.value,...t};const l=o({...b.value});["q","status","club_id","filed_by_user_id"].forEach(x=>{(l[x]===""||l[x]==null)&&delete l[x]}),await p.fetchAll(l,e)};J(async()=>{await Promise.all([s({page:1,limit:10,club_id:B?h:""}),C.fetchAll({page:1,limit:200,officer:!0},!0),A.fetchAll({page:1,limit:200},!0)])});const n=[{key:"reference_code",label:"Ref Code",sortable:!0,width:140},{key:"title",label:"Title",sortable:!0,minWidth:220},{key:"club_id",label:"Club",sortable:!1},{key:"filed_by_user_id",label:"Filed By",sortable:!1},{key:"assigned_to_user_id",label:"Assignee",sortable:!1},{key:"status",label:"Status",sortable:!0,width:120},{key:"created_at",label:"Created",sortable:!0,width:160},{key:"updated_at",label:"Updated",sortable:!0,width:160},{key:"resolved_at",label:"Resolved",sortable:!0,width:160}],u=R(!1),I=R(!1),W=R(null),z=()=>{u.value=!0},F=async t=>{await p.fetchById(t.id);const e=p.selected||t;W.value={id:e.id,title:e.title||"",description:e.description||"",club_id:e.club_id||"",filed_by_user_id:e.filed_by_user_id||"",assigned_to_user_id:e.assigned_to_user_id||"",status:e.status||"submitted",resolution_notes:e.resolution_notes||""},I.value=!0},j=async t=>{await p.create(t),u.value=!1,await s({},!0)},M=async t=>{const{id:e,...l}=t;await p.updateById(e,l),I.value=!1,await s({},!0)},P=async t=>{!w.value||!(await G.fire({title:"Mark as In Review?",text:"This will move the grievance into review.",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel"})).isConfirmed||(await p.updateById(t.id,{status:"in_review"}),await s({},!0))},Y=async t=>{!w.value||!(await G.fire({title:"Resolve grievance?",text:"This will mark the grievance as resolved.",icon:"question",showCancelButton:!0,confirmButtonText:"Resolve",cancelButtonText:"Cancel"})).isConfirmed||(await p.updateById(t.id,{status:"resolved"}),await s({},!0))},O=async t=>{!w.value||!(await G.fire({title:"Reject grievance?",text:"This will mark the grievance as rejected.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Reject",cancelButtonText:"Cancel"})).isConfirmed||(await p.updateById(t.id,{status:"rejected"}),await s({},!0))},v=async t=>{if(!t?.id)return;(await G.fire({title:"Delete grievance?",text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed&&(await p.deleteById(t.id),await s({},!0),await G.fire("Deleted","The grievance has been deleted.","success"))};return(t,e)=>(i(),T(ge,null,{default:_(()=>[V(ye,null,{default:_(()=>[V(_e,{icon:d(X),title:"Grievances",main:""},{default:_(()=>[V(Z,{icon:d(we),small:"",onClick:e[0]||(e[0]=l=>s({},!0))},null,8,["icon"]),(i(),T(Z,{key:0,icon:d(xe),color:"contrast",label:"New",onClick:z},null,8,["icon"]))]),_:1},8,["icon"]),a("div",vt,[S(a("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>b.value.q=l),class:"border rounded px-2 py-1.5 text-sm",placeholder:"Search…",onKeyup:e[2]||(e[2]=re(l=>s({page:1}),["enter"]))},null,544),[[Q,b.value.q]]),S(a("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>b.value.status=l),class:"border rounded px-2 py-1.5 text-sm",onChange:e[4]||(e[4]=l=>s({page:1}))},[e[11]||(e[11]=a("option",{value:""},"All statuses",-1)),(i(),r(U,null,D(E,l=>a("option",{key:l,value:l},m(l),9,ft)),64))],544),[[N,b.value.status]]),S(a("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>b.value.club_id=l),class:"border rounded px-2 py-1.5 text-sm",onChange:e[6]||(e[6]=l=>s({page:1}))},[e[12]||(e[12]=a("option",{value:""},"All clubs",-1)),(i(!0),r(U,null,D(d(C).clubs.data||[],l=>(i(),r("option",{key:l.id,value:l.id},m(l.name),9,pt))),128))],544),[[N,b.value.club_id]]),S(a("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>b.value.filed_by_user_id=l),class:"border rounded px-2 py-1.5 text-sm",onChange:e[8]||(e[8]=l=>s({page:1}))},[e[13]||(e[13]=a("option",{value:""},"Any filer",-1)),(i(!0),r(U,null,D(d(A).users.data||[],l=>(i(),r("option",{key:l.id,value:l.id},m(l.first_name)+" "+m(l.last_name),9,bt))),128))],544),[[N,b.value.filed_by_user_id]])]),d(p).error?(i(),T(ke,{key:0,color:"danger",icon:d(X)},{default:_(()=>[K(m(d(p).error),1)]),_:1},8,["icon"])):c("",!0),V(he,{columns:n,data:g.value,loading:d(p).isLoading,onQueryChange:s},{"cell-club_id":_(({row:l})=>[a("span",null,m(l.club?.name||(d(C).clubs.data||[]).find(x=>x.id===l.club_id)?.name||""),1)]),"cell-filed_by_user_id":_(({row:l})=>[a("span",null,m(l.filed_by?.first_name||"")+" "+m(l.filed_by?.last_name||""),1)]),"cell-assigned_to_user_id":_(({row:l})=>[a("span",null,m(l.assignee?l.assignee.first_name+" "+l.assignee.last_name:"—"),1)]),"cell-status":_(({row:l})=>[V(Ce,{text:l.status,tone:q(l.status)},null,8,["text","tone"])]),"cell-created_at":_(({row:l})=>[a("span",null,m(l.created_at?new Date(l.created_at).toLocaleString():"—"),1)]),"cell-updated_at":_(({row:l})=>[a("span",null,m(l.updated_at?new Date(l.updated_at).toLocaleString():"—"),1)]),"cell-resolved_at":_(({row:l})=>[a("span",null,m(l.resolved_at?new Date(l.resolved_at).toLocaleString():"—"),1)]),"cell-actions":_(({row:l})=>[a("div",gt,[V(mt,{row:l,moderator:w.value,onAttachments:x=>F(l),onView:x=>F(l),onEdit:x=>F(l),onMarkInReview:x=>P(l),onResolve:x=>Y(l),onReject:x=>O(l),onDelete:x=>v(l)},null,8,["row","moderator","onAttachments","onView","onEdit","onMarkInReview","onResolve","onReject","onDelete"])])]),footer:_(()=>e[14]||(e[14]=[a("div",null,null,-1)])),_:1},8,["data","loading"]),V(ee,{modelValue:u.value,"onUpdate:modelValue":e[9]||(e[9]=l=>u.value=l),mode:"create",initial:{},onSubmit:j},null,8,["modelValue"]),V(ee,{modelValue:I.value,"onUpdate:modelValue":e[10]||(e[10]=l=>I.value=l),mode:"edit",initial:W.value,onSubmit:M},null,8,["modelValue","initial"])]),_:1})]),_:1}))}};export{Tt as default};
