import{r as g,x as F,A,q as l,l as L,e as n,h as Q,O as ne,_ as Y,R as Z,c as w,K as j,D as ue,E as H,a as r,V as y,d as p,f as C,F as z,B as N,t as V,g as $,v as re,Z as ie,G as de,o as ce,j as ve}from"./index.BYRo1iHr.js";import{a as P,c as me,d as fe}from"./Badge.DwigbIws.js";import{af as pe,ag as G,T as he,y as ge,ah as ye,ai as be,aj as ke,Y as we}from"./SectionMain.C-utUymm.js";import{_ as xe}from"./_plugin-vue_export-helper.DlAUqK2U.js";const _e={class:"checkbox"},J={__name:"TableCheckboxCell",props:{type:{type:String,default:"td"},modelValue:Boolean},emits:["update:modelValue"],setup(s,{emit:c}){const v=s,m=c,i=g(v.modelValue);return F(i,f=>{m("update:modelValue",f)}),F(()=>v.modelValue,f=>{i.value=f}),(f,d)=>(l(),A(Y(s.type),{class:"lg:w-1"},{default:L(()=>[n("label",_e,[Q(n("input",{"onUpdate:modelValue":d[0]||(d[0]=u=>i.value=u),type:"checkbox"},null,512),[[ne,i.value]]),d[1]||(d[1]=n("span",{class:"check"},null,-1))])]),_:1}))}},Ce=Object.assign({name:"BaseButtons"},{__name:"BaseButtons",props:{noWrap:{type:Boolean,default:!1},type:{type:String,default:"justify-start"},classAddon:{type:String,default:"mr-3 last:mr-0 mb-3"},mb:{type:String,default:"-mb-3"}},setup(s){const c=s,v=Z(),m=w(()=>{const i=!!v.default,f=["flex","items-center",c.type,c.noWrap?"flex-nowrap":"flex-wrap"];c.mb&&f.push(c.mb);const d=i?v.default().map(u=>u&&u.children&&typeof u.children=="object"?j(u,{},u.children.map(h=>j(h,{class:[c.classAddon]}))):j(u,{class:[c.classAddon]})):null;return j("div",{class:f},d)});return(i,f)=>(l(),A(Y(m.value)))}}),$e={class:"relative space-y-2"},Se={class:"flex items-center justify-between"},Be={class:"w-full border-collapse bg-white min-w-max"},Ve={class:"bg-white text-gray-700 text-sm border-b"},Pe={key:0,class:"p-2 w-10 text-center"},Ae={class:"flex items-center justify-between"},je={class:"font-medium"},Te={class:"flex items-center gap-2"},ze={key:0,class:"mt-1 p-2 border rounded bg-white shadow-md"},Ne=["onUpdate:modelValue","onInput"],Fe={key:1,class:"px-2 py-1 whitespace-nowrap text-right w-1"},Me={key:0},De=["colspan"],Ue={key:0,class:"p-2 w-10 text-center","data-label":"Select"},Le=["data-label"],Oe={key:0},Re={key:1},Ee={key:1,class:"px-4 py-2 whitespace-nowrap","data-label":"Action"},Ie={key:1,class:"border-t text-sm font-semibold bg-gray-50"},qe={key:0,class:"p-2 w-10"},Ke=["data-label"],We={key:0},Ge={key:1,class:"px-4 py-2"},Je={class:"p-3 border rounded-lg bg-white text-sm flex flex-col sm:flex-row sm:justify-between sm:items-center"},Qe={class:"mb-2 sm:mb-0"},Ye={class:"flex flex-wrap items-center gap-2"},Ze=["value"],He={__name:"BaseTable",props:{columns:{type:Array,default:()=>[]},data:{type:Object,default:()=>({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]})},checkable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showAction:{type:Boolean,default:!0}},emits:["query-change","selected","sort","filter","edit"],setup(s,{emit:c}){const v=s,m=c,i=g(null),f=ue.useLoading(),d=g(null);F(()=>v.loading,t=>{t?d.value||(d.value=f.show({container:i.value,canCancel:!1,isFullPage:!1,color:"#3b82f6",opacity:.8})):d.value&&(d.value.hide(),d.value=null)},{immediate:!0}),H(()=>{d.value&&(d.value.hide(),d.value=null)});const u=g(v.data.currentPage||1),h=g(v.data.pageSize||10),S=g(null),B=g("desc"),x=g({}),M=g({}),_=g(new Set);F(()=>v.data.currentPage,t=>u.value=t||1),F(()=>v.data.pageSize,t=>h.value=t||10);const b=w(()=>v.data||{total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),O=w(()=>b.value.data.filter(t=>Object.keys(x.value).every(o=>x.value[o]?t[o]?.toString().toLowerCase().includes(x.value[o].toLowerCase()):!0))),X=w(()=>_.value.size===O.value.length&&O.value.length>0),D=w(()=>b.value.totalPages||Math.ceil(b.value.total/h.value)||1),ee=w(()=>{const t=D.value,o=u.value,e=2,a=[];if(t<=7)for(let k=1;k<=t;k++)a.push(k);else{a.push(1);let k=Math.max(2,o-e),W=Math.min(t-1,o+e);k>2&&a.push("...");for(let R=k;R<=W;R++)a.push(R);W<t-1&&a.push("..."),a.push(t)}return a}),T=()=>{m("query-change",{page:u.value,limit:h.value,sort:S.value,order:B.value,filters:x.value})},U=t=>{t>=1&&t<=D.value&&(u.value=t,T())},te=t=>{h.value=Number(t.target.value),u.value=1,T()},E=t=>{S.value===t?B.value=B.value==="asc"?"desc":"asc":(S.value=t,B.value="desc"),m("sort",{key:S.value,order:B.value}),T()},I=t=>{M.value[t]=!M.value[t]},q=(t,o)=>{x.value[t]=o,m("filter",x.value),T()},ae=t=>{t?_.value=new Set(O.value.map(o=>o.id)):_.value.clear(),m("selected",Array.from(_.value))},le=(t,o)=>{t?_.value.add(o.id):_.value.delete(o.id),m("selected",Array.from(_.value))},se=t=>m("edit",t),K=w(()=>{const t={};return v.columns.forEach(o=>{if(o.aggregate){let e=0;b.value.data.forEach(a=>{const k=parseFloat(a[o.key]);isNaN(k)||(e+=k)}),t[o.key]=e}}),t}),oe=w(()=>v.columns.some(t=>t.aggregate));return(t,o)=>(l(),r("div",$e,[n("div",Se,[n("div",null,[y(t.$slots,"toolbar-left",{},void 0,!0)]),n("div",null,[y(t.$slots,"toolbar-right",{},void 0,!0)])]),n("div",{ref_key:"tableContainer",ref:i,class:"table-container relative rounded-lg border border-gray-200 shadow-sm bg-white"},[n("table",Be,[n("thead",Ve,[n("tr",null,[s.checkable?(l(),r("th",Pe,[C(J,{modelValue:X.value,"onUpdate:modelValue":ae},null,8,["modelValue"])])):p("",!0),(l(!0),r(z,null,N(s.columns,e=>(l(),r("th",{key:e.key,class:"px-4 py-2 text-left whitespace-nowrap"},[y(t.$slots,`header-${e.key}`,{column:e,sort:{key:S.value,order:B.value,toggle:()=>E(e.key)},filter:{value:x.value[e.key]||"",set:a=>q(e.key,a),open:!!M.value[e.key],toggle:()=>I(e.key)}},()=>[n("div",Ae,[n("span",je,V(e.label),1),n("div",Te,[e.sortable?(l(),A(P,{key:0,icon:S.value===e.key?B.value==="asc"?$(pe):$(G):$(G),small:"",onClick:a=>E(e.key)},null,8,["icon","onClick"])):p("",!0),e.filterable?(l(),A(P,{key:1,icon:$(he),small:"",onClick:a=>I(e.key)},null,8,["icon","onClick"])):p("",!0)])]),C(ie,{name:"fade"},{default:L(()=>[M.value[e.key]?(l(),r("div",ze,[Q(n("input",{"onUpdate:modelValue":a=>x.value[e.key]=a,class:"w-full px-2 py-1 text-xs border rounded",placeholder:"Filter...",onInput:a=>q(e.key,a.target.value)},null,40,Ne),[[re,x.value[e.key]]])])):p("",!0)]),_:2},1024)],!0)]))),128)),s.showAction?(l(),r("th",Fe)):p("",!0)])]),n("tbody",null,[!b.value.data.length&&!s.loading?(l(),r("tr",Me,[n("td",{colspan:s.columns.length+(s.checkable?1:0)+(s.showAction?1:0),class:"p-6"},[y(t.$slots,"empty",{},()=>[o[2]||(o[2]=n("div",{class:"text-center text-sm text-gray-500"},"No data to display.",-1))],!0)],8,De)])):p("",!0),(l(!0),r(z,null,N(b.value.data,e=>(l(),r("tr",{key:e.id??e._key??JSON.stringify(e),class:"border-t text-sm hover:bg-gray-50"},[s.checkable?(l(),r("td",Ue,[C(J,{modelValue:_.value.has(e.id),"onUpdate:modelValue":a=>le(a,e)},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0),(l(!0),r(z,null,N(s.columns,a=>(l(),r("td",{key:a.key,class:"px-4 py-2 whitespace-nowrap","data-label":a.label},[y(t.$slots,`cell-${a.key}`,{row:e,value:e[a.key],column:a},()=>[a.formatter?(l(),r("span",Oe,V(a.formatter(e[a.key],e)),1)):(l(),r("span",Re,V(e[a.key]??"-"),1))],!0)],8,Le))),128)),s.showAction?(l(),r("td",Ee,[y(t.$slots,"cell-actions",{row:e},()=>[C(Ce,null,{default:L(()=>[C(P,{icon:$(ge),small:"",onClick:a=>se(e)},null,8,["icon","onClick"])]),_:2},1024)],!0)])):p("",!0)]))),128)),oe.value?(l(),r("tr",Ie,[s.checkable?(l(),r("td",qe)):p("",!0),(l(!0),r(z,null,N(s.columns,e=>(l(),r("td",{key:e.key,class:"px-4 py-2 whitespace-nowrap","data-label":e.label},[y(t.$slots,`aggregate-${e.key}`,{value:K.value[e.key],column:e},()=>[e.aggregate?(l(),r("span",We,V(K.value[e.key]),1)):p("",!0)],!0)],8,Ke))),128)),s.showAction?(l(),r("td",Ge)):p("",!0)])):p("",!0)])]),s.loading?y(t.$slots,"loading-overlay",{key:0},void 0,!0):p("",!0)],512),y(t.$slots,"pagination",{page:u.value,pageSize:h.value,total:b.value.total,totalPages:D.value,goToPage:U,setPageSize:e=>{h.value=e,u.value=1,T()}},()=>[n("div",Je,[n("span",Qe,V(b.value.total?(u.value-1)*h.value+1:0)+" - "+V(Math.min(u.value*h.value,b.value.total))+" of "+V(b.value.total)+" items ",1),n("div",Ye,[C(P,{icon:$(ye),small:"",disabled:u.value===1,onClick:o[0]||(o[0]=e=>U(u.value-1))},null,8,["icon","disabled"]),(l(!0),r(z,null,N(ee.value,(e,a)=>(l(),A(P,{key:a,active:e!=="..."&&e===u.value,label:e,small:"",disabled:e==="...",onClick:k=>e!=="..."&&U(e)},null,8,["active","label","disabled","onClick"]))),128)),C(P,{icon:$(be),small:"",disabled:u.value===D.value,onClick:o[1]||(o[1]=e=>U(u.value+1))},null,8,["icon","disabled"]),n("select",{class:"border p-1 text-sm rounded",onChange:te,value:h.value},o[3]||(o[3]=[n("option",{value:"5"},"5 / page",-1),n("option",{value:"10"},"10 / page",-1),n("option",{value:"20"},"20 / page",-1)]),40,Ze)])])],!0)]))}},nt=xe(He,[["__scopeId","data-v-e1b863b5"]]),Xe=de({name:"BaseLevel",props:{mobile:Boolean,type:{type:String,default:"justify-between"}},render(){const s=[this.type,"items-center"],c=["flex"],v=["block","md:flex"],m=["flex","items-center","justify-center"];return j("div",{class:s.concat(this.mobile?c:v)},this.$slots.default().map((i,f)=>{const d=!this.mobile&&this.$slots.default().length>f+1?m.concat(["mb-6","md:mb-0"]):m;return j("div",{class:d},[i])}))}}),et={class:"flex flex-col md:flex-row items-center"},tt={class:"text-center md:text-left md:py-2"},ut={__name:"NotificationBar",props:{icon:{type:String,default:null},outline:Boolean,color:{type:String,required:!0},autoClose:{type:Number,default:5}},setup(s){const c=s,v=w(()=>c.outline?me[c.color]:fe[c.color]),m=g(!1);let i=null;const f=()=>{i&&(clearTimeout(i),i=null),m.value=!0},d=Z(),u=w(()=>d.right);return ce(()=>{c.autoClose>0&&(i=setTimeout(()=>{f()},c.autoClose*1e3))}),H(()=>{i&&(clearTimeout(i),i=null)}),(h,S)=>m.value?p("",!0):(l(),r("div",{key:0,class:ve([v.value,"px-3 py-6 md:py-3 mb-6 last:mb-0 border rounded-lg transition-colors duration-150"])},[C(Xe,null,{default:L(()=>[n("div",et,[s.icon?(l(),A(ke,{key:0,path:s.icon,w:"w-10 md:w-5",h:"h-10 md:h-5",size:"24",class:"md:mr-2"},null,8,["path"])):p("",!0),n("span",tt,[y(h.$slots,"default")])]),u.value?y(h.$slots,"right",{key:0}):(l(),A(P,{key:1,icon:$(we),small:"","rounded-full":"",color:"white",onClick:f},null,8,["icon"]))]),_:3})],2))}};export{nt as B,ut as _};
