import{M as n,N as f,r as d}from"./index.C4ttRr7x.js";const o={async create(e){const{data:a}=await n.post("/clubs/docs",e);return a},async getById(e){const{data:a}=await n.get(`/clubs/docs/${e}`);return a},async updateById(e,a){const{data:s}=await n.put(`/clubs/docs/${e}`,a);return s},async delete(e){const{data:a}=await n.delete(`/clubs/docs/${e}`);return a},async list(e){const{data:a}=await n.get("/clubs/docs",{params:e});return a},async listByClub(e,a={}){const s={...a,club_id:e},{data:r}=await n.get("/clubs/docs",{params:s});return r}},m=f("clubDoc",()=>{const e=d({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),a=d(!1),s=d(null),r=d(!1),u=d(null);return{docs:e,selectedDoc:u,isLoading:a,error:s,isLoaded:r,fetchAll:async(c={},t=!1)=>{if(s.value=null,!(!t&&r.value))try{a.value=!0;const l=await o.list(c);Object.assign(e.value,{total:l.total||0,totalPages:l.totalPages||1,currentPage:c.page||1,pageSize:c.limit||10,data:l.data||[]}),r.value=!0}catch(l){s.value=l?.response?.data?.message||"Failed to fetch club docs"}finally{a.value=!1}},fetchByClub:async(c,t={})=>{s.value=null;try{a.value=!0;const l=await o.listByClub(c,t);Object.assign(e.value,{total:l.total||0,totalPages:l.totalPages||1,currentPage:t.page||1,pageSize:t.limit||10,data:l.data||[]}),r.value=!0}catch(l){s.value=l?.response?.data?.message||"Failed to fetch club docs by club"}finally{a.value=!1}},fetchById:async c=>{s.value=null;try{a.value=!0;const t=await o.getById(c);u.value=t}catch(t){s.value=t?.response?.data?.message||"Failed to fetch club doc"}finally{a.value=!1}},create:async c=>{s.value=null;try{a.value=!0;const t=await o.create(c),l=e.value.data.findIndex(i=>i.id===t?.id);return l!==-1?e.value.data.splice(l,1,t):(e.value.data=[t,...e.value.data],e.value.total+=1),u.value=t,t}catch(t){throw s.value=t?.response?.data?.message||"Failed to create club doc",t}finally{a.value=!1}},updateById:async(c,t)=>{s.value=null;try{a.value=!0;const l=await o.updateById(c,t),i=e.value.data.findIndex(v=>v.id===c);return i!==-1&&e.value.data.splice(i,1,l),u.value?.id===c&&(u.value=l),l}catch(l){throw s.value=l?.response?.data?.message||"Failed to update club doc",l}finally{a.value=!1}},deleteById:async c=>{s.value=null;try{a.value=!0,await o.delete(c),e.value.data=e.value.data.filter(t=>t.id!==c),e.value.total=Math.max(0,e.value.total-1),u.value?.id===c&&(u.value=null)}catch(t){throw s.value=t?.response?.data?.message||"Failed to delete club doc",t}finally{a.value=!1}},resetStore:()=>{e.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},u.value=null,r.value=!1,a.value=!1,s.value=null}}});export{m as u};
