import{c as y,u as X,z as Z,r as R,o as Q,x as le,a as o,d as u,q as a,e as l,t as d,h as S,k as N,v as G,j as K,C as M,F as U,B as D,g as c,E as se,f as V,A as T,l as _,L as ae,S as F}from"./index.BYRo1iHr.js";import{u as ie,v as ne,y as oe,ad as re,a7 as ue,a8 as de,z as ce,A as me,_ as ve,a as fe,M as Y,L as pe,K as be}from"./SectionMain.C-utUymm.js";import{_ as ge,a as H,b as ye}from"./Badge.DwigbIws.js";import{_ as we,B as xe}from"./NotificationBar.DWDJUfEs.js";import{u as ee}from"./club.CWMcaml1.js";import{u as te}from"./grievance.DL5YDJ8h.js";import{_ as I}from"./IconifyButton.DvY5viSz.js";import"./activityDesignService.BdbRWSU9.js";import"./utilizationRequestService.DnRjYVep.js";import"./liquidationFundService.BJck3R3V.js";import"./ToasterComponent.CYeIIgn8.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";const _e={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 p-4"},ke={class:"w-full max-w-3xl bg-white rounded-lg shadow-lg p-4"},he={class:"flex items-center justify-between"},Ce={class:"font-semibold text-lg"},$e={class:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"},Se={class:"md:col-span-2"},Re=["disabled"],Ae={key:0,class:"text-red-600 text-[11px] mt-0.5"},Be=["disabled"],je=["value"],Ve={key:0,class:"text-red-600 text-[11px] mt-0.5"},Te=["value"],Ue={class:"md:col-span-2"},De=["disabled"],Ee={key:0,class:"text-red-600 text-[11px] mt-0.5"},ze={key:0,class:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-3"},Ie=["value"],Me=["value"],Le={key:1,class:"md:col-span-2"},qe={class:"flex justify-end gap-1.5 mt-4"},Fe={class:"mt-4 border-t pt-3"},Pe={class:"flex items-center justify-between"},Ne=["disabled"],Ge={key:0,class:"mt-2 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"},We=["title"],Oe={class:"mt-1"},Ke=["src"],Qe={class:"mt-2 flex justify-between items-center"},Ye=["href"],He=["onClick"],Je={key:1,class:"mt-2 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"},Xe=["title"],Ze={class:"mt-1"},et=["src"],tt={class:"mt-2 flex justify-end items-center"},lt=["onClick"],st={key:2,class:"text-xs text-gray-500 mt-2"},J={__name:"GrievanceFormModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"create"},initial:{type:Object,default:()=>({id:null,title:"",description:"",club_id:"",filed_by_user_id:"",assigned_to_user_id:"",status:"submitted",resolution_notes:""})}},emits:["update:modelValue","submit"],setup(v,{emit:f}){const k=v,C=f,A=y({get:()=>k.modelValue,set:i=>C("update:modelValue",i)}),$=X(),h=ee(),p=Z(),E=y(()=>$.user?.id||null),L=y(()=>String($.user?.role||"").toLowerCase()),b=y(()=>["admin","manager"].includes(L.value)),s=R({...k.initial}),g=R({}),x=R(!1),r=R([]),n=te();Q(async()=>{(!Array.isArray(h.clubs?.data)||!h.clubs.data.length)&&await h.fetchAll({page:1,limit:200,officer:!0},!0),(!Array.isArray(p.users?.data)||!p.users.data.length)&&await p.fetchAll({page:1,limit:200},!0)}),le(()=>k.initial,i=>{s.value={...i},!s.value.filed_by_user_id&&E.value&&(s.value.filed_by_user_id=E.value),g.value={}},{immediate:!0});const m=["submitted","in_review","resolved","rejected"],B=y(()=>{if(k.mode==="create"||b.value)return!1;const i=String(s.value.filed_by_user_id||"")===String($.user?.id||""),t=String(s.value.status||"")==="submitted";return!(i&&t)}),W=()=>{if(g.value={},s.value.title?.trim()||(g.value.title="Title is required"),s.value.description?.trim()||(g.value.description="Description is required"),s.value.club_id||(g.value.club_id="Club is required"),Object.keys(g.value).length)return;const i={...s.value};!s.value.id&&r.value.length&&(i.attachments=r.value.map(t=>({data:t.data,filename:t.filename,mime:t.mime}))),C("submit",i)},j=y(()=>!!s.value?.id),z=y(()=>!B.value),q=y(()=>{const i=s.value?.attachments;if(!i)return[];try{return Array.isArray(i)?i:JSON.parse(i||"[]")}catch{return[]}}),O=async i=>{const t=i.target?.files?.[0];if(i.target.value="",!!t&&z.value){if(!j.value){const e=new FileReader;e.onload=()=>{r.value.push({data:e.result,filename:t.name,mime:t.type})},e.readAsDataURL(t);return}try{x.value=!0;const e=await n.uploadAttachment(s.value.id,t);s.value={...e}}finally{x.value=!1}}},P=async i=>{if(!z.value)return;if(!j.value){typeof i=="number"&&r.value.splice(i,1);return}const t=String(i),e=await n.deleteAttachment(s.value.id,t);s.value={...e}};return(i,t)=>A.value?(a(),o("div",_e,[l("div",ke,[l("div",he,[l("h3",Ce,d(v.mode==="create"?"File Grievance":"Edit Grievance"),1),l("button",{class:"text-gray-500 hover:text-gray-800",onClick:t[0]||(t[0]=e=>A.value=!1)},"✕")]),l("div",$e,[l("div",Se,[t[9]||(t[9]=l("label",{class:"block mb-0.5"},[N("Title "),l("span",{class:"text-red-500"},"*")],-1)),S(l("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.value.title=e),class:K(["w-full border rounded px-2 py-1.5",g.value.title?"border-red-500":""]),disabled:B.value},null,10,Re),[[G,s.value.title]]),g.value.title?(a(),o("p",Ae,d(g.value.title),1)):u("",!0)]),l("div",null,[t[11]||(t[11]=l("label",{class:"block mb-0.5"},[N("Club "),l("span",{class:"text-red-500"},"*")],-1)),S(l("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.value.club_id=e),class:"w-full border rounded px-2 py-1.5",disabled:B.value},[t[10]||(t[10]=l("option",{value:""},"Select club…",-1)),(a(!0),o(U,null,D(c(h).clubs.data||[],e=>(a(),o("option",{key:e.id,value:e.id},d(e.name),9,je))),128))],8,Be),[[M,s.value.club_id]]),g.value.club_id?(a(),o("p",Ve,d(g.value.club_id),1)):u("",!0)]),l("div",null,[t[12]||(t[12]=l("label",{class:"block mb-0.5"},"Filed By",-1)),S(l("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.value.filed_by_user_id=e),class:"w-full border rounded px-2 py-1.5",disabled:!0},[l("option",{value:c($).user?.id},d(c($).user?.first_name)+" "+d(c($).user?.last_name),9,Te)],512),[[M,s.value.filed_by_user_id]])]),l("div",Ue,[t[13]||(t[13]=l("label",{class:"block mb-0.5"},[N("Description "),l("span",{class:"text-red-500"},"*")],-1)),S(l("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.value.description=e),rows:"5",class:K(["w-full border rounded px-2 py-1.5",g.value.description?"border-red-500":""]),disabled:B.value},null,10,De),[[G,s.value.description]]),g.value.description?(a(),o("p",Ee,d(g.value.description),1)):u("",!0)]),b.value?(a(),o("div",ze,[l("div",null,[t[14]||(t[14]=l("label",{class:"block mb-0.5"},"Status",-1)),S(l("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.value.status=e),class:"w-full border rounded px-2 py-1.5"},[(a(),o(U,null,D(m,e=>l("option",{key:e,value:e},d(e),9,Ie)),64))],512),[[M,s.value.status]])]),l("div",null,[t[16]||(t[16]=l("label",{class:"block mb-0.5"},"Assigned To",-1)),S(l("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.value.assigned_to_user_id=e),class:"w-full border rounded px-2 py-1.5"},[t[15]||(t[15]=l("option",{value:""},"— Unassigned —",-1)),(a(!0),o(U,null,D(c(p).users.data||[],e=>(a(),o("option",{key:e.id,value:e.id},d(e.first_name)+" "+d(e.last_name)+" ("+d(e.username)+") ",9,Me))),128))],512),[[M,s.value.assigned_to_user_id]])])])):u("",!0),b.value?(a(),o("div",Le,[t[17]||(t[17]=l("label",{class:"block mb-0.5"},"Resolution Notes",-1)),S(l("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.value.resolution_notes=e),rows:"3",class:"w-full border rounded px-2 py-1.5"},null,512),[[G,s.value.resolution_notes]])])):u("",!0)]),l("div",qe,[l("button",{class:"px-3 py-1.5 bg-gray-200 rounded text-xs",onClick:t[8]||(t[8]=e=>A.value=!1)},"Close"),B.value?u("",!0):(a(),o("button",{key:0,class:"px-3 py-1.5 bg-blue-600 text-white rounded text-xs",onClick:W},d(v.mode==="create"?"File Grievance":"Save Changes"),1))]),l("div",Fe,[l("div",Pe,[t[18]||(t[18]=l("h4",{class:"font-medium text-sm"},"Attachments",-1)),l("label",{class:K(["inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-600 text-white rounded text-xs cursor-pointer disabled:opacity-60",{"opacity-60 pointer-events-none":x.value||!z.value}])},[l("span",null,d(x.value?"Uploading…":j.value?"Upload":"Add File"),1),l("input",{type:"file",class:"hidden",disabled:x.value||!z.value,onChange:O,accept:".png,.jpg,.jpeg,.webp,.pdf,.docx,.xlsx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,image/png,image/jpeg,image/webp"},null,40,Ne)],2)]),j.value&&q.value.length?(a(),o("div",Ge,[(a(!0),o(U,null,D(q.value,e=>(a(),o("div",{key:e.id,class:"border rounded p-2 bg-gray-50"},[l("div",{class:"text-xs font-medium truncate",title:e.filename||e.name},d(e.filename||e.name||"Attachment"),9,We),l("div",Oe,[String(e?.mime||"").startsWith("image/")&&e.data?.startsWith("data:")?(a(),o("img",{key:0,src:e.data,class:"w-full h-24 object-contain border rounded"},null,8,Ke)):u("",!0)]),l("div",Qe,[e.data?.startsWith("data:")?(a(),o("a",{key:0,href:e.data,target:"_blank",class:"text-xs text-blue-600"},"Open",8,Ye)):u("",!0),z.value?(a(),o("button",{key:1,class:"text-xs text-red-600",onClick:w=>P(e.id)},"Remove",8,He)):u("",!0)])]))),128))])):u("",!0),!j.value&&r.value.length?(a(),o("div",Je,[(a(!0),o(U,null,D(r.value,(e,w)=>(a(),o("div",{key:w,class:"border rounded p-2 bg-gray-50"},[l("div",{class:"text-xs font-medium truncate",title:e.filename},d(e.filename),9,Xe),l("div",Ze,[String(e?.mime||"").startsWith("image/")&&e.data?.startsWith("data:")?(a(),o("img",{key:0,src:e.data,class:"w-full h-24 object-contain border rounded"},null,8,et)):u("",!0)]),l("div",tt,[l("button",{class:"text-xs text-red-600",onClick:ft=>P(w)},"Remove",8,lt)])]))),128))])):u("",!0),j.value&&!q.value.length||!j.value&&!r.value.length?(a(),o("div",st,"No attachments yet.")):u("",!0)])])])):u("",!0)}},at={class:"flex items-center gap-1 md:gap-2"},it=["aria-expanded"],nt={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24","aria-hidden":"true"},ot=["d"],rt={__name:"GrievanceRowActions",props:{row:{type:Object,required:!0},moderator:{type:Boolean,default:!1}},emits:["attachments","edit","view","markInReview","resolve","reject","delete"],setup(v,{emit:f}){const k=v,C=y(()=>String(k.row?.status||"").toLowerCase()),A=y(()=>C.value==="submitted"),$=y(()=>!0),h=y(()=>k.moderator&&C.value==="submitted"),p=y(()=>k.moderator&&C.value==="in_review"),E=y(()=>k.moderator&&C.value==="in_review"),L=y(()=>k.moderator),b=R(!1),s=R(null),g=R(null),x=r=>{if(!b.value)return;const n=s.value,m=g.value;n&&!n.contains(r.target)&&m&&!m.contains(r.target)&&(b.value=!1)};return Q(()=>document.addEventListener("click",x)),se(()=>document.removeEventListener("click",x)),(r,n)=>(a(),o("div",at,[V(I,{"icon-path":c(ie),color:"text-indigo-600",label:"Attachments",tooltip:"Attachments",size:"sm",onClick:n[0]||(n[0]=m=>r.$emit("attachments",v.row))},null,8,["icon-path"]),$.value?(a(),T(I,{key:0,"icon-path":c(ne),color:"text-gray-700",label:"View",tooltip:"View",size:"sm",onClick:n[1]||(n[1]=m=>r.$emit("view",v.row))},null,8,["icon-path"])):u("",!0),A.value?(a(),T(I,{key:1,"icon-path":c(oe),color:"text-amber-600",label:"Edit",tooltip:"Edit",size:"sm",onClick:n[2]||(n[2]=m=>r.$emit("edit",v.row))},null,8,["icon-path"])):u("",!0),h.value?(a(),T(I,{key:2,"icon-path":c(re),color:"text-blue-600",label:"In Review",tooltip:"Mark In Review",size:"sm",onClick:n[3]||(n[3]=m=>r.$emit("markInReview",v.row))},null,8,["icon-path"])):u("",!0),p.value?(a(),T(I,{key:3,"icon-path":c(ue),color:"text-emerald-600",label:"Resolve",tooltip:"Resolve",size:"sm",onClick:n[4]||(n[4]=m=>r.$emit("resolve",v.row))},null,8,["icon-path"])):u("",!0),E.value?(a(),T(I,{key:4,"icon-path":c(de),color:"text-rose-600",label:"Reject",tooltip:"Reject",size:"sm",onClick:n[5]||(n[5]=m=>r.$emit("reject",v.row))},null,8,["icon-path"])):u("",!0),L.value?(a(),T(I,{key:5,"icon-path":c(ce),color:"text-red-600",label:"Delete",tooltip:"Delete",size:"sm",onClick:n[6]||(n[6]=m=>r.$emit("delete",v.row))},null,8,["icon-path"])):u("",!0),l("div",{class:"relative md:hidden",ref_key:"btnRef",ref:g},[l("button",{class:"inline-flex items-center justify-center rounded-xl p-1.5 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-1","aria-expanded":b.value,"aria-haspopup":"menu",title:"More",onClick:n[7]||(n[7]=m=>b.value=!b.value)},[(a(),o("svg",nt,[l("path",{d:c(me)},null,8,ot)]))],8,it),b.value?(a(),o("div",{key:0,ref_key:"menuRef",ref:s,role:"menu",class:"absolute right-0 z-20 mt-1 w-44 overflow-hidden rounded-xl border bg-white shadow-lg"},[l("button",{role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:n[8]||(n[8]=m=>{b.value=!1,r.$emit("attachments",v.row)})},"Attachments"),$.value?(a(),o("button",{key:0,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:n[9]||(n[9]=m=>{b.value=!1,r.$emit("view",v.row)})},"View")):u("",!0),A.value?(a(),o("button",{key:1,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:n[10]||(n[10]=m=>{b.value=!1,r.$emit("edit",v.row)})},"Edit")):u("",!0),h.value?(a(),o("button",{key:2,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:n[11]||(n[11]=m=>{b.value=!1,r.$emit("markInReview",v.row)})},"Mark In Review")):u("",!0),p.value?(a(),o("button",{key:3,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:n[12]||(n[12]=m=>{b.value=!1,r.$emit("resolve",v.row)})},"Resolve")):u("",!0),E.value?(a(),o("button",{key:4,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm text-rose-600 hover:bg-rose-50",onClick:n[13]||(n[13]=m=>{b.value=!1,r.$emit("reject",v.row)})},"Reject")):u("",!0),L.value?(a(),o("button",{key:5,role:"menuitem",class:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50",onClick:n[14]||(n[14]=m=>{b.value=!1,r.$emit("delete",v.row)})},"Delete")):u("",!0)],512)):u("",!0)],512)]))}},ut={class:"grid grid-cols-1 md:grid-cols-4 gap-2 mb-3"},dt=["value"],ct=["value"],mt=["value"],vt={class:"flex justify-end"},Rt={__name:"GrievancesPage",setup(v){const f=te(),k=X(),C=ee(),A=Z(),$=y(()=>String(k.user?.role||"").toLowerCase()),h=y(()=>["admin","manager"].includes($.value)),p=R({page:1,limit:10,q:"",status:"",club_id:"",filed_by_user_id:""}),E=["submitted","in_review","resolved","rejected"],L=i=>{switch(String(i||"").toLowerCase()){case"submitted":return"amber";case"in_review":return"blue";case"resolved":return"emerald";case"rejected":return"red";default:return"gray"}},b=y(()=>({total:f.items.total||0,totalPages:f.items.totalPages||1,currentPage:f.items.currentPage||1,pageSize:f.items.pageSize||10,data:f.items.data||[]})),s=async(i={},t=!0)=>{p.value={...p.value,...i};const e={...p.value};["q","status","club_id","filed_by_user_id"].forEach(w=>{(e[w]===""||e[w]==null)&&delete e[w]}),await f.fetchAll(e,t)};Q(async()=>{await Promise.all([s({page:1,limit:10}),C.fetchAll({page:1,limit:200,officer:!0},!0),A.fetchAll({page:1,limit:200},!0)])});const g=[{key:"reference_code",label:"Ref Code",sortable:!0,width:140},{key:"title",label:"Title",sortable:!0,minWidth:220},{key:"club_id",label:"Club",sortable:!1},{key:"filed_by_user_id",label:"Filed By",sortable:!1},{key:"assigned_to_user_id",label:"Assignee",sortable:!1},{key:"status",label:"Status",sortable:!0,width:120},{key:"created_at",label:"Created",sortable:!0,width:160},{key:"updated_at",label:"Updated",sortable:!0,width:160},{key:"resolved_at",label:"Resolved",sortable:!0,width:160}],x=R(!1),r=R(!1),n=R(null),m=()=>{x.value=!0},B=async i=>{await f.fetchById(i.id);const t=f.selected||i;n.value={id:t.id,title:t.title||"",description:t.description||"",club_id:t.club_id||"",filed_by_user_id:t.filed_by_user_id||"",assigned_to_user_id:t.assigned_to_user_id||"",status:t.status||"submitted",resolution_notes:t.resolution_notes||""},r.value=!0},W=async i=>{await f.create(i),x.value=!1,await s({},!0)},j=async i=>{const{id:t,...e}=i;await f.updateById(t,e),r.value=!1,await s({},!0)},z=async i=>{!h.value||!(await F.fire({title:"Mark as In Review?",text:"This will move the grievance into review.",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel"})).isConfirmed||(await f.updateById(i.id,{status:"in_review"}),await s({},!0))},q=async i=>{!h.value||!(await F.fire({title:"Resolve grievance?",text:"This will mark the grievance as resolved.",icon:"question",showCancelButton:!0,confirmButtonText:"Resolve",cancelButtonText:"Cancel"})).isConfirmed||(await f.updateById(i.id,{status:"resolved"}),await s({},!0))},O=async i=>{!h.value||!(await F.fire({title:"Reject grievance?",text:"This will mark the grievance as rejected.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Reject",cancelButtonText:"Cancel"})).isConfirmed||(await f.updateById(i.id,{status:"rejected"}),await s({},!0))},P=async i=>{if(!i?.id)return;(await F.fire({title:"Delete grievance?",text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed&&(await f.deleteById(i.id),await s({},!0),await F.fire("Deleted","The grievance has been deleted.","success"))};return(i,t)=>(a(),T(ve,null,{default:_(()=>[V(fe,null,{default:_(()=>[V(ge,{icon:c(Y),title:"Grievances",main:""},{default:_(()=>[V(H,{icon:c(pe),small:"",onClick:t[0]||(t[0]=e=>s({},!0))},null,8,["icon"]),(a(),T(H,{key:0,icon:c(be),color:"contrast",label:"New",onClick:m},null,8,["icon"]))]),_:1},8,["icon"]),l("div",ut,[S(l("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>p.value.q=e),class:"border rounded px-2 py-1.5 text-sm",placeholder:"Search…",onKeyup:t[2]||(t[2]=ae(e=>s({page:1}),["enter"]))},null,544),[[G,p.value.q]]),S(l("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>p.value.status=e),class:"border rounded px-2 py-1.5 text-sm",onChange:t[4]||(t[4]=e=>s({page:1}))},[t[11]||(t[11]=l("option",{value:""},"All statuses",-1)),(a(),o(U,null,D(E,e=>l("option",{key:e,value:e},d(e),9,dt)),64))],544),[[M,p.value.status]]),S(l("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>p.value.club_id=e),class:"border rounded px-2 py-1.5 text-sm",onChange:t[6]||(t[6]=e=>s({page:1}))},[t[12]||(t[12]=l("option",{value:""},"All clubs",-1)),(a(!0),o(U,null,D(c(C).clubs.data||[],e=>(a(),o("option",{key:e.id,value:e.id},d(e.name),9,ct))),128))],544),[[M,p.value.club_id]]),S(l("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>p.value.filed_by_user_id=e),class:"border rounded px-2 py-1.5 text-sm",onChange:t[8]||(t[8]=e=>s({page:1}))},[t[13]||(t[13]=l("option",{value:""},"Any filer",-1)),(a(!0),o(U,null,D(c(A).users.data||[],e=>(a(),o("option",{key:e.id,value:e.id},d(e.first_name)+" "+d(e.last_name),9,mt))),128))],544),[[M,p.value.filed_by_user_id]])]),c(f).error?(a(),T(we,{key:0,color:"danger",icon:c(Y)},{default:_(()=>[N(d(c(f).error),1)]),_:1},8,["icon"])):u("",!0),V(xe,{columns:g,data:b.value,loading:c(f).isLoading,onQueryChange:s},{"cell-club_id":_(({row:e})=>[l("span",null,d(e.club?.name||(c(C).clubs.data||[]).find(w=>w.id===e.club_id)?.name||""),1)]),"cell-filed_by_user_id":_(({row:e})=>[l("span",null,d(e.filed_by?.first_name||"")+" "+d(e.filed_by?.last_name||""),1)]),"cell-assigned_to_user_id":_(({row:e})=>[l("span",null,d(e.assignee?e.assignee.first_name+" "+e.assignee.last_name:"—"),1)]),"cell-status":_(({row:e})=>[V(ye,{text:e.status,tone:L(e.status)},null,8,["text","tone"])]),"cell-created_at":_(({row:e})=>[l("span",null,d(e.created_at?new Date(e.created_at).toLocaleString():"—"),1)]),"cell-updated_at":_(({row:e})=>[l("span",null,d(e.updated_at?new Date(e.updated_at).toLocaleString():"—"),1)]),"cell-resolved_at":_(({row:e})=>[l("span",null,d(e.resolved_at?new Date(e.resolved_at).toLocaleString():"—"),1)]),"cell-actions":_(({row:e})=>[l("div",vt,[V(rt,{row:e,moderator:h.value,onAttachments:w=>B(e),onView:w=>B(e),onEdit:w=>B(e),onMarkInReview:w=>z(e),onResolve:w=>q(e),onReject:w=>O(e),onDelete:w=>P(e)},null,8,["row","moderator","onAttachments","onView","onEdit","onMarkInReview","onResolve","onReject","onDelete"])])]),footer:_(()=>t[14]||(t[14]=[l("div",null,null,-1)])),_:1},8,["data","loading"]),V(J,{modelValue:x.value,"onUpdate:modelValue":t[9]||(t[9]=e=>x.value=e),mode:"create",initial:{},onSubmit:W},null,8,["modelValue"]),V(J,{modelValue:r.value,"onUpdate:modelValue":t[10]||(t[10]=e=>r.value=e),mode:"edit",initial:n.value,onSubmit:j},null,8,["modelValue","initial"])]),_:1})]),_:1}))}};export{Rt as default};
