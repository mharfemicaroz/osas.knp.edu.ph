import{c as r,a as c,b as m,d as t,e as g,t as n,r as u,u as x,o}from"./index.kywONoMW.js";import{T as b}from"./ToasterComponent.XRVHT5gm.js";import{_ as p}from"./logo.Dx3Q79ni.js";import{_ as v}from"./_plugin-vue_export-helper.DlAUqK2U.js";const f={name:"VerifyingNow",components:{ToasterComponent:b},data(){return{state:"loading",countdown:3,tHandle:null,errorMsg:""}},computed:{auth(){return x()},token(){return this.$route.query.token||""}},methods:{async verify(){if(!this.token){this.state="error",this.errorMsg="Missing verification token.";return}try{await this.auth.verifyEmail(this.token),this.state="success",this.$refs.toast?.showToast("success","Email verified!"),this.startCountdown()}catch(l){this.state="error",this.errorMsg=l.message||"Verification failed.",this.$refs.toast?.showToast("warning",this.errorMsg)}},startCountdown(){this.tHandle=setInterval(()=>{this.countdown>0&&(this.countdown-=1),this.countdown===0&&(clearInterval(this.tHandle),this.goLogin())},1e3)},goLogin(){this.$router.replace({name:"login"})},retry(){this.state="loading",this.errorMsg="",this.verify()}},mounted(){this.verify()},unmounted(){this.tHandle&&clearInterval(this.tHandle)}},h={class:"min-h-screen relative overflow-hidden"},y={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},_={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},w={class:"w-full max-w-md"},k={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 transition"},S={class:"p-6 sm:p-7 text-center"},C={key:0,class:"space-y-3"},V={class:"text-sm text-gray-600"},L={key:1,class:"space-y-3"},T={class:"text-sm text-gray-600"},M={key:2,class:"space-y-3"},N={class:"px-6 sm:px-7 pb-6"},H={class:"flex items-center justify-between text-[11px] text-gray-500"};function B(l,e,E,I,a,s){const d=u("ToasterComponent");return o(),r("div",h,[e[11]||(e[11]=c('<div class="absolute inset-0" data-v-48679d0e><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-48679d0e></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-48679d0e></div><div class="absolute inset-0 backdrop-blur-sm" data-v-48679d0e></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-48679d0e></div></div>',1)),s.auth.isLoading?(o(),r("div",y,e[3]||(e[3]=[t("div",{class:"loader"},null,-1)]))):m("",!0),t("div",_,[t("div",w,[e[10]||(e[10]=t("div",{class:"mb-6 text-center"},[t("img",{src:p,alt:"OSAS",class:"h-14 w-auto mx-auto"}),t("h1",{class:"mt-4 text-2xl font-extrabold tracking-wide text-white"},"Email Verification"),t("p",{class:"mt-1 text-primary-text/90 text-sm"},"Secure. Simple. Seamless.")],-1)),t("div",k,[t("div",S,[a.state==="success"?(o(),r("div",C,[e[4]||(e[4]=t("div",{class:"inline-grid h-12 w-12 place-items-center rounded-full bg-emerald-500/10 mx-auto"},[t("i",{class:"mdi mdi-check-decagram text-3xl text-emerald-600"})],-1)),e[5]||(e[5]=t("h2",{class:"text-lg font-bold text-gray-900"},"Your email is verified!",-1)),t("p",V,"Redirecting to login in "+n(a.countdown)+"s…",1),t("button",{class:"mt-2 py-2.5 px-4 rounded-xl bg-primary text-white font-semibold hover:bg-tertiary transition",onClick:e[0]||(e[0]=(...i)=>s.goLogin&&s.goLogin(...i))}," Go to Login now ")])):a.state==="error"?(o(),r("div",L,[e[6]||(e[6]=t("div",{class:"inline-grid h-12 w-12 place-items-center rounded-full bg-rose-500/10 mx-auto"},[t("i",{class:"mdi mdi-alert-circle-outline text-3xl text-rose-600"})],-1)),e[7]||(e[7]=t("h2",{class:"text-lg font-bold text-gray-900"},"Verification failed",-1)),t("p",T,n(a.errorMsg||"The link may be invalid or expired."),1),t("button",{class:"mt-2 py-2.5 px-4 rounded-xl border border-gray-300/80 bg-white/70 font-semibold hover:bg-white transition",onClick:e[1]||(e[1]=(...i)=>s.retry&&s.retry(...i))}," Try again "),t("button",{class:"mt-2 ml-2 py-2.5 px-4 rounded-xl bg-primary text-white font-semibold hover:bg-tertiary transition",onClick:e[2]||(e[2]=(...i)=>s.goLogin&&s.goLogin(...i))}," Back to Login ")])):(o(),r("div",M,e[8]||(e[8]=[t("div",{class:"inline-grid h-12 w-12 place-items-center rounded-full bg-primary/10 mx-auto"},[t("i",{class:"mdi mdi-email-check-outline text-3xl text-primary"})],-1),t("h2",{class:"text-lg font-bold text-gray-900"},"Verifying your email…",-1),t("p",{class:"text-sm text-gray-600"},"Please wait a moment.",-1)])))]),t("div",N,[t("div",H,[e[9]||(e[9]=t("span",null,"OSAS Kiosk v1.0",-1)),t("span",null,"© "+n(new Date().getFullYear())+" Student Services",1)])])])])]),g(d,{ref:"toast"},null,512)])}const O=v(f,[["render",B],["__scopeId","data-v-48679d0e"]]);export{O as default};
