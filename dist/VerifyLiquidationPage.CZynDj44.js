import{r as d,o as h,s as w,x as k,a as i,e as t,t as l,j as C,d as g,q as o}from"./index.w1fTWaRQ.js";import{l as p}from"./liquidationFundService.n_EUG0wO.js";import{Q as q}from"./browser.CYIVxMbb.js";const L={class:"min-h-screen bg-gray-50 flex items-center justify-center p-4"},N={class:"w-full max-w-2xl bg-white rounded-2xl shadow border p-5"},B={key:0,class:"text-sm text-gray-600"},D={key:1,class:"text-sm text-rose-600"},F={key:2,class:"text-sm text-gray-600"},S={key:3,class:"space-y-3"},U={class:"flex items-center gap-2 text-sm"},V={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm"},I={class:"font-medium"},Q={class:"font-medium"},j={class:"font-medium"},z={class:"font-medium"},A={class:"pt-3 border-t flex items-center gap-3"},T=["src"],$={class:"flex-1 min-w-0"},E={class:"text-sm truncate"},M={class:"mt-2 flex items-center gap-2"},P={key:0,class:"text-[11px] text-emerald-600"},H={__name:"VerifyLiquidationPage",setup(R){const y=w(),v=d(!1),n=d(""),s=d(null),r=d(""),u=d(""),m=d(!1);function _(a){return/^[0-9]+$/.test(String(a||"").trim())}async function f(a){if(n.value="",s.value=null,!a){n.value="Missing id parameter";return}try{if(v.value=!0,_(a))s.value=await p.getById(a);else{const e=await p.list({q:a,limit:1,page:1});s.value=Array.isArray(e?.data)&&e.data.length?e.data[0]:null}s.value||(n.value="No matching Liquidation Fund found")}catch(e){n.value=e?.response?.data?.message||e?.message||"Failed to verify"}finally{v.value=!1}}function c(a){const e=String(a||"").toLowerCase();return e==="approved"||e==="completed"?"emerald":e==="pending"?"amber":e==="rejected"||e==="cancelled"?"rose":"zinc"}h(()=>{r.value=window.location.href,x(),f(y.query.id)}),k(()=>y.query.id,a=>{f(a),r.value=window.location.href,x()});async function x(){try{u.value=await q.toDataURL(r.value,{margin:0,width:140})}catch{u.value=""}}async function b(){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(r.value);else{const a=document.createElement("textarea");a.value=r.value,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)}m.value=!0,setTimeout(()=>m.value=!1,1500)}catch{}}return(a,e)=>(o(),i("div",L,[t("div",N,[e[6]||(e[6]=t("div",{class:"mb-4"},[t("h1",{class:"text-lg font-semibold"},"Verify: Liquidation Fund"),t("p",{class:"text-xs text-gray-500"},"Public verification page")],-1)),v.value?(o(),i("div",B,"Loading…")):n.value?(o(),i("div",D,l(n.value),1)):s.value?(o(),i("div",S,[t("div",U,[t("span",{class:C(["px-2 py-0.5 rounded-full text-xs",{"bg-emerald-100 text-emerald-700":c(s.value.status)==="emerald","bg-amber-100 text-amber-700":c(s.value.status)==="amber","bg-rose-100 text-rose-700":c(s.value.status)==="rose","bg-gray-200 text-gray-700":c(s.value.status)==="zinc"}])},l((s.value.status||"").toUpperCase()||"UNKNOWN"),3),e[0]||(e[0]=t("span",{class:"text-gray-500"},"Status",-1))]),t("div",V,[t("div",null,[e[1]||(e[1]=t("div",{class:"text-gray-500"},"Reference",-1)),t("div",I,l(s.value.reference_code||"—"),1)]),t("div",null,[e[2]||(e[2]=t("div",{class:"text-gray-500"},"ID",-1)),t("div",Q,l(s.value.id),1)]),t("div",null,[e[3]||(e[3]=t("div",{class:"text-gray-500"},"Activity Design",-1)),t("div",j,l(s.value?.activity_design?.name_of_activity||"—"),1)]),t("div",null,[e[4]||(e[4]=t("div",{class:"text-gray-500"},"Filed By",-1)),t("div",z,l(s.value?.file_by_user_name||(s.value?.filed_by?`${s.value.filed_by.first_name||""} ${s.value.filed_by.last_name||""}`.trim():"—")),1)])]),t("div",A,[u.value?(o(),i("img",{key:0,src:u.value,alt:"QR",class:"w-24 h-24 border rounded"},null,8,T)):g("",!0),t("div",$,[e[5]||(e[5]=t("div",{class:"text-xs text-gray-500 mb-1"},"Verification Link",-1)),t("div",E,l(r.value),1),t("div",M,[t("button",{class:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded",onClick:b},"Copy Link"),m.value?(o(),i("span",P,"Copied!")):g("",!0)])])])])):(o(),i("div",F,"No data."))])]))}};export{H as default};
