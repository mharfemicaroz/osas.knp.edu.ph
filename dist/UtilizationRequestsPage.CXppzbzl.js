import{c as W,r as h,x as ye,a as _,d as q,q as b,e as l,k as le,t as R,j as xe,g as T,F as Z,B as ie,S as x,o as ve,f as k,h as L,v as K,C as de,u as Ve,z as Ie,l as M,A as _e,L as De,P as we}from"./index.CogHg4rp.js";import{E as Pe,a as I,d as be,Q as Ce,_ as Le}from"./dayjs.min.CKz0--dG.js";import{B as Ne,E as Oe,F as Ye,G as je,H as Me,I as qe,C as We,D as Ge,z as Ke,_ as Qe,a as He,g as Je,J as Xe,i as Ze,a5 as et,K as tt,L as at,M as lt,T as it}from"./SectionMain.Camu0wne.js";import{_ as nt,a as re,b as fe}from"./Badge.Up2DqiRl.js";import{_ as st,B as ot}from"./NotificationBar.C_cXw3cK.js";import{_ as Se}from"./UtilizationRequestFormModal.C7GS25Ox.js";import{u as ce}from"./utilizationRequest.CZMKl5EE.js";import{i as rt,a as dt,b as ct,F as ut}from"./index.CNZIpUkm.js";import{Q as mt}from"./browser.BBSiSowz.js";import"./IconifyButton.C0kYFeFc.js";import"./activityDesignService.Dgqxj02-.js";import"./utilizationRequestService.u4yMTSgC.js";import"./liquidationFundService.COiPrIQO.js";import"./ToasterComponent.CHXBIuQk.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";import"./activityDesign.CZcVzQ8j.js";const pt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},ft={class:"bg-white p-4 rounded-xl shadow-xl w-[980px] max-h-screen overflow-auto"},yt={class:"flex items-center justify-between mb-3"},vt={class:"text-lg font-semibold"},gt={class:"text-gray-600"},bt={class:"flex items-center justify-between gap-2"},ht={class:"text-sm text-gray-600"},xt={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24","aria-hidden":"true"},_t=["d"],wt=["disabled"],Ct={class:"mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"},St={class:"aspect-video bg-white border rounded overflow-hidden flex items-center justify-center"},At=["src"],kt={key:1,class:"flex items-center justify-center w-full h-full"},Tt=["d"],Et={class:"mt-2 text-xs"},Ft=["title"],$t={class:"text-gray-500 flex items-center justify-between"},Bt={key:0},Rt={key:0},zt={class:"mt-2 flex items-center justify-between gap-2"},Ut=["onClick","title"],Vt={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24","aria-hidden":"true"},It=["d"],Dt=["onClick"],Pt={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24","aria-hidden":"true"},Lt=["d"],Nt={key:0,class:"mt-6 text-center text-sm text-gray-500"},Ot=10*1024*1024,Yt={__name:"UtilizationAttachmentsModal",props:{modelValue:{type:Boolean,default:!1},row:{type:Object,default:null}},emits:["update:modelValue"],setup(e,{emit:i}){const v=e,c=i,f=W({get:()=>v.modelValue,set:a=>c("update:modelValue",a)}),g=ce(),r=h(null),w=h(!1),$=new Set(["image/png","image/jpeg","image/webp","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]),B=new Set(["png","jpg","jpeg","webp","pdf","docx","xlsx"]),z=(a="")=>String(a).toLowerCase().match(/\.([a-z0-9]+)$/i)?.[1]||"",y=(a="")=>typeof a=="string"&&a.match(/^data:([^;]+);base64,/i)?.[1]||"",D=a=>{const m=a?.type&&$.has(a.type),p=a?.name&&B.has(z(a.name));return m||p},S=(a="")=>String(a).startsWith("image/"),d=(a="")=>a==="application/pdf",s=(a="")=>a==="application/vnd.openxmlformats-officedocument.wordprocessingml.document",u=(a="")=>a==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",P=(a="")=>d(a)?Oe:s(a)?Ye:u(a)?je:S(a)?Me:qe,N=(a="")=>d(a)?"PDF":s(a)?"Word":u(a)?"Excel":S(a)?"Image":"File",C=(a="")=>d(a)?"pdf":s(a)?"docx":u(a)?"xlsx":a==="image/png"?"png":a==="image/jpeg"?"jpg":a==="image/webp"?"webp":"",F=(a="attachment",m="")=>/\.[a-z0-9]+$/i.test(a)?a:m?`${a}.${m.startsWith(".")?m.slice(1):m}`:a,O=a=>a<1024?`${a} B`:a<1024*1024?`${(a/1024).toFixed(1)} KB`:`${(a/(1024*1024)).toFixed(1)} MB`,Y=W(()=>{const a=r.value?.attachments;if(!a)return[];try{return Array.isArray(a)?a:JSON.parse(a||"[]")}catch{return[]}}),A=W(()=>(Y.value||[]).map((a,m)=>{const p=a.mime||y(a.data)||(a.name?z(a.name)==="pdf"&&"application/pdf":"")||"",V=z(a.name||"")||C(p),te=a.size??null,X=a.name||`${N(p)} ${m+1}`;return{id:a.id??m+1,name:X,data:a.data||"",url:a.url||a.href||a.path||"",mime:p,ext:V,size:te,filename:F(X,V)}}));ye(()=>v.modelValue,async a=>{a&&v.row?.id&&(await g.fetchById(v.row.id),r.value=g.selected||v.row)},{immediate:!1});const U=async a=>{const m=a.target.files?.[0];if(a.target.value="",!(!m||!r.value?.id)){if(m.size>Ot){await x.fire("File too large","Maximum size is 10 MB.","warning");return}if(!D(m)){await x.fire("Unsupported file","Only images (PNG/JPEG/WEBP), PDF, DOCX, and XLSX are allowed.","warning");return}try{w.value=!0,await g.uploadAttachment(r.value.id,m),await g.fetchById(r.value.id),r.value=g.selected}finally{w.value=!1}}},j=async a=>{!r.value?.id||!(await x.fire({title:"Remove attachment?",icon:"warning",showCancelButton:!0,confirmButtonText:"Remove",confirmButtonColor:"#d33"})).isConfirmed||(await g.deleteAttachment(r.value.id,a),await g.fetchById(r.value.id),r.value=g.selected)},Q=a=>{if(a.data&&String(a.data).startsWith("data:")&&S(a.mime)){const m=window.open();m&&m.document.write(`<img src="${a.data}" style="display:block;max-width:100%;height:auto;margin:0 auto;object-fit:contain"/>`);return}a.url&&window.open(String(a.url),"_blank")},H=a=>{const[m,p]=a.split(","),V=m.match(/data:([^;]+);base64/i)?.[1]||"application/octet-stream",te=atob(p),X=te.length,se=new Uint8Array(X);for(let ae=0;ae<X;ae++)se[ae]=te.charCodeAt(ae);return new Blob([se],{type:V})},G=(a,m)=>{const p=URL.createObjectURL(a),V=document.createElement("a");V.href=p,V.download=m||"download",document.body.appendChild(V),V.click(),V.remove(),setTimeout(()=>URL.revokeObjectURL(p),1e3)},ue=async a=>{if(a.data&&String(a.data).startsWith("data:")){const m=H(a.data);G(m,a.filename);return}if(a.url)try{const p=await(await fetch(a.url,{credentials:"include"})).blob();G(p,a.filename)}catch{const m=document.createElement("a");m.href=String(a.url),m.setAttribute("download",a.filename),document.body.appendChild(m),m.click(),m.remove()}},ne=a=>S(a.mime)?"Open":"Download",J=a=>S(a.mime)?We:Ge,ee=a=>S(a.mime)?Q(a):ue(a);return(a,m)=>f.value?(b(),_("div",pt,[l("div",ft,[l("div",yt,[l("h2",vt,[m[1]||(m[1]=le(" Utilization Attachments — ",-1)),l("span",gt,R(r.value?.reference_code||""),1)]),l("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:m[0]||(m[0]=p=>f.value=!1)},"Close")]),l("div",bt,[l("div",ht,[m[2]||(m[2]=le(" Activity: ",-1)),l("strong",null,R(r.value?.activity_design?.name_of_activity||"—"),1)]),l("label",{class:xe(["inline-flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white rounded text-xs cursor-pointer disabled:opacity-60",{"opacity-60 pointer-events-none":w.value}])},[(b(),_("svg",xt,[l("path",{d:T(Ne)},null,8,_t)])),l("span",null,R(w.value?"Uploading…":"Upload"),1),l("input",{type:"file",class:"hidden",disabled:w.value,onChange:U,accept:".png,.jpg,.jpeg,.webp,.pdf,.docx,.xlsx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,image/png,image/jpeg,image/webp"},null,40,wt)],2)]),l("div",Ct,[(b(!0),_(Z,null,ie(A.value,p=>(b(),_("div",{key:p.id,class:"border rounded-lg p-2 bg-gray-50 flex flex-col"},[l("div",St,[S(p.mime)&&p.data&&p.data.startsWith("data:")?(b(),_("img",{key:0,src:p.data,class:"object-contain w-full h-full",alt:"Attachment preview"},null,8,At)):(b(),_("div",kt,[(b(),_("svg",{style:{width:"64px",height:"64px"},viewBox:"0 0 24 24","aria-hidden":"true",class:xe({"text-red-600":d(p.mime),"text-blue-600":s(p.mime),"text-emerald-600":u(p.mime),"text-gray-500":!p.mime||!S(p.mime)&&!d(p.mime)})},[l("path",{d:P(p.mime)},null,8,Tt)],2))]))]),l("div",Et,[l("div",{class:"font-medium truncate",title:p.name},R(p.name),9,Ft),l("div",$t,[l("span",null,[le(R(N(p.mime))+" ",1),p.ext?(b(),_("span",Bt,"("+R(p.ext.toUpperCase())+")",1)):q("",!0)]),p.size?(b(),_("span",Rt,R(O(p.size)),1)):q("",!0)])]),l("div",zt,[l("button",{class:"inline-flex items-center gap-1 px-2 py-1 bg-white border rounded text-xs hover:bg-gray-50",onClick:V=>ee(p),title:ne(p)},[(b(),_("svg",Vt,[l("path",{d:J(p)},null,8,It)])),le(" "+R(ne(p)),1)],8,Ut),l("button",{class:"inline-flex items-center gap-1 px-2 py-1 bg-red-600 text-white rounded text-xs",onClick:V=>j(p.id),title:"Remove"},[(b(),_("svg",Pt,[l("path",{d:T(Ke)},null,8,Lt)])),m[3]||(m[3]=le(" Remove ",-1))],8,Dt)])]))),128))]),A.value.length?q("",!0):(b(),_("div",Nt," No attachments yet. "))])])):q("",!0)}},jt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 backdrop-blur-sm"},Mt={class:"bg-white rounded-2xl shadow-2xl w-full sm:w-[1200px] max-w-[100vw] sm:max-w-[95vw] h-[100vh] sm:h-auto sm:max-h-[90vh] overflow-hidden"},qt={class:"px-4 py-3 border-b flex items-center justify-between"},Wt={class:"p-2 overflow-auto"},Gt={__name:"CalendarViewModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","open"],setup(e,{emit:i}){const v=e,c=i,f=W({get:()=>v.modelValue,set:d=>c("update:modelValue",d)}),g=ce(),r=h([]),w=(d,s=[])=>{if(Array.isArray(d))return d;try{return JSON.parse(d||"[]")||s}catch{return s}},$=(d=[])=>{r.value=d.map(s=>{const u=w(s.facilities),P=[];s.activity_design?.name_of_activity&&P.push(s.activity_design.name_of_activity),u.length&&P.push(u.join(", "));const N=P.join(" — ")||s.reference_code||"Utilization",C=s.start_date&&s.start_time&&`${s.start_date}T${s.start_time}:00`||s.start_at||null,F=s.end_date&&s.end_time&&`${s.end_date}T${s.end_time}:00`||s.end_at||null;return!C||!F?null:{id:String(s.id),title:N,start:C,end:F,backgroundColor:"#10b981",borderColor:"#0ea5e9",textColor:"#0b1b13",extendedProps:{reference_code:s.reference_code,facilities:u,availability_status:s.availability_status,status:s.status}}}).filter(Boolean)},B=async()=>{await g.fetchAll({page:1,limit:500,status:"approved",order:"ASC",sort:"start_at"},!0),$(g.items.data||[])},z=d=>{const s=d?.event?.id;s&&c("open",Number(s))},y=h(!1),D=()=>{y.value=window.innerWidth<640};ve(()=>{D(),window.addEventListener("resize",D)});const S=W(()=>({plugins:[rt,dt,ct],initialView:"dayGridMonth",headerToolbar:y.value?{left:"prev,next",center:"title",right:"dayGridMonth"}:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},height:"auto",handleWindowResize:!0,expandRows:!0,navLinks:!0,eventDisplay:"block",eventClick:z,events:r.value}));return ye(()=>v.modelValue,d=>{d&&B()}),ye(()=>g.items.data,d=>{f.value&&$(d||[])},{deep:!0}),ve(()=>{f.value&&B()}),(d,s)=>f.value?(b(),_("div",jt,[l("div",Mt,[l("div",qt,[s[1]||(s[1]=l("h2",{class:"text-base font-semibold"},"Utilization Calendar (Approved)",-1)),l("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:s[0]||(s[0]=u=>f.value=!1)},"Close")]),l("div",Wt,[k(T(ut),{options:S.value},null,8,["options"])]),s[2]||(s[2]=l("div",{class:"px-4 py-2 text-[11px] text-gray-500 border-t"}," Click an event to open it. ",-1))])])):q("",!0)}},Kt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},Qt={class:"bg-white p-3 md:p-4 rounded-xl shadow-lg w-[560px] max-h-[85vh] overflow-y-auto"},Ht={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm"},Jt={class:"md:col-span-2"},Xt=["value"],Zt={__name:"QuickAvailabilityModal",props:{modelValue:{type:Boolean,default:!1},facilities:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:i}){const v=e,c=i,f=ce(),g=h(""),r=h("08:00"),w=h(""),$=h("10:00"),B=h([]),z=W(()=>(B.value||[]).filter(d=>v.facilities.includes(d))),y=()=>c("update:modelValue",!1),D=()=>{g.value="",r.value="08:00",w.value="",$.value="10:00",B.value=[]},S=async()=>{if(!g.value||!w.value||!z.value.length){await x.fire("Missing fields","Start/End dates and at least one facility are required.","info");return}try{const d=await f.checkAvailability({start_date:g.value,start_time:r.value||"00:00",end_date:w.value,end_time:$.value||"00:00",facilities:z.value}),s=d.available_for_all?"All selected facilities are available.":`Conflicts on: ${(d.conflict_facilities||[]).join(", ")||"—"}`;await x.fire({icon:d.available_for_all?"success":"warning",title:"Availability Result",html:`<div class="text-left text-sm">
        <div><strong>Facilities:</strong> ${(d.facilities||[]).join(", ")}</div>
        <div class="mt-2"><strong>Status:</strong> ${s}</div>
        <div class="mt-2"><strong>Conflicts:</strong> ${Array.isArray(d.conflicts)&&d.conflicts.length?`<ul class="list-disc ml-5">${d.conflicts.map(u=>`<li>${u.reference_code} — ${new Date(u.start_at).toLocaleString()} to ${new Date(u.end_at).toLocaleString()}</li>`).join("")}</ul>`:"None"}</div>
      </div>`})}catch(d){await x.fire("Error",f.error||"Failed to check availability.","error"),console.error(d)}};return(d,s)=>e.modelValue?(b(),_("div",Kt,[l("div",Qt,[l("div",{class:"flex items-center justify-between mb-2"},[s[5]||(s[5]=l("h3",{class:"text-base font-semibold"},"Quick Availability Check",-1)),l("button",{class:"px-2.5 py-1 text-[11px] bg-gray-200 rounded",onClick:y},"Close")]),l("div",Ht,[l("div",null,[s[6]||(s[6]=l("label",{class:"block mb-0.5"},"Start Date",-1)),L(l("input",{"onUpdate:modelValue":s[0]||(s[0]=u=>g.value=u),type:"date",class:"w-full border rounded px-2 py-1.5"},null,512),[[K,g.value]])]),l("div",null,[s[7]||(s[7]=l("label",{class:"block mb-0.5"},"Start Time",-1)),L(l("input",{"onUpdate:modelValue":s[1]||(s[1]=u=>r.value=u),type:"time",class:"w-full border rounded px-2 py-1.5"},null,512),[[K,r.value]])]),l("div",null,[s[8]||(s[8]=l("label",{class:"block mb-0.5"},"End Date",-1)),L(l("input",{"onUpdate:modelValue":s[2]||(s[2]=u=>w.value=u),type:"date",class:"w-full border rounded px-2 py-1.5"},null,512),[[K,w.value]])]),l("div",null,[s[9]||(s[9]=l("label",{class:"block mb-0.5"},"End Time",-1)),L(l("input",{"onUpdate:modelValue":s[3]||(s[3]=u=>$.value=u),type:"time",class:"w-full border rounded px-2 py-1.5"},null,512),[[K,$.value]])]),l("div",Jt,[s[10]||(s[10]=l("label",{class:"block mb-0.5"},"Facilities",-1)),L(l("select",{"onUpdate:modelValue":s[4]||(s[4]=u=>B.value=u),multiple:"",class:"w-full border rounded px-2 py-1.5 min-h-[40px]"},[(b(!0),_(Z,null,ie(e.facilities,u=>(b(),_("option",{key:u,value:u},R(u),9,Xt))),128))],512),[[de,B.value]]),s[11]||(s[11]=l("p",{class:"text-[11px] text-gray-500 mt-0.5"},"Hold Ctrl/Cmd to select multiple.",-1))])]),l("div",{class:"flex justify-end gap-1.5 mt-4"},[l("button",{class:"px-3 py-1.5 bg-gray-200 rounded text-xs",onClick:D},"Reset"),l("button",{class:"px-3 py-1.5 bg-indigo-600 text-white rounded text-xs",onClick:S},"Check")])])])):q("",!0)}},ea="KOLEHIYO NG PANTUKAN",ta="Juan A. Sarenas Campus, Kingking, Pantukan, Davao de Oro",aa="https://osas.knp.edu.ph/verify-utilization?id=",ge=e=>e?be(e).format("MMMM DD, YYYY"):"—",Ae=e=>e?be(e).format("MMM DD, YYYY, h:mm A"):"—",ke=(e,i=0)=>e==null||e===""||Number.isNaN(Number(e))?"—":Number(e).toLocaleString(void 0,{minimumFractionDigits:i,maximumFractionDigits:i}),Te=(e,i)=>{if(Array.isArray(e))return e;try{return JSON.parse(e||"null")??i}catch{return i}},Fe="./",la=`${Fe}images/logo.png`,ia=`${Fe}images/bg.jpg`;async function Ee(e){const v=await(await fetch(e)).blob();return new Promise(c=>{const f=new FileReader;f.onloadend=()=>c(f.result),f.readAsDataURL(v)})}function na(e){switch(e){case"APPROVED":return[32,141,85];case"PENDING":return[240,158,47];case"REJECTED":return[220,53,69];case"CANCELLED":return[107,114,128];case"COMPLETED":return[37,99,235];default:return[90,90,90]}}function sa(e){switch(String(e||"").toUpperCase()){case"AVAILABLE":return[16,185,129];case"RESERVED":return[99,102,241];case"CONFLICT":return[239,68,68];case"MAINTENANCE":return[245,158,11];case"PENDING-CHECK":return[245,158,11];default:return[107,114,128]}}async function oa(e){const i=e.internal.pageSize.getWidth(),v=110,c=36;try{const f=await Ee(ia);e.addImage(f,"JPEG",0,0,i,v,void 0,"FAST")}catch{e.setFillColor(21,62,121),e.rect(0,0,i,v,"F")}e.setGState(new e.GState({opacity:.18})),e.setFillColor(0,0,0),e.rect(0,0,i,v,"F"),e.setGState(new e.GState({opacity:1}));try{const f=await Ee(la);e.addImage(f,"PNG",c,20,70,70,void 0,"FAST")}catch{}return e.setTextColor(255,255,255),e.setFont("helvetica","bold"),e.setFontSize(20),e.text(ea,c+86,38),e.setFont("helvetica","normal"),e.setFontSize(10),e.text(ta,c+86,58),e.setTextColor(20),e.setFont("helvetica","bold"),e.setFontSize(14),e.text("UTILIZATION REQUEST",i/2,v+24,{align:"center"}),v+34}async function ra(e,i,v){const c=e.internal.pageSize.getWidth(),f=36,g=i?.id??i?.reference_code??"",r=`${aa}${encodeURIComponent(String(g))}`,w=await mt.toDataURL(r,{margin:0,width:75,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#FFFFFF"}}),$=String(i.status||"").toUpperCase(),[B,z,y]=na($),D=String(i.availability_status||"").toUpperCase(),[S,d,s]=sa(D),u=i.approved_at?ge(i.approved_at):i.date_filed?ge(i.date_filed):"—",P=`osas.knp.edu.ph/verify-utilization?id=${String(g)}`;return I(e,{startY:v,theme:"plain",styles:{cellPadding:0,fontSize:9},bodyStyles:{minCellHeight:120},margin:{left:f,right:f},tableWidth:c-f*2,body:[[{content:""},{content:""}]],columnStyles:{0:{cellWidth:c-f*2-260},1:{cellWidth:260}},didDrawCell:N=>{if(N.section!=="body")return;const{x:C,y:F,width:O,height:Y}=N.cell,A=10;if(N.column.index===0){e.setFillColor(255,255,255),e.roundedRect(C,F,O-1,Y,6,6,"F");const U=24,j=Math.min(160,O-22);e.setFillColor(B,z,y),e.roundedRect(C+A,F+A,j,U,12,12,"F"),e.setTextColor(255,255,255),e.setFont("helvetica","bold"),e.setFontSize(10),e.text($||"STATUS",C+A+10,F+A+16);const Q=F+A+U+10,H=Math.min(160,O-22);e.setFillColor(S,d,s),e.roundedRect(C+A,Q,H,U,12,12,"F"),e.setTextColor(255,255,255),e.text(D||"AVAILABILITY",C+A+10,Q+16),e.setTextColor(20),e.setFont("helvetica","normal"),e.setFontSize(9);let G=Q+U+12;e.text(`Ref No.: ${i.reference_code||"—"}`,C+A,G),G+=16,e.text(`Date Issued: ${u}`,C+A,G),e.setDrawColor(230),e.roundedRect(C,F,O-1,Y,6,6,"S")}if(N.column.index===1){e.setFillColor(255,255,255),e.roundedRect(C,F,O-1,Y,6,6,"F"),e.setFillColor(66,103,178),e.roundedRect(C,F,O-1,22,6,6,"F"),e.setTextColor(255,255,255),e.setFont("helvetica","bold"),e.setFontSize(10),e.text("VERIFY",C+A,F+15);const U=C+A,j=F+28;e.addImage(w,"PNG",U,j,75,75,void 0,"FAST"),e.setTextColor(20),e.setFont("helvetica","bold"),e.setFontSize(10),e.text("Scan to verify",U+100,j+14),e.setFont("helvetica","normal"),e.setFontSize(9),e.text("This document can be verified",U+100,j+32),e.text("online via the OSAS portal.",U+100,j+46),e.setTextColor(110),e.setFontSize(8),e.text(P,U+100,j+72),e.setDrawColor(230),e.roundedRect(C,F,O-1,Y,6,6,"S")}}}),e.lastAutoTable.finalY}async function $e(e){const i=new Pe({unit:"pt",format:[612,936],orientation:"portrait"}),v=i.internal.pageSize.getWidth(),c=36,f=Te(e.facilities,[]),g=Te(e.equipment_items,[]);let r=await oa(i);r=await ra(i,e,r)+10,I(i,{startY:r,theme:"plain",styles:{fontSize:10},body:[[{content:"LINKED ACTIVITY",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",halign:"left",valign:"middle",cellPadding:6}}]],margin:{left:c,right:c}}),r=i.lastAutoTable.finalY;const w=e.activity_design||{};I(i,{startY:r,theme:"grid",styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},body:[[{content:"NAME OF ACTIVITY",styles:{fillColor:[243,248,255],fontStyle:"bold"}},w.name_of_activity||"—"],[{content:"DATE OF IMPLEMENTATION",styles:{fillColor:[243,248,255],fontStyle:"bold"}},ge(w.date_of_implementation)],[{content:"SEMESTER",styles:{fillColor:[243,248,255],fontStyle:"bold"}},w.semester||"—"],[{content:"SCHOOL YEAR",styles:{fillColor:[243,248,255],fontStyle:"bold"}},w.school_year||"—"],[{content:"OFFICE/DEPARTMENT",styles:{fillColor:[243,248,255],fontStyle:"bold"}},w.office_department||w?.club?.name||"—"]],columnStyles:{0:{cellWidth:200,fontStyle:"bold"},1:{cellWidth:"auto"}},margin:{left:c,right:c}}),r=i.lastAutoTable.finalY+10,I(i,{startY:r,theme:"plain",styles:{fontSize:10},body:[[{content:"SCHEDULE",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:c,right:c}}),r=i.lastAutoTable.finalY;const $=e.start_at||(e.start_date&&e.start_time?`${e.start_date}T${e.start_time}:00`:null),B=e.end_at||(e.end_date&&e.end_time?`${e.end_date}T${e.end_time}:00`:null);I(i,{startY:r,theme:"grid",styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},body:[[{content:"START",styles:{fillColor:[243,248,255],fontStyle:"bold"}},Ae($)],[{content:"END",styles:{fillColor:[243,248,255],fontStyle:"bold"}},Ae(B)],[{content:"DURATION (mins)",styles:{fillColor:[243,248,255],fontStyle:"bold"}},ke(e.duration_minutes)]],columnStyles:{0:{cellWidth:200,fontStyle:"bold"},1:{cellWidth:"auto"}},margin:{left:c,right:c}}),r=i.lastAutoTable.finalY+10,I(i,{startY:r,theme:"plain",styles:{fontSize:10},body:[[{content:"FACILITIES",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:c,right:c}}),r=i.lastAutoTable.finalY;const z=Array.isArray(f)&&f.length?"• "+f.join(`
• `):"—";I(i,{startY:r,theme:"grid",styles:{fontSize:9,cellPadding:8},body:[[z]],margin:{left:c,right:c}}),r=i.lastAutoTable.finalY+10,I(i,{startY:r,theme:"plain",styles:{fontSize:10},body:[[{content:"EQUIPMENT / MATERIALS",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:c,right:c}}),r=i.lastAutoTable.finalY,Array.isArray(g)&&g.length?I(i,{startY:r,theme:"grid",styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},head:[["ITEM","QTY","UNIT"]],body:g.map(u=>[u?.name||"—",ke(u?.qty),u?.unit||"—"]),columnStyles:{0:{cellWidth:300},1:{cellWidth:70},2:{cellWidth:"auto"}},margin:{left:c,right:c}}):I(i,{startY:r,theme:"grid",styles:{fontSize:9,cellPadding:8},body:[["—"]],margin:{left:c,right:c}}),r=i.lastAutoTable.finalY+10;const y=[["UTILIZATION DETAILS",e.utilization_details],["REMARKS",e.remarks]];for(const[u,P]of y)I(i,{startY:r,theme:"plain",styles:{fontSize:10},body:[[{content:u,styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:c,right:c}}),r=i.lastAutoTable.finalY,I(i,{startY:r,theme:"grid",styles:{fontSize:9,cellPadding:8},body:[[P&&String(P).trim()?P:"—"]],margin:{left:c,right:c}}),r=i.lastAutoTable.finalY+10;I(i,{startY:r,theme:"plain",styles:{fontSize:10},body:[[{content:"APPROVAL",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:c,right:c}}),r=i.lastAutoTable.finalY;const S=String(e?.file_by_user_name||"").trim()||(e?.filed_by?`${e.filed_by.first_name||""} ${e.filed_by.last_name||""}`.trim():""),d=e?.approver?`${e.approver.first_name||""} ${e.approver.last_name||""}`.trim():"";I(i,{startY:r,theme:"grid",styles:{fontSize:9,cellPadding:10},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},head:[["PREPARED BY:","APPROVED BY:"]],body:[[S||" ",d||" "]],columnStyles:{0:{cellWidth:(v-c*2)/2},1:{cellWidth:"auto"}},didParseCell:u=>{u.section==="body"&&(u.cell.styles.halign="center",u.cell.styles.fontStyle="bold",u.cell.styles.cellPadding={top:16,right:10,bottom:18,left:10})},margin:{left:c,right:c}});const s=i.internal.pageSize.getHeight()-20;return i.setFontSize(8),i.setTextColor(120),i.text(`Generated on ${be().format("YYYY-MM-DD HH:mm")} • ${window.location.origin}`,c,s),i}async function da(e){(await $e(e)).save(`${e.reference_code||"Utilization_Request"}.pdf`)}const ca={class:"flex flex-wrap items-center gap-2 w-full sm:w-auto justify-start sm:justify-end"},ua={class:"p-2 mb-4 rounded-xl border bg-white/60"},ma={class:"flex items-center gap-2 mb-2 text-gray-700"},pa={class:"w-4 h-4",viewBox:"0 0 24 24"},fa=["d"],ya={class:"grid grid-cols-1 md:grid-cols-6 gap-2 text-sm"},va={class:"md:col-span-2 flex"},ga={class:"w-5 h-5",viewBox:"0 0 24 24"},ba=["d"],ha=["value"],xa=["value"],_a={class:"md:col-span-1"},wa={class:"md:col-span-1"},Ca={class:"md:col-span-2"},Sa=["value"],Aa={class:"flex flex-wrap gap-1 max-w-[380px]"},ka={key:0,class:"text-gray-400"},Ta={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30"},Ea={class:"bg-white w-[560px] rounded-xl shadow p-4"},Fa={class:"flex items-center justify-between mb-2"},$a={class:"grid grid-cols-1 gap-2 text-sm"},Ba={class:"flex gap-2"},Ra={class:"text-[11px] text-gray-600"},za={class:"mt-3 flex justify-end gap-2"},Ha={__name:"UtilizationRequestsPage",setup(e){const i=ce(),v=Ve(),c=Ie(),f=h(!1),g=()=>{f.value=!0},r=h(!1),w=()=>{r.value=!0},$=async o=>{try{await i.fetchById(o);const t=i.selected;t&&await H(t)}catch(t){console.error(t)}finally{f.value=!1}},B=["EB 101","EB 102","EB 103","NB 104","NB 105","NB Lobby","NB 106","NB 107","NB 201","NB 3SR","OB 108","OB 109","OB 110","OB 111","OB 112","OB 113","OB 114","OB 115","OB 116","OB 117","Gym","AVR","Student Lobby","Activity Center","Library","Ground"],z={range:!0,partialRange:!0,multiCalendars:2,modelType:"yyyy-MM-dd",enableTimePicker:!1,autoApply:!0,clearable:!0},y=h({page:1,limit:10,sort:"created_at",order:"DESC",q:"",status:"",availability_status:"",start_from:"",start_to:"",end_from:"",end_to:"",facilities_any:[]}),D=W({get:()=>{const{start_from:o,start_to:t}=y.value;return o||t?[o||null,t||null]:null},set:o=>{if(!o)y.value.start_from=null,y.value.start_to=null;else{const[t,n]=o;y.value.start_from=t||null,y.value.start_to=n||null}}}),S=W({get:()=>{const{end_from:o,end_to:t}=y.value;return o||t?[o||null,t||null]:null},set:o=>{if(!o)y.value.end_from=null,y.value.end_to=null;else{const[t,n]=o;y.value.end_from=t||null,y.value.end_to=n||null}}}),d=async(o={},t=!0)=>{y.value={...y.value,...o};const n={...y.value};["q","status","availability_status","start_from","start_to","end_from","end_to"].forEach(E=>{(n[E]===""||n[E]==null)&&delete n[E]}),(!Array.isArray(n.facilities_any)||!n.facilities_any.length)&&delete n.facilities_any,await i.fetchAll(n,t)};ve(async()=>{await d({page:1,limit:10})});const s=W(()=>({total:i.items.total||0,totalPages:i.items.totalPages||1,currentPage:i.items.currentPage||1,pageSize:i.items.pageSize||10,data:i.items.data||[]})),u=["draft","pending","approved","rejected","cancelled","completed"],P=["unknown","pending-check","available","conflict","reserved","maintenance"],N=o=>{switch(String(o||"").toLowerCase()){case"draft":return"gray";case"pending":return"amber";case"approved":return"emerald";case"rejected":return"red";case"cancelled":return"zinc";case"completed":return"blue";default:return"gray"}},C=o=>{switch(String(o||"").toLowerCase()){case"available":return"emerald";case"reserved":return"indigo";case"conflict":return"red";case"maintenance":return"orange";case"pending-check":return"amber";default:return"gray"}},F=[{key:"reference_code",label:"Ref Code",sortable:!0,width:140},{key:"activity_design",label:"Activity",sortable:!1,minWidth:220,formatter:(o,t)=>t.activity_design?t.activity_design.name_of_activity:""},{key:"facilities",label:"Facilities",sortable:!1,minWidth:260},{key:"start_at",label:"Start",sortable:!0,width:170},{key:"end_at",label:"End",sortable:!0,width:170},{key:"availability_status",label:"Availability",sortable:!0,width:130},{key:"status",label:"Status",sortable:!0,width:120}],O=async o=>{await d(o)},Y=h(!1),A=h(!1),U=h(null),j=()=>{Y.value=!0},Q=async o=>{await i.create(o),Y.value=!1,await d({},!0)},H=async o=>{await i.fetchById(o.id);const t=i.selected||o;let n=[],E=[];try{n=Array.isArray(t.facilities)?t.facilities:JSON.parse(t.facilities||"[]")}catch{}try{E=Array.isArray(t.equipment_items)?t.equipment_items:JSON.parse(t.equipment_items||"[]")}catch{}U.value={id:t.id,reference_code:t.reference_code,date_filed:t.date_filed||"",activity_design_id:t.activity_design_id||"",file_by_user_name:t.file_by_user_name||"",facilities:n,equipment_items:E,utilization_details:t.utilization_details||"",start_date:t.start_date||String(t.start_at||"").slice(0,10),start_time:t.start_time||(t.start_at?new Date(t.start_at).toTimeString().slice(0,5):""),end_date:t.end_date||String(t.end_at||"").slice(0,10),end_time:t.end_time||(t.end_at?new Date(t.end_at).toTimeString().slice(0,5):""),status:t.status||"draft",availability_status:t.availability_status||"pending-check",remarks:t.remarks||""},A.value=!0},G=async o=>{const{id:t,...n}=o;await i.updateById(t,n),A.value=!1,await d({},!0)},ue=async o=>{if(!o?.id)return;(await x.fire({title:`Delete utilization "${o.reference_code}"?`,text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed&&(await i.deleteById(o.id),await d({},!0),await x.fire("Deleted","The utilization request has been deleted.","success"))},ne=async o=>{await H(o)},J=h(!1),ee=h(null),a=h({from_email:"",from_name:"",to:"",subject:"",html:"",attachments:[]}),m=async o=>{try{await i.fetchById(o.id);const t=i.selected||o,E=(await $e(t)).output("datauristring"),pe=String(E).split(",")[1]||"",Ue=`${t.reference_code||"Utilization_Request"}.pdf`;ee.value=t,a.value={from_email:"osas@knp.edu.ph",from_name:`${v.user?.first_name||""} ${v.user?.last_name||""}`.trim(),to:"",subject:`Utilization Request ${t.reference_code||""}`.trim(),html:"Please see the attached file.",attachments:[{filename:Ue,content:pe,type:"application/pdf"}]},J.value=!0}catch{await x.fire("Error",i.error||"Failed to prepare email.","error")}},p=async()=>{const o=ee.value;if(o)try{await i.sendEmail(o.id,{...a.value}),J.value=!1,await x.fire("Sent","Email sent successfully.","success")}catch{await x.fire("Error",i.error||"Failed to send email.","error")}},V=async o=>{if((await x.fire({title:"Submit for approval?",text:"You can no longer edit after submission.",icon:"question",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed)try{await i.submit(o.id),await d({},!0),await x.fire("Submitted","Utilization request is now pending approval.","success")}catch{await x.fire("Error",i.error||"Failed to submit request.","error")}},te=async o=>{const t=await x.fire({title:"Approve utilization?",input:"textarea",inputLabel:"Remarks (optional)",inputPlaceholder:"Add a note…",showCancelButton:!0,confirmButtonText:"Approve",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1});if(!t.isConfirmed)return;const n=t.value||"";try{await i.approve(o.id,n),await d({},!0),await x.fire("Approved","Utilization has been approved and reserved.","success")}catch{await x.fire("Error",i.error||"Failed to approve request.","error")}},X=async o=>{const t=await x.fire({title:"Reject utilization?",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"State the reason…",inputValidator:E=>E?.trim()?void 0:"Reason is required",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Reject",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1});if(!t.isConfirmed)return;const n=t.value;try{await i.reject(o.id,n),await d({},!0),await x.fire("Rejected","Utilization has been rejected.","success")}catch{await x.fire("Error",i.error||"Failed to reject request.","error")}},se=async o=>{const t=await x.fire({title:"Cancel utilization?",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"State the reason…",inputValidator:E=>E?.trim()?void 0:"Reason is required",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Cancel Utilization",cancelButtonText:"Keep",allowOutsideClick:!1,allowEscapeKey:!1});if(!t.isConfirmed)return;const n=t.value;try{await i.cancel(o.id,n),await d({},!0),await x.fire("Cancelled","Utilization has been cancelled.","success")}catch{await x.fire("Error",i.error||"Failed to cancel request.","error")}},ae=async o=>{if(String(o?.status||"").toLowerCase()!=="approved"){await x.fire("Not allowed","Only approved utilization request can be printed.","info");return}try{await i.fetchById(o.id);const n=i.selected||o;await da(n)}catch(n){await x.fire("Error",i.error||"Failed to generate PDF.","error"),console.error(n)}},me=h(!1),he=h(null),Be=async o=>{await i.fetchById(o.id),he.value=i.selected||o,me.value=!0};h(""),h("08:00"),h(""),h("10:00"),h([]);const oe=h([]),Re=async()=>{y.value.facilities_any=(oe.value||[]).slice(),await d({page:1})},ze=async()=>{oe.value=[],await d({q:"",status:"",availability_status:"",start_from:"",start_to:"",end_from:"",end_to:"",facilities_any:[],page:1})};return(o,t)=>(b(),_(Z,null,[k(Qe,null,{default:M(()=>[k(He,null,{default:M(()=>[T(i).error?(b(),_e(st,{key:0,icon:T(Je),color:"danger"},{default:M(()=>[le(R(T(i).error),1)]),_:1},8,["icon"])):q("",!0),k(nt,{icon:T(Xe),title:"Utilization Requests",main:""},{default:M(()=>[l("div",ca,[k(re,{icon:T(Ze),color:"info",label:"View Calendar",onClick:g},null,8,["icon"]),k(re,{icon:T(et),color:"info",label:"Quick Check",onClick:w},null,8,["icon"]),k(re,{icon:T(tt),color:"primary",label:"New Request",onClick:j},null,8,["icon"]),k(re,{icon:T(at),color:"info",label:"Refresh",onClick:t[0]||(t[0]=n=>d({},!0))},null,8,["icon"])])]),_:1},8,["icon"]),l("div",ua,[l("div",ma,[(b(),_("svg",pa,[l("path",{d:T(lt)},null,8,fa)])),t[21]||(t[21]=l("span",{class:"font-medium text-sm"},"Filters",-1))]),l("div",ya,[l("div",va,[L(l("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>y.value.q=n),placeholder:"Search by ref, details, remarks…",class:"border rounded-s px-2 py-2 flex-1",onKeyup:t[2]||(t[2]=De(n=>d({page:1}),["enter"]))},null,544),[[K,y.value.q]]),l("button",{class:"px-3 border border-l-0 rounded-e bg-gray-50",title:"Search",onClick:t[3]||(t[3]=n=>d({page:1}))},[(b(),_("svg",ga,[l("path",{d:T(it)},null,8,ba)]))])]),L(l("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>y.value.status=n),class:"border rounded px-2 py-2"},[t[22]||(t[22]=l("option",{value:""},"All status",-1)),(b(),_(Z,null,ie(u,n=>l("option",{key:n,value:n},R(n),9,ha)),64))],512),[[de,y.value.status]]),L(l("select",{"onUpdate:modelValue":t[5]||(t[5]=n=>y.value.availability_status=n),class:"border rounded px-2 py-2"},[t[23]||(t[23]=l("option",{value:""},"Any availability",-1)),(b(),_(Z,null,ie(P,n=>l("option",{key:n,value:n},R(n),9,xa)),64))],512),[[de,y.value.availability_status]]),l("div",_a,[k(T(Ce),we({modelValue:D.value,"onUpdate:modelValue":t[6]||(t[6]=n=>D.value=n)},z,{placeholder:"Start date range"}),null,16,["modelValue"])]),l("div",wa,[k(T(Ce),we({modelValue:S.value,"onUpdate:modelValue":t[7]||(t[7]=n=>S.value=n)},z,{placeholder:"End date range"}),null,16,["modelValue"])]),l("div",Ca,[t[24]||(t[24]=l("label",{class:"block text-[11px] text-gray-600 mb-1"},"Facilities (any)",-1)),L(l("select",{"onUpdate:modelValue":t[8]||(t[8]=n=>oe.value=n),multiple:"",class:"w-full border rounded px-2 py-2 min-h-[38px]"},[(b(),_(Z,null,ie(B,n=>l("option",{key:n,value:n},R(n),9,Sa)),64))],512),[[de,oe.value]])]),l("div",{class:"flex items-center gap-2 md:col-span-2"},[l("button",{class:"px-4 py-2 bg-blue-600 text-white rounded text-xs",onClick:Re}," Apply Filters "),l("button",{class:"px-4 py-2 bg-gray-200 rounded text-xs",onClick:ze},"Reset")])])]),k(ot,{columns:F,data:s.value,loading:T(i).isLoading,onQueryChange:O},{"cell-facilities":M(({row:n})=>[l("div",Aa,[(b(!0),_(Z,null,ie((()=>{try{return Array.isArray(n.facilities)?n.facilities:JSON.parse(n.facilities||"[]")}catch{return[]}})(),(E,pe)=>(b(),_e(fe,{key:pe,text:E,tone:"slate"},null,8,["text"]))),128)),n.facilities&&JSON.parse(n.facilities||"[]").length?q("",!0):(b(),_("span",ka,"—"))])]),"cell-start_at":M(({value:n})=>[l("span",null,R(n?new Date(n).toLocaleString():"—"),1)]),"cell-end_at":M(({value:n})=>[l("span",null,R(n?new Date(n).toLocaleString():"—"),1)]),"cell-availability_status":M(({value:n})=>[k(fe,{text:n||"—",tone:C(n)},null,8,["text","tone"])]),"cell-status":M(({value:n})=>[k(fe,{text:n||"—",tone:N(n)},null,8,["text","tone"])]),"cell-actions":M(({row:n})=>[k(Le,{row:n,moderator:["admin","manager"].includes(String(T(v).user?.role||"").toLowerCase()),onAttachments:Be,onSubmit:V,onApprove:te,onReject:X,onEdit:H,onDelete:ue,onView:E=>ne(n),onCancel:se,onPrint:ae,onEmail:m},null,8,["row","moderator","onView"])]),_:1},8,["data","loading"])]),_:1})]),_:1}),k(Se,{modelValue:Y.value,"onUpdate:modelValue":t[9]||(t[9]=n=>Y.value=n),mode:"create",onSubmit:Q},null,8,["modelValue"]),k(Se,{modelValue:A.value,"onUpdate:modelValue":t[10]||(t[10]=n=>A.value=n),mode:"edit",initial:U.value||{},onSubmit:G},null,8,["modelValue","initial"]),k(Yt,{modelValue:me.value,"onUpdate:modelValue":t[11]||(t[11]=n=>me.value=n),row:he.value},null,8,["modelValue","row"]),k(Gt,{modelValue:f.value,"onUpdate:modelValue":t[12]||(t[12]=n=>f.value=n),onOpen:$},null,8,["modelValue"]),k(Zt,{modelValue:r.value,"onUpdate:modelValue":t[13]||(t[13]=n=>r.value=n),facilities:B},null,8,["modelValue"]),J.value?(b(),_("div",Ta,[l("div",Ea,[l("div",Fa,[t[25]||(t[25]=l("h3",{class:"text-base font-semibold"},"Send Email",-1)),l("button",{class:"px-2 py-1 text-xs bg-gray-200 rounded",onClick:t[14]||(t[14]=n=>J.value=!1)},"Close")]),l("div",$a,[l("div",null,[t[26]||(t[26]=l("label",{class:"block mb-0.5"},"To",-1)),l("div",Ba,[L(l("input",{"onUpdate:modelValue":t[15]||(t[15]=n=>a.value.to=n),class:"flex-1 border rounded px-2 py-1.5",placeholder:"recipient@example.com"},null,512),[[K,a.value.to]]),l("button",{class:"px-2 py-1 text-[11px] rounded border bg-gray-50 hover:bg-gray-100",onClick:t[16]||(t[16]=()=>{const n=ee.value?.filed_by_user_id||ee.value?.filed_by?.id;n&&T(c).fetchById(n).then(()=>{const E=T(c).selectedUser?.email;E&&(a.value.to=E)})})},"Use Filer"),l("button",{class:"px-2 py-1 text-[11px] rounded border bg-rose-50 hover:bg-rose-100",onClick:t[17]||(t[17]=()=>{a.value.attachments=[]})},"Remove Attachment")])]),l("div",null,[t[27]||(t[27]=l("label",{class:"block mb-0.5"},"Subject",-1)),L(l("input",{"onUpdate:modelValue":t[18]||(t[18]=n=>a.value.subject=n),class:"w-full border rounded px-2 py-1.5"},null,512),[[K,a.value.subject]])]),l("div",null,[t[28]||(t[28]=l("label",{class:"block mb-0.5"},"Message",-1)),L(l("textarea",{"onUpdate:modelValue":t[19]||(t[19]=n=>a.value.html=n),rows:"4",class:"w-full border rounded px-2 py-1.5"},null,512),[[K,a.value.html]])]),l("div",Ra,"Attachment: "+R(a.value.attachments?.[0]?.filename||"utilization.pdf"),1)]),l("div",za,[l("button",{class:"px-3 py-1.5 text-xs bg-gray-200 rounded",onClick:t[20]||(t[20]=n=>J.value=!1)},"Cancel"),l("button",{class:"px-3 py-1.5 text-xs bg-emerald-600 text-white rounded",onClick:p},"Send")])])])):q("",!0)],64))}};export{Ha as default};
