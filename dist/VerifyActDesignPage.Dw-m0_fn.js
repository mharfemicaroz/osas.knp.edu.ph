import{r as d,o as h,s as w,x as k,a as l,e as t,t as i,j as C,d as x,p as D,q as o}from"./index.BJlvp4Na.js";import{a as p}from"./activityDesignService.CxzO5bYn.js";import{Q as N}from"./browser.vrPdLfUc.js";const A={class:"min-h-screen bg-gray-50 flex items-center justify-center p-4"},L={class:"w-full max-w-2xl bg-white rounded-2xl shadow border p-5"},q={key:0,class:"text-sm text-gray-600"},B={key:1,class:"text-sm text-rose-600"},S={key:2,class:"text-sm text-gray-600"},U={key:3,class:"space-y-3"},V={class:"flex items-center gap-2 text-sm"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm"},Q={class:"font-medium"},j={class:"font-medium"},z={class:"md:col-span-2"},R={class:"font-medium"},T={class:"font-medium"},$={class:"font-medium"},E={class:"pt-3 border-t flex items-center gap-3"},F=["src"],M={class:"flex-1 min-w-0"},P={class:"text-sm truncate"},K={class:"mt-2 flex items-center gap-2"},W={key:0,class:"text-[11px] text-emerald-600"},Y={__name:"VerifyActDesignPage",setup(G){const y=w();D();const v=d(!1),n=d(""),s=d(null),r=d(""),u=d(""),m=d(!1);function _(a){return/^[0-9]+$/.test(String(a||"").trim())}async function f(a){if(n.value="",s.value=null,!a){n.value="Missing id parameter";return}try{if(v.value=!0,_(a))s.value=await p.getById(a);else{const e=await p.list({q:a,limit:1,page:1});s.value=Array.isArray(e?.data)&&e.data.length?e.data[0]:null}s.value||(n.value="No matching Activity Design found")}catch(e){n.value=e?.response?.data?.message||e?.message||"Failed to verify"}finally{v.value=!1}}function c(a){const e=String(a||"").toLowerCase();return e==="approved"||e==="completed"?"emerald":e==="pending"?"amber":e==="rejected"||e==="cancelled"?"rose":"zinc"}h(()=>{r.value=window.location.href,g(),f(y.query.id)}),k(()=>y.query.id,a=>{f(a),r.value=window.location.href,g()});async function g(){try{u.value=await N.toDataURL(r.value,{margin:0,width:140})}catch{u.value=""}}async function b(){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(r.value);else{const a=document.createElement("textarea");a.value=r.value,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)}m.value=!0,setTimeout(()=>m.value=!1,1500)}catch{}}return(a,e)=>(o(),l("div",A,[t("div",L,[e[7]||(e[7]=t("div",{class:"mb-4"},[t("h1",{class:"text-lg font-semibold"},"Verify: Activity Design"),t("p",{class:"text-xs text-gray-500"},"Public verification page")],-1)),v.value?(o(),l("div",q,"Loading…")):n.value?(o(),l("div",B,i(n.value),1)):s.value?(o(),l("div",U,[t("div",V,[t("span",{class:C(["px-2 py-0.5 rounded-full text-xs",{"bg-emerald-100 text-emerald-700":c(s.value.status)==="emerald","bg-amber-100 text-amber-700":c(s.value.status)==="amber","bg-rose-100 text-rose-700":c(s.value.status)==="rose","bg-gray-200 text-gray-700":c(s.value.status)==="zinc"}])},i((s.value.status||"").toUpperCase()||"UNKNOWN"),3),e[0]||(e[0]=t("span",{class:"text-gray-500"},"Status",-1))]),t("div",I,[t("div",null,[e[1]||(e[1]=t("div",{class:"text-gray-500"},"Reference",-1)),t("div",Q,i(s.value.reference_code||"—"),1)]),t("div",null,[e[2]||(e[2]=t("div",{class:"text-gray-500"},"ID",-1)),t("div",j,i(s.value.id),1)]),t("div",z,[e[3]||(e[3]=t("div",{class:"text-gray-500"},"Activity Name",-1)),t("div",R,i(s.value.name_of_activity||"—"),1)]),t("div",null,[e[4]||(e[4]=t("div",{class:"text-gray-500"},"Club/Department",-1)),t("div",T,i(s.value.office_department||s.value?.club?.name||"—"),1)]),t("div",null,[e[5]||(e[5]=t("div",{class:"text-gray-500"},"Filed By",-1)),t("div",$,i(s.value?.file_by_user_name||(s.value?.filed_by?`${s.value.filed_by.first_name||""} ${s.value.filed_by.last_name||""}`.trim():"—")),1)])]),t("div",E,[u.value?(o(),l("img",{key:0,src:u.value,alt:"QR",class:"w-24 h-24 border rounded"},null,8,F)):x("",!0),t("div",M,[e[6]||(e[6]=t("div",{class:"text-xs text-gray-500 mb-1"},"Verification Link",-1)),t("div",P,i(r.value),1),t("div",K,[t("button",{class:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded",onClick:b},"Copy Link"),m.value?(o(),l("span",W,"Copied!")):x("",!0)])])])])):(o(),l("div",S,"No data."))])]))}};export{Y as default};
