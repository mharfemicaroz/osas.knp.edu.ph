import{u as ee,r as a,c as n,s as te,o as se,n as ae,a as i,b as V,d as o,e as t,f as $,g as q,w as le,h as d,v as p,i as G,j as A,k as K,t as U,l as ie,m as re,p as oe,q as r}from"./index.lmxhTYcw.js";import{_ as ne}from"./logo.Dx3Q79ni.js";import{T as de}from"./ToasterComponent.BiIukvsf.js";import{_ as ue}from"./_plugin-vue_export-helper.DlAUqK2U.js";const ce={class:"min-h-screen relative overflow-hidden"},pe={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},ve={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},me={class:"w-full max-w-md"},fe={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 hover:ring-black/10 transition"},ge={class:"p-6 sm:p-7"},xe={class:"space-y-1"},be={class:"relative"},ye={key:0,class:"text-xs text-rose-600"},he={class:"space-y-1"},we={class:"relative"},_e={key:0,class:"text-xs text-rose-600"},ke={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Se={class:"space-y-1"},Ce={class:"relative"},Ve={key:0,class:"text-xs text-rose-600"},Ae={class:"space-y-1"},Ue={class:"relative"},Pe={key:0,class:"text-xs text-rose-600"},je={class:"space-y-2"},Te={class:"relative"},Le=["type"],Me={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},qe={key:1,class:"text-xs text-rose-600"},Ne={class:"space-y-2"},Oe={class:"relative"},Ee=["type"],Re={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},Be={key:1,class:"text-xs text-rose-600"},De={class:"space-y-2"},Fe={class:"flex items-center gap-3"},ze={class:"flex-1"},Ie={class:"w-full rounded-xl border border-gray-300/80 bg-white/70 px-3 py-2.5 text-gray-900 flex items-center justify-between"},$e={class:"text-sm select-none"},Ge={key:0,class:"text-xs text-red-600"},Ke={class:"pt-1"},Ze=["disabled"],He=["disabled"],We={class:"text-center text-xs"},Ye={class:"px-6 sm:px-7 pb-6"},Je={class:"flex items-center justify-between text-[11px] text-gray-500"},Qe=Object.assign({name:"RegisterPage"},{__name:"RegisterPage",setup(Xe){const Z=oe(),v=ee(),m=a(""),f=a(""),g=a(""),x=a(""),P=a("student"),H=a(0),u=a(""),y=a(""),w=a(!1),_=a(!1),N=a(!1),O=a(!1),k=a(!1),S=a(""),j=a(0),T=a(0),c=a(""),h=a(""),b=a(null),E=n(()=>/^[a-zA-Z0-9._-]{4,20}$/.test(m.value)),R=n(()=>/@knp\.edu\.ph$/i.test(f.value)),B=n(()=>/^(?=.*[A-Za-z])(?=.*\d).{8,}$/.test(u.value)),D=n(()=>u.value&&y.value&&u.value!==y.value),W=n(()=>j.value+T.value),C=n(()=>String(parseInt(c.value||"NaN",10))===String(W.value)),Y=n(()=>c.value?C.value?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-400 border border-gray-200"),J=n(()=>c.value?C.value?"mdi mdi-check-bold text-xl":"mdi mdi-close-thick text-xl":"mdi mdi-help-circle-outline text-xl"),F=n(()=>E.value&&R.value&&g.value.trim().length>0&&x.value.trim().length>0&&B.value&&!D.value&&C.value&&!S.value),z=l=>l.getModifierState?l.getModifierState("CapsLock"):!1,L=()=>{const l=(e,M)=>Math.floor(Math.random()*(M-e+1))+e;j.value=l(10,49),T.value=l(10,49),c.value="",h.value=""},Q=async()=>{if(k.value=!0,!S.value){if(!F.value){C.value||(h.value="Incorrect captcha answer.");return}h.value="";try{const l={username:m.value.trim(),email:f.value.trim(),password:u.value,role:P.value,is_active:H.value,first_name:g.value.trim(),last_name:x.value.trim()};await v.register(l),b.value.showToast("success","Registration successful! Please sign in."),m.value="",f.value="",g.value="",x.value="",u.value="",y.value="",c.value="",k.value=!1,setTimeout(()=>{Z.push({name:"login"})},500)}catch(l){const e=l?.message||"Registration failed";b.value.showToast("warning",e),L()}}},X=()=>{try{v.startGoogleLogin("#/register")}catch(l){b.value.showToast("warning",l.message||"Unable to start Google sign-up")}},I=()=>{try{v.consumeSsoFromHash()&&b.value?.showToast("success","Signed up with school account")}catch(l){b.value?.showToast("warning",l.message||"Google sign-up failed")}};return te(()=>{L()}),se(()=>{I(),ae(()=>I())}),(l,e)=>{const M=re("router-link");return r(),i("div",ce,[e[38]||(e[38]=V('<div class="absolute inset-0" data-v-f7f5ab8e><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-f7f5ab8e></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-f7f5ab8e></div><div class="absolute inset-0 backdrop-blur-sm" data-v-f7f5ab8e></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-f7f5ab8e></div></div>',1)),q(v).isLoading?(r(),i("div",pe,e[13]||(e[13]=[t("div",{class:"loader"},null,-1)]))):o("",!0),t("div",ve,[t("div",me,[e[36]||(e[36]=V('<div class="mb-6 text-center" data-v-f7f5ab8e><a href="index.html" class="inline-flex items-center justify-center" data-v-f7f5ab8e><img src="'+ne+'" alt="OSAS" class="h-14 w-auto" data-v-f7f5ab8e></a><h1 class="mt-4 text-2xl font-extrabold tracking-wide text-white" data-v-f7f5ab8e> Office of Student Affairs &amp; Services </h1><p class="mt-1 text-primary-text/90 text-sm" data-v-f7f5ab8e>Serve. Support. Empower.</p></div>',1)),t("div",fe,[t("div",ge,[e[34]||(e[34]=V('<div class="mb-5 text-center" data-v-f7f5ab8e><div class="inline-flex items-center gap-2" data-v-f7f5ab8e><span class="inline-grid h-8 w-8 place-items-center rounded-full bg-primary/10" data-v-f7f5ab8e><i class="mdi mdi-account-plus text-primary text-xl" data-v-f7f5ab8e></i></span><h2 class="text-lg font-bold text-gray-900" data-v-f7f5ab8e>Create Account</h2></div><p class="text-xs text-gray-500 mt-2" data-v-f7f5ab8e>Fill in the details to register</p></div>',1)),t("form",{onSubmit:le(Q,["prevent"]),class:"space-y-4",novalidate:""},[d(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>S.value=s),class:"hidden",tabindex:"-1",autocomplete:"off","aria-hidden":"true"},null,512),[[p,S.value]]),t("div",xe,[t("div",be,[e[14]||(e[14]=t("label",{class:"sr-only"},"Username",-1)),e[15]||(e[15]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-account-outline text-gray-400 text-xl"})],-1)),d(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"Username","onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),autocomplete:"username"},null,512),[[p,m.value,void 0,{trim:!0}]])]),m.value&&!E.value?(r(),i("p",ye," Username must be 4–20 characters and use letters, numbers, dot, underscore, or hyphen. ")):o("",!0)]),t("div",he,[t("div",we,[e[16]||(e[16]=t("label",{class:"sr-only"},"Email",-1)),e[17]||(e[17]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-email-outline text-gray-400 text-xl"})],-1)),d(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"email",required:"",placeholder:"Email (must be @knp.edu.ph)","onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),autocomplete:"email"},null,512),[[p,f.value,void 0,{trim:!0}]])]),f.value&&!R.value?(r(),i("p",_e," Email must end with @knp.edu.ph ")):o("",!0)]),t("div",ke,[t("div",Se,[t("div",Ce,[e[18]||(e[18]=t("label",{class:"sr-only"},"First name",-1)),e[19]||(e[19]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-card-account-details-outline text-gray-400 text-xl"})],-1)),d(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"First name","onUpdate:modelValue":e[3]||(e[3]=s=>g.value=s),autocomplete:"given-name"},null,512),[[p,g.value,void 0,{trim:!0}]])]),g.value===""&&k.value?(r(),i("p",Ve," First name is required. ")):o("",!0)]),t("div",Ae,[t("div",Ue,[e[20]||(e[20]=t("label",{class:"sr-only"},"Last name",-1)),e[21]||(e[21]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-card-account-details text-gray-400 text-xl"})],-1)),d(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"Last name","onUpdate:modelValue":e[4]||(e[4]=s=>x.value=s),autocomplete:"family-name"},null,512),[[p,x.value,void 0,{trim:!0}]])]),x.value===""&&k.value?(r(),i("p",Pe," Last name is required. ")):o("",!0)])]),d(t("input",{type:"hidden","onUpdate:modelValue":e[5]||(e[5]=s=>P.value=s)},null,512),[[p,P.value]]),t("div",je,[t("div",Te,[e[22]||(e[22]=t("label",{class:"sr-only"},"Password",-1)),e[23]||(e[23]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-lock-outline text-gray-400 text-xl"})],-1)),d(t("input",{type:w.value?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",placeholder:"Password","onUpdate:modelValue":e[6]||(e[6]=s=>u.value=s),onKeyup:e[7]||(e[7]=s=>N.value=z(s)),autocomplete:"new-password",minlength:"8"},null,40,Le),[[G,u.value]]),t("button",{type:"button",onClick:e[8]||(e[8]=s=>w.value=!w.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[t("i",{class:A(w.value?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),N.value?(r(),i("div",Me,e[24]||(e[24]=[t("i",{class:"mdi mdi-alert"},null,-1),t("span",null,"Caps Lock is ON",-1)]))):o("",!0),u.value&&!B.value?(r(),i("p",qe," Password must be at least 8 characters and include letters and numbers. ")):o("",!0)]),t("div",Ne,[t("div",Oe,[e[25]||(e[25]=t("label",{class:"sr-only"},"Confirm Password",-1)),e[26]||(e[26]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-lock-check-outline text-gray-400 text-xl"})],-1)),d(t("input",{type:_.value?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",placeholder:"Confirm password","onUpdate:modelValue":e[9]||(e[9]=s=>y.value=s),onKeyup:e[10]||(e[10]=s=>O.value=z(s)),autocomplete:"new-password",minlength:"8"},null,40,Ee),[[G,y.value]]),t("button",{type:"button",onClick:e[11]||(e[11]=s=>_.value=!_.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[t("i",{class:A(_.value?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),O.value?(r(),i("div",Re,e[27]||(e[27]=[t("i",{class:"mdi mdi-alert"},null,-1),t("span",null,"Caps Lock is ON",-1)]))):o("",!0),D.value?(r(),i("p",Be,"Passwords do not match.")):o("",!0)]),t("div",De,[t("div",{class:"flex items-center justify-between"},[e[29]||(e[29]=t("label",{class:"text-sm font-medium text-gray-700"},"Captcha",-1)),t("button",{type:"button",onClick:L,class:"text-xs text-primary hover:underline inline-flex items-center gap-1"},e[28]||(e[28]=[t("i",{class:"mdi mdi-refresh"},null,-1),K(" Refresh ",-1)]))]),t("div",Fe,[t("div",ze,[t("div",Ie,[t("span",$e,U(j.value)+" + "+U(T.value)+" =",1),d(t("input",{class:"ml-3 w-24 text-right bg-transparent focus:outline-none",inputmode:"numeric",pattern:"[0-9]*",placeholder:"Answer","onUpdate:modelValue":e[12]||(e[12]=s=>c.value=s)},null,512),[[p,c.value,void 0,{trim:!0}]])])]),t("span",{class:A(["inline-flex h-9 w-9 items-center justify-center rounded-lg",Y.value])},[t("i",{class:A(J.value)},null,2)],2)]),h.value?(r(),i("p",Ge,U(h.value),1)):o("",!0)]),t("div",Ke,[t("button",{class:"w-full py-2.5 px-4 rounded-xl bg-primary text-white font-semibold tracking-wide shadow-md hover:shadow-lg hover:bg-tertiary transition disabled:opacity-60 disabled:cursor-not-allowed",type:"submit",disabled:!F.value||q(v).isLoading},e[30]||(e[30]=[t("span",{class:"inline-flex items-center justify-center gap-2"},[t("i",{class:"mdi mdi-account-check-outline"}),t("span",null,"Create Account")],-1)]),8,Ze)]),e[33]||(e[33]=V('<div class="relative my-4" data-v-f7f5ab8e><div class="absolute inset-0 flex items-center" data-v-f7f5ab8e><span class="w-full border-t border-gray-200" data-v-f7f5ab8e></span></div><div class="relative flex justify-center text-xs" data-v-f7f5ab8e><span class="bg-white/80 px-2 text-gray-500" data-v-f7f5ab8e>or sign up with</span></div></div>',1)),t("div",null,[t("button",{type:"button",class:"w-full py-2.5 px-4 rounded-xl bg-white text-gray-800 font-semibold tracking-wide border border-gray-300/80 shadow-sm hover:shadow-md hover:bg-gray-50 transition disabled:opacity-60",disabled:q(v).isLoading,onClick:X},e[31]||(e[31]=[t("span",{class:"inline-flex items-center justify-center gap-2"},[t("i",{class:"mdi mdi-google"}),t("span",null,"Sign up with School Account"),t("span",{class:"text-xs text-gray-500"},"(knp.edu.ph)")],-1)]),8,He)]),t("div",We,[$(M,{to:"/login",class:"text-primary hover:underline"},{default:ie(()=>e[32]||(e[32]=[K(" Already have an account? Sign in ",-1)])),_:1,__:[32]})])],32)]),t("div",Ye,[t("div",Je,[e[35]||(e[35]=t("span",null,"OSAS Kiosk v1.0",-1)),t("span",null,"© "+U(new Date().getFullYear())+" Student Services",1)])])]),e[37]||(e[37]=t("div",{class:"mt-6 text-center text-xs text-gray-300"},[t("p",null,"By registering, you agree to our Student Portal Guidelines.")],-1))])]),$(de,{ref_key:"toast",ref:b},null,512)])}}}),lt=ue(Qe,[["__scopeId","data-v-f7f5ab8e"]]);export{lt as default};
