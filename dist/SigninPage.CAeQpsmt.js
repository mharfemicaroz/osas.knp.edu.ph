import{u as D,r as a,c as v,o as R,n as U,a as f,b as m,d as S,e as t,f as C,g as b,w as B,h as x,v as T,i as F,j as y,k as P,t as j,l as G,m as H,p as K,q as w}from"./index.DPBVxXpV.js";import{_ as W}from"./logo.Dx3Q79ni.js";import{T as Y}from"./ToasterComponent.CYegXfee.js";import{_ as $}from"./_plugin-vue_export-helper.DlAUqK2U.js";const J={class:"min-h-screen relative overflow-hidden"},Q={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},X={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},Z={class:"w-full max-w-md"},ee={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 hover:ring-black/10 transition"},te={class:"p-6 sm:p-7"},se={class:"relative"},ae={class:"space-y-2"},ie={class:"relative"},le=["type"],oe={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},ne={class:"flex items-center justify-between"},re={class:"ml-1"},de={class:"pt-1"},ue=["disabled"],ce=["disabled"],pe={class:"text-center text-xs mt-3"},ve={class:"px-6 sm:px-7 pb-6"},me={class:"flex items-center justify-between text-[11px] text-gray-500"},ge=Object.assign({name:"LoginPage"},{__name:"SigninPage",setup(fe){const V=K(),i=D(),n=a(""),r=a(""),d=a(!1),h=a(!1),u=a(""),g=a(!1),c=a(!1),p=a(""),l=a(null),A=v(()=>n.value.trim().length>0&&r.value.length>0&&!u.value),L=v(()=>p.value?"text-red-600":c.value?"text-green-700":"text-gray-500"),q=v(()=>p.value?"mdi mdi-close-circle-outline":c.value?"mdi mdi-check-circle-outline":"mdi mdi-dots-horizontal-circle-outline"),E=v(()=>p.value?"unavailable":c.value?"ready":"initializing…"),I=s=>{s.getModifierState&&(h.value=s.getModifierState("CapsLock"))},M=()=>{l.value.showToast("info","Please contact support to reset your password.")},N=async()=>{if(!u.value)try{const s=await i.getCaptchaToken("login"),e=await i.login(n.value,r.value,s);if(e?.requiresVerification||i.requiresVerification){l.value.showToast("info","Please verify your email before logging in."),V.push({name:"verify-prompt",query:{email:n.value}});return}if(e?.requires2FA)return;l.value.showToast("success","Login successful!")}catch(s){l.value.showToast("warning",s.message||"Invalid login credentials!")}},O=()=>{try{i.startGoogleLogin()}catch(s){l.value.showToast("warning",s.message||"Unable to start Google sign-in")}},k=({suppressToast:s=!1}={})=>{if(!g.value)try{i.consumeSsoFromHash()&&(g.value=!0,s||l.value?.showToast("success","Signed in with school account"))}catch(e){g.value=!0,s||l.value?.showToast("warning",e.message||"Google sign-in failed")}},_=()=>{try{const s=window.grecaptcha?.enterprise||window.grecaptcha;s?.ready?s.ready(()=>{c.value=!0}):setTimeout(_,600)}catch{p.value="not loaded"}};return R(()=>{k(),U(()=>k({suppressToast:!0})),_()}),(s,e)=>{const z=H("router-link");return w(),f("div",J,[e[21]||(e[21]=m('<div class="absolute inset-0" data-v-1b5f74d8><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-1b5f74d8></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-1b5f74d8></div><div class="absolute inset-0 backdrop-blur-sm" data-v-1b5f74d8></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-1b5f74d8></div></div>',1)),b(i).isLoading?(w(),f("div",Q,e[5]||(e[5]=[t("div",{class:"loader"},null,-1)]))):S("",!0),t("div",X,[t("div",Z,[e[19]||(e[19]=m('<div class="mb-6 text-center" data-v-1b5f74d8><a href="index.html" class="inline-flex items-center justify-center" data-v-1b5f74d8><img src="'+W+'" alt="OSAS" class="h-14 w-auto" data-v-1b5f74d8></a><h1 class="mt-4 text-2xl font-extrabold tracking-wide text-white" data-v-1b5f74d8> Office of Student Affairs &amp; Services </h1><p class="mt-1 text-primary-text/90 text-sm" data-v-1b5f74d8>Serve. Support. Empower.</p></div>',1)),t("div",ee,[t("div",te,[e[17]||(e[17]=m('<div class="mb-5 text-center" data-v-1b5f74d8><div class="inline-flex items-center gap-2" data-v-1b5f74d8><span class="inline-grid h-8 w-8 place-items-center rounded-full bg-primary/10" data-v-1b5f74d8><i class="mdi mdi-account-key text-primary text-xl" data-v-1b5f74d8></i></span><h2 class="text-lg font-bold text-gray-900" data-v-1b5f74d8>Sign In</h2></div><p class="text-xs text-gray-500 mt-2" data-v-1b5f74d8>Use your email and password</p></div>',1)),t("form",{onSubmit:B(N,["prevent"]),class:"space-y-4",novalidate:""},[x(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),class:"hidden",tabindex:"-1",autocomplete:"off","aria-hidden":"true"},null,512),[[T,u.value]]),t("div",se,[e[6]||(e[6]=t("label",{class:"sr-only"},"Email",-1)),e[7]||(e[7]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-email-outline text-gray-400 text-xl"})],-1)),x(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"email",required:"",placeholder:"Email","onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),autocomplete:"email"},null,512),[[T,n.value,void 0,{trim:!0}]])]),t("div",ae,[t("div",ie,[e[8]||(e[8]=t("label",{class:"sr-only"},"Password",-1)),e[9]||(e[9]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-lock-outline text-gray-400 text-xl"})],-1)),x(t("input",{type:d.value?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",placeholder:"Password","onUpdate:modelValue":e[2]||(e[2]=o=>r.value=o),onKeyup:e[3]||(e[3]=o=>I(o)),autocomplete:"current-password"},null,40,le),[[F,r.value]]),t("button",{type:"button",onClick:e[4]||(e[4]=o=>d.value=!d.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[t("i",{class:y(d.value?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),h.value?(w(),f("div",oe,e[10]||(e[10]=[t("i",{class:"mdi mdi-alert"},null,-1),t("span",null,"Caps Lock is ON",-1)]))):S("",!0)]),t("div",ne,[e[11]||(e[11]=t("span",{class:"text-[11px] text-gray-500 inline-flex items-center gap-1"},[t("i",{class:"mdi mdi-shield-check-outline"}),P(" Protected by reCAPTCHA Enterprise ")],-1)),t("span",{class:y(["text-[11px]",L.value])},[t("i",{class:y(q.value)},null,2),t("span",re,j(E.value),1)],2)]),t("div",{class:"flex items-center justify-between"},[e[12]||(e[12]=t("span",{class:"text-sm text-gray-700"}," ",-1)),t("button",{type:"button",class:"text-sm text-primary hover:underline",onClick:M}," Forgot password? ")]),t("div",de,[t("button",{class:"w-full py-2.5 px-4 rounded-xl bg-primary text-white font-semibold tracking-wide shadow-md hover:shadow-lg hover:bg-tertiary transition disabled:opacity-60 disabled:cursor-not-allowed",type:"submit",disabled:!A.value||b(i).isLoading},e[13]||(e[13]=[t("span",{class:"inline-flex items-center justify-center gap-2"},[t("i",{class:"mdi mdi-login-variant"}),t("span",null,"Log In")],-1)]),8,ue)]),e[16]||(e[16]=m('<div class="relative my-4" data-v-1b5f74d8><div class="absolute inset-0 flex items-center" data-v-1b5f74d8><span class="w-full border-t border-gray-200" data-v-1b5f74d8></span></div><div class="relative flex justify-center text-xs" data-v-1b5f74d8><span class="bg-white/80 px-2 text-gray-500" data-v-1b5f74d8>or continue with</span></div></div>',1)),t("div",null,[t("button",{type:"button",class:"w-full py-2.5 px-4 rounded-xl bg-white text-gray-800 font-semibold tracking-wide border border-gray-300/80 shadow-sm hover:shadow-md hover:bg-gray-50 transition disabled:opacity-60",disabled:b(i).isLoading,onClick:O},e[14]||(e[14]=[t("span",{class:"inline-flex items-center justify-center gap-2"},[t("i",{class:"mdi mdi-google"}),t("span",null,"Sign in with School Account"),t("span",{class:"text-xs text-gray-500"},"(knp.edu.ph)")],-1)]),8,ce)]),t("div",pe,[C(z,{to:"/register",class:"text-primary hover:underline"},{default:G(()=>e[15]||(e[15]=[P(" Don't have an account? ",-1),t("span",{class:"font-semibold"},"Register",-1)])),_:1,__:[15]})])],32)]),t("div",ve,[t("div",me,[e[18]||(e[18]=t("span",null,"OSAS Kiosk v1.0",-1)),t("span",null,"© "+j(new Date().getFullYear())+" Student Services",1)])])]),e[20]||(e[20]=t("div",{class:"mt-6 text-center text-xs text-gray-300"},[t("p",null,"By signing in, you agree to our Student Portal Guidelines.")],-1))])]),C(Y,{ref_key:"toast",ref:l},null,512)])}}}),he=$(ge,[["__scopeId","data-v-1b5f74d8"]]);export{he as default};
