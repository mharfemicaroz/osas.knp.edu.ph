import{T as v}from"./ToasterComponent.XRVHT5gm.js";import{c as n,a as o,b as u,d as e,e as p,w as x,f as d,v as m,g as w,n as l,h,t as g,i as S,r as b,u as k,o as c}from"./index.kywONoMW.js";import{_}from"./logo.Dx3Q79ni.js";import{_ as C}from"./_plugin-vue_export-helper.DlAUqK2U.js";const T={data(){return{email:"",password:"",showPassword:!1,capsOn:!1,honeypot:"",_ssoHandled:!1,recaptchaReady:!1,recaptchaError:""}},computed:{auth(){return k()},canSubmit(){return this.email.trim().length>0&&this.password.length>0&&!this.honeypot},recaptchaStatusClass(){return this.recaptchaError?"text-red-600":this.recaptchaReady?"text-green-700":"text-gray-500"},recaptchaIconClass(){return this.recaptchaError?"mdi mdi-close-circle-outline":this.recaptchaReady?"mdi mdi-check-circle-outline":"mdi mdi-dots-horizontal-circle-outline"},recaptchaStatusText(){return this.recaptchaError?"unavailable":this.recaptchaReady?"ready":"initializing…"}},methods:{async onSubmit(){if(!this.honeypot)try{const s=await this.auth.getCaptchaToken("login"),t=await this.auth.login(this.email,this.password,s);if(t?.requiresVerification||this.auth.requiresVerification){this.$refs.toast.showToast("info","Please verify your email before logging in."),this.$router.push({name:"verify-prompt",query:{email:this.email}});return}if(t?.requires2FA)return;this.$refs.toast.showToast("success","Login successful!")}catch(s){this.$refs.toast.showToast("warning",s.message||"Invalid login credentials!")}},forgotPassword(){this.$refs.toast.showToast("info","Please contact support to reset your password.")},detectCaps(s){s.getModifierState&&(this.capsOn=s.getModifierState("CapsLock"))},signInWithSchoolAccount(){try{this.auth.startGoogleLogin()}catch(s){this.$refs.toast.showToast("warning",s.message||"Unable to start Google sign-in")}},tryConsumeSso({suppressToast:s=!1}={}){if(!this._ssoHandled)try{this.auth.consumeSsoFromHash()&&(this._ssoHandled=!0,s||this.$refs.toast?.showToast("success","Signed in with school account"))}catch(t){this._ssoHandled=!0,s||this.$refs.toast?.showToast("warning",t.message||"Google sign-in failed")}},checkRecaptchaReady(){try{const s=window.grecaptcha?.enterprise||window.grecaptcha;s?.ready?s.ready(()=>{this.recaptchaReady=!0}):setTimeout(this.checkRecaptchaReady,600)}catch{this.recaptchaError="not loaded"}}},components:{ToasterComponent:v},mounted(){this.tryConsumeSso(),this.$nextTick(()=>this.tryConsumeSso({suppressToast:!0})),this.checkRecaptchaReady()}},P={class:"min-h-screen relative overflow-hidden"},R={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},A={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},E={class:"w-full max-w-md"},V={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 hover:ring-black/10 transition"},j={class:"p-6 sm:p-7"},I={class:"relative"},L={class:"space-y-2"},O={class:"relative"},q=["type"],H={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},N={class:"flex items-center justify-between"},z={class:"ml-1"},D={class:"flex items-center justify-between"},M={class:"pt-1"},U=["disabled"],B=["disabled"],F={class:"text-center text-xs mt-3"},G={class:"px-6 sm:px-7 pb-6"},W={class:"flex items-center justify-between text-[11px] text-gray-500"};function K(s,t,Y,J,r,a){const f=b("router-link"),y=b("ToasterComponent");return c(),n("div",P,[t[24]||(t[24]=o('<div class="absolute inset-0" data-v-d6ddea7b><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-d6ddea7b></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-d6ddea7b></div><div class="absolute inset-0 backdrop-blur-sm" data-v-d6ddea7b></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-d6ddea7b></div></div>',1)),a.auth.isLoading?(c(),n("div",R,t[8]||(t[8]=[e("div",{class:"loader"},null,-1)]))):u("",!0),e("div",A,[e("div",E,[t[22]||(t[22]=o('<div class="mb-6 text-center" data-v-d6ddea7b><a href="index.html" class="inline-flex items-center justify-center" data-v-d6ddea7b><img src="'+_+'" alt="OSAS" class="h-14 w-auto" data-v-d6ddea7b></a><h1 class="mt-4 text-2xl font-extrabold tracking-wide text-white" data-v-d6ddea7b> Office of Student Affairs &amp; Services </h1><p class="mt-1 text-primary-text/90 text-sm" data-v-d6ddea7b>Serve. Support. Empower.</p></div>',1)),e("div",V,[e("div",j,[t[20]||(t[20]=o('<div class="mb-5 text-center" data-v-d6ddea7b><div class="inline-flex items-center gap-2" data-v-d6ddea7b><span class="inline-grid h-8 w-8 place-items-center rounded-full bg-primary/10" data-v-d6ddea7b><i class="mdi mdi-account-key text-primary text-xl" data-v-d6ddea7b></i></span><h2 class="text-lg font-bold text-gray-900" data-v-d6ddea7b>Sign In</h2></div><p class="text-xs text-gray-500 mt-2" data-v-d6ddea7b>Use your email and password</p></div>',1)),e("form",{onSubmit:t[7]||(t[7]=x((...i)=>a.onSubmit&&a.onSubmit(...i),["prevent"])),class:"space-y-4",novalidate:""},[d(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>r.honeypot=i),class:"hidden",tabindex:"-1",autocomplete:"off","aria-hidden":"true"},null,512),[[m,r.honeypot]]),e("div",I,[t[9]||(t[9]=e("label",{class:"sr-only"},"Email",-1)),t[10]||(t[10]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"mdi mdi-email-outline text-gray-400 text-xl"})],-1)),d(e("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"email",required:"",placeholder:"Email","onUpdate:modelValue":t[1]||(t[1]=i=>r.email=i),autocomplete:"email"},null,512),[[m,r.email,void 0,{trim:!0}]])]),e("div",L,[e("div",O,[t[11]||(t[11]=e("label",{class:"sr-only"},"Password",-1)),t[12]||(t[12]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"mdi mdi-lock-outline text-gray-400 text-xl"})],-1)),d(e("input",{type:r.showPassword?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",placeholder:"Password","onUpdate:modelValue":t[2]||(t[2]=i=>r.password=i),onKeyup:t[3]||(t[3]=i=>a.detectCaps(i)),autocomplete:"current-password"},null,40,q),[[w,r.password]]),e("button",{type:"button",onClick:t[4]||(t[4]=i=>r.showPassword=!r.showPassword),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[e("i",{class:l(r.showPassword?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),r.capsOn?(c(),n("div",H,t[13]||(t[13]=[e("i",{class:"mdi mdi-alert"},null,-1),e("span",null,"Caps Lock is ON",-1)]))):u("",!0)]),e("div",N,[t[14]||(t[14]=e("span",{class:"text-[11px] text-gray-500 inline-flex items-center gap-1"},[e("i",{class:"mdi mdi-shield-check-outline"}),h(" Protected by reCAPTCHA Enterprise ")],-1)),e("span",{class:l(["text-[11px]",a.recaptchaStatusClass])},[e("i",{class:l(a.recaptchaIconClass)},null,2),e("span",z,g(a.recaptchaStatusText),1)],2)]),e("div",D,[t[15]||(t[15]=e("span",{class:"text-sm text-gray-700"}," ",-1)),e("button",{type:"button",class:"text-sm text-primary hover:underline",onClick:t[5]||(t[5]=(...i)=>a.forgotPassword&&a.forgotPassword(...i))}," Forgot password? ")]),e("div",M,[e("button",{class:"w-full py-2.5 px-4 rounded-xl bg-primary text-white font-semibold tracking-wide shadow-md hover:shadow-lg hover:bg-tertiary transition disabled:opacity-60 disabled:cursor-not-allowed",type:"submit",disabled:!a.canSubmit||a.auth.isLoading},t[16]||(t[16]=[e("span",{class:"inline-flex items-center justify-center gap-2"},[e("i",{class:"mdi mdi-login-variant"}),e("span",null,"Log In")],-1)]),8,U)]),t[19]||(t[19]=o('<div class="relative my-4" data-v-d6ddea7b><div class="absolute inset-0 flex items-center" data-v-d6ddea7b><span class="w-full border-t border-gray-200" data-v-d6ddea7b></span></div><div class="relative flex justify-center text-xs" data-v-d6ddea7b><span class="bg-white/80 px-2 text-gray-500" data-v-d6ddea7b>or continue with</span></div></div>',1)),e("div",null,[e("button",{type:"button",class:"w-full py-2.5 px-4 rounded-xl bg-white text-gray-800 font-semibold tracking-wide border border-gray-300/80 shadow-sm hover:shadow-md hover:bg-gray-50 transition disabled:opacity-60",disabled:a.auth.isLoading,onClick:t[6]||(t[6]=(...i)=>a.signInWithSchoolAccount&&a.signInWithSchoolAccount(...i))},t[17]||(t[17]=[e("span",{class:"inline-flex items-center justify-center gap-2"},[e("i",{class:"mdi mdi-google"}),e("span",null,"Sign in with School Account"),e("span",{class:"text-xs text-gray-500"},"(knp.edu.ph)")],-1)]),8,B)]),e("div",F,[p(f,{to:"/register",class:"text-primary hover:underline"},{default:S(()=>t[18]||(t[18]=[h(" Don't have an account? ",-1),e("span",{class:"font-semibold"},"Register",-1)])),_:1,__:[18]})])],32)]),e("div",G,[e("div",W,[t[21]||(t[21]=e("span",null,"OSAS Kiosk v1.0",-1)),e("span",null,"© "+g(new Date().getFullYear())+" Student Services",1)])])]),t[23]||(t[23]=e("div",{class:"mt-6 text-center text-xs text-gray-300"},[e("p",null,"By signing in, you agree to our Student Portal Guidelines.")],-1))])]),p(y,{ref:"toast"},null,512)])}const tt=C(T,[["render",K],["__scopeId","data-v-d6ddea7b"]]);export{tt as default};
