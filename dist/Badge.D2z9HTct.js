import{r as h,x as F,A,q as l,l as O,e as o,h as G,P as re,$ as X,T as Y,c as w,L as j,D as ue,E as Z,a as u,W as y,d as p,f as C,F as z,B as N,j as M,t as $,g as S,v as ie,_ as de,H as ce,o as me}from"./index.BH0m-Moy.js";import{a as P,c as ve,b as ge}from"./SectionTitleLineWithButton.DJGDmw72.js";import{ah as pe,ai as K,V as fe,y as he,aj as ye,ak as be,al as ke,a0 as we}from"./SectionMain.0q4yaC4c.js";import{_ as xe}from"./_plugin-vue_export-helper.DlAUqK2U.js";const _e={class:"checkbox"},Q={__name:"TableCheckboxCell",props:{type:{type:String,default:"td"},modelValue:Boolean},emits:["update:modelValue"],setup(s,{emit:i}){const c=s,v=i,d=h(c.modelValue);return F(d,g=>{v("update:modelValue",g)}),F(()=>c.modelValue,g=>{d.value=g}),(g,m)=>(l(),A(X(s.type),{class:"lg:w-1"},{default:O(()=>[o("label",_e,[G(o("input",{"onUpdate:modelValue":m[0]||(m[0]=r=>d.value=r),type:"checkbox"},null,512),[[re,d.value]]),m[1]||(m[1]=o("span",{class:"check"},null,-1))])]),_:1}))}},Ce=Object.assign({name:"BaseButtons"},{__name:"BaseButtons",props:{noWrap:{type:Boolean,default:!1},type:{type:String,default:"justify-start"},classAddon:{type:String,default:"mr-3 last:mr-0 mb-3"},mb:{type:String,default:"-mb-3"}},setup(s){const i=s,c=Y(),v=w(()=>{const d=!!c.default,g=["flex","items-center",i.type,i.noWrap?"flex-nowrap":"flex-wrap"];i.mb&&g.push(i.mb);const m=d?c.default().map(r=>r&&r.children&&typeof r.children=="object"?j(r,{},r.children.map(f=>j(f,{class:[i.classAddon]}))):j(r,{class:[i.classAddon]})):null;return j("div",{class:g},m)});return(d,g)=>(l(),A(X(v.value)))}}),$e={class:"relative space-y-2"},Se={class:"flex items-center justify-between"},Be={class:"w-full border-collapse bg-white min-w-full"},Ve={class:"bg-white text-gray-700 text-sm border-b"},Pe={key:0,class:"p-2 w-10 text-center"},Ae={class:"flex items-center justify-between"},je={class:"font-medium"},Te={class:"flex items-center gap-2"},ze={key:0,class:"mt-1 p-2 border rounded bg-white shadow-md"},Ne=["onUpdate:modelValue","onInput"],Fe={key:1,class:"px-2 py-1 text-right w-1 whitespace-nowrap"},Me={key:0},De=["colspan"],Le={key:0,class:"p-2 w-10 text-center","data-label":"Select"},Ue=["data-label"],Oe={key:0},qe={key:1},Ee={key:1,class:"px-4 py-2 whitespace-nowrap","data-label":"Action"},Ie={key:1,class:"border-t text-sm font-semibold bg-gray-50"},Re={key:0,class:"p-2 w-10"},We=["data-label"],He={key:0},Je={key:1,class:"px-4 py-2"},Ke={class:"p-3 border rounded-lg bg-white text-sm flex flex-col sm:flex-row sm:justify-between sm:items-center"},Qe={class:"mb-2 sm:mb-0"},Ge={class:"flex flex-wrap items-center gap-2"},Xe=["value"],Ye={__name:"BaseTable",props:{columns:{type:Array,default:()=>[]},data:{type:Object,default:()=>({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]})},checkable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showAction:{type:Boolean,default:!0}},emits:["query-change","selected","sort","filter","edit"],setup(s,{emit:i}){const c=s,v=i,d=h(null),g=ue.useLoading(),m=h(null);F(()=>c.loading,t=>{t?m.value||(m.value=g.show({container:d.value,canCancel:!1,isFullPage:!1,color:"#3b82f6",opacity:.8})):m.value&&(m.value.hide(),m.value=null)},{immediate:!0}),Z(()=>{m.value&&(m.value.hide(),m.value=null)});const r=h(c.data.currentPage||1),f=h(c.data.pageSize||10),B=h(null),V=h("desc"),x=h({}),D=h({}),_=h(new Set);F(()=>c.data.currentPage,t=>r.value=t||1),F(()=>c.data.pageSize,t=>f.value=t||10);const b=w(()=>c.data||{total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),q=w(()=>b.value.data.filter(t=>Object.keys(x.value).every(n=>x.value[n]?t[n]?.toString().toLowerCase().includes(x.value[n].toLowerCase()):!0))),ee=w(()=>_.value.size===q.value.length&&q.value.length>0),L=w(()=>b.value.totalPages||Math.ceil(b.value.total/f.value)||1),te=w(()=>{const t=L.value,n=r.value,e=2,a=[];if(t<=7)for(let k=1;k<=t;k++)a.push(k);else{a.push(1);let k=Math.max(2,n-e),J=Math.min(t-1,n+e);k>2&&a.push("...");for(let E=k;E<=J;E++)a.push(E);J<t-1&&a.push("..."),a.push(t)}return a}),T=()=>{v("query-change",{page:r.value,limit:f.value,sort:B.value,order:V.value,filters:x.value})},U=t=>{t>=1&&t<=L.value&&(r.value=t,T())},ae=t=>{f.value=Number(t.target.value),r.value=1,T()},I=t=>{B.value===t?V.value=V.value==="asc"?"desc":"asc":(B.value=t,V.value="desc"),v("sort",{key:B.value,order:V.value}),T()},R=t=>{D.value[t]=!D.value[t]},W=(t,n)=>{x.value[t]=n,v("filter",x.value),T()},le=t=>{t?_.value=new Set(q.value.map(n=>n.id)):_.value.clear(),v("selected",Array.from(_.value))},se=(t,n)=>{t?_.value.add(n.id):_.value.delete(n.id),v("selected",Array.from(_.value))},ne=t=>v("edit",t),H=w(()=>{const t={};return c.columns.forEach(n=>{if(n.aggregate){let e=0;b.value.data.forEach(a=>{const k=parseFloat(a[n.key]);isNaN(k)||(e+=k)}),t[n.key]=e}}),t}),oe=w(()=>c.columns.some(t=>t.aggregate));return(t,n)=>(l(),u("div",$e,[o("div",Se,[o("div",null,[y(t.$slots,"toolbar-left",{},void 0,!0)]),o("div",null,[y(t.$slots,"toolbar-right",{},void 0,!0)])]),o("div",{ref_key:"tableContainer",ref:d,class:"table-container relative rounded-lg border border-gray-200 shadow-sm bg-white"},[o("table",Be,[o("thead",Ve,[o("tr",null,[s.checkable?(l(),u("th",Pe,[C(Q,{modelValue:ee.value,"onUpdate:modelValue":le},null,8,["modelValue"])])):p("",!0),(l(!0),u(z,null,N(s.columns,e=>(l(),u("th",{key:e.key,class:M(["px-4 py-2 text-left",e.key==="actions"||e.isAction?"whitespace-nowrap":"whitespace-normal break-words"])},[y(t.$slots,`header-${e.key}`,{column:e,sort:{key:B.value,order:V.value,toggle:()=>I(e.key)},filter:{value:x.value[e.key]||"",set:a=>W(e.key,a),open:!!D.value[e.key],toggle:()=>R(e.key)}},()=>[o("div",Ae,[o("span",je,$(e.label),1),o("div",Te,[e.sortable?(l(),A(P,{key:0,icon:B.value===e.key?V.value==="asc"?S(pe):S(K):S(K),small:"",onClick:a=>I(e.key)},null,8,["icon","onClick"])):p("",!0),e.filterable?(l(),A(P,{key:1,icon:S(fe),small:"",onClick:a=>R(e.key)},null,8,["icon","onClick"])):p("",!0)])]),C(de,{name:"fade"},{default:O(()=>[D.value[e.key]?(l(),u("div",ze,[G(o("input",{"onUpdate:modelValue":a=>x.value[e.key]=a,class:"w-full px-2 py-1 text-xs border rounded",placeholder:"Filter...",onInput:a=>W(e.key,a.target.value)},null,40,Ne),[[ie,x.value[e.key]]])])):p("",!0)]),_:2},1024)],!0)],2))),128)),s.showAction?(l(),u("th",Fe)):p("",!0)])]),o("tbody",null,[!b.value.data.length&&!s.loading?(l(),u("tr",Me,[o("td",{colspan:s.columns.length+(s.checkable?1:0)+(s.showAction?1:0),class:"p-6"},[y(t.$slots,"empty",{},()=>[n[2]||(n[2]=o("div",{class:"text-center text-sm text-gray-500"},"No data to display.",-1))],!0)],8,De)])):p("",!0),(l(!0),u(z,null,N(b.value.data,e=>(l(),u("tr",{key:e.id??e._key??JSON.stringify(e),class:"border-t text-sm hover:bg-gray-50"},[s.checkable?(l(),u("td",Le,[C(Q,{modelValue:_.value.has(e.id),"onUpdate:modelValue":a=>se(a,e)},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0),(l(!0),u(z,null,N(s.columns,a=>(l(),u("td",{key:a.key,class:M(["px-4 py-2",a.key==="actions"||a.isAction?"whitespace-nowrap":"whitespace-normal break-words"]),"data-label":a.label},[y(t.$slots,`cell-${a.key}`,{row:e,value:e[a.key],column:a},()=>[a.formatter?(l(),u("span",Oe,$(a.formatter(e[a.key],e)),1)):(l(),u("span",qe,$(e[a.key]??"-"),1))],!0)],10,Ue))),128)),s.showAction?(l(),u("td",Ee,[y(t.$slots,"cell-actions",{row:e},()=>[C(Ce,null,{default:O(()=>[C(P,{icon:S(he),small:"",onClick:a=>ne(e)},null,8,["icon","onClick"])]),_:2},1024)],!0)])):p("",!0)]))),128)),oe.value?(l(),u("tr",Ie,[s.checkable?(l(),u("td",Re)):p("",!0),(l(!0),u(z,null,N(s.columns,e=>(l(),u("td",{key:e.key,class:M(["px-4 py-2",e.key==="actions"||e.isAction?"whitespace-nowrap":"whitespace-normal break-words"]),"data-label":e.label},[y(t.$slots,`aggregate-${e.key}`,{value:H.value[e.key],column:e},()=>[e.aggregate?(l(),u("span",He,$(H.value[e.key]),1)):p("",!0)],!0)],10,We))),128)),s.showAction?(l(),u("td",Je)):p("",!0)])):p("",!0)])]),s.loading?y(t.$slots,"loading-overlay",{key:0},void 0,!0):p("",!0)],512),y(t.$slots,"pagination",{page:r.value,pageSize:f.value,total:b.value.total,totalPages:L.value,goToPage:U,setPageSize:e=>{f.value=e,r.value=1,T()}},()=>[o("div",Ke,[o("span",Qe,$(b.value.total?(r.value-1)*f.value+1:0)+" - "+$(Math.min(r.value*f.value,b.value.total))+" of "+$(b.value.total)+" items ",1),o("div",Ge,[C(P,{icon:S(ye),small:"",disabled:r.value===1,onClick:n[0]||(n[0]=e=>U(r.value-1))},null,8,["icon","disabled"]),(l(!0),u(z,null,N(te.value,(e,a)=>(l(),A(P,{key:a,active:e!=="..."&&e===r.value,label:e,small:"",disabled:e==="...",onClick:k=>e!=="..."&&U(e)},null,8,["active","label","disabled","onClick"]))),128)),C(P,{icon:S(be),small:"",disabled:r.value===L.value,onClick:n[1]||(n[1]=e=>U(r.value+1))},null,8,["icon","disabled"]),o("select",{class:"border p-1 text-sm rounded",onChange:ae,value:f.value},n[3]||(n[3]=[o("option",{value:"5"},"5 / page",-1),o("option",{value:"10"},"10 / page",-1),o("option",{value:"20"},"20 / page",-1)]),40,Xe)])])],!0)]))}},ot=xe(Ye,[["__scopeId","data-v-d4dfbd06"]]),Ze=ce({name:"BaseLevel",props:{mobile:Boolean,type:{type:String,default:"justify-between"}},render(){const s=[this.type,"items-center"],i=["flex"],c=["block","md:flex"],v=["flex","items-center","justify-center"];return j("div",{class:s.concat(this.mobile?i:c)},this.$slots.default().map((d,g)=>{const m=!this.mobile&&this.$slots.default().length>g+1?v.concat(["mb-6","md:mb-0"]):v;return j("div",{class:m},[d])}))}}),et={class:"flex flex-col md:flex-row items-center"},tt={class:"text-center md:text-left md:py-2"},rt={__name:"NotificationBar",props:{icon:{type:String,default:null},outline:Boolean,color:{type:String,required:!0},autoClose:{type:Number,default:5}},setup(s){const i=s,c=w(()=>i.outline?ve[i.color]:ge[i.color]),v=h(!1);let d=null;const g=()=>{d&&(clearTimeout(d),d=null),v.value=!0},m=Y(),r=w(()=>m.right);return me(()=>{i.autoClose>0&&(d=setTimeout(()=>{g()},i.autoClose*1e3))}),Z(()=>{d&&(clearTimeout(d),d=null)}),(f,B)=>v.value?p("",!0):(l(),u("div",{key:0,class:M([c.value,"px-3 py-6 md:py-3 mb-6 last:mb-0 border rounded-lg transition-colors duration-150"])},[C(Ze,null,{default:O(()=>[o("div",et,[s.icon?(l(),A(ke,{key:0,path:s.icon,w:"w-10 md:w-5",h:"h-10 md:h-5",size:"24",class:"md:mr-2"},null,8,["path"])):p("",!0),o("span",tt,[y(f.$slots,"default")])]),r.value?y(f.$slots,"right",{key:0}):(l(),A(P,{key:1,icon:S(we),small:"","rounded-full":"",color:"white",onClick:g},null,8,["icon"]))]),_:3})],2))}},ut={__name:"Badge",props:{text:{type:String,required:!0},tone:{type:String,default:"gray"}},setup(s){const i={blue:"bg-blue-50 text-blue-700 ring-blue-200",indigo:"bg-indigo-50 text-indigo-700 ring-indigo-200",emerald:"bg-emerald-50 text-emerald-700 ring-emerald-200",red:"bg-red-50 text-red-700 ring-red-200",gray:"bg-gray-100 text-gray-700 ring-gray-200",amber:"bg-amber-50 text-amber-700 ring-amber-200"};return(c,v)=>(l(),u("span",{class:M(["inline-flex items-center rounded-full px-2 py-[2px] text-[11px] ring-1",i[s.tone]||i.gray])},$(s.text),3))}};export{ot as B,rt as _,ut as a};
