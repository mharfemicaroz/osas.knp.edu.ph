import{r as h,x as F,A,q as l,l as L,e as n,h as Q,O as re,_ as Z,R as H,c as x,K as j,D as ue,E as X,a as u,V as y,d as p,f as C,F as N,B as T,t as S,g as $,v as ie,Z as de,G as ce,o as me,j as Y}from"./index.Cz8Q__a1.js";import{a as P,c as ve,b as ge}from"./SectionTitleLineWithButton.C78ZmtkX.js";import{ah as pe,ai as G,V as fe,y as he,aj as ye,ak as be,al as ke,a0 as xe}from"./SectionMain.DUr5RcMC.js";import{_ as we}from"./_plugin-vue_export-helper.DlAUqK2U.js";const _e={class:"checkbox"},J={__name:"TableCheckboxCell",props:{type:{type:String,default:"td"},modelValue:Boolean},emits:["update:modelValue"],setup(s,{emit:i}){const c=s,v=i,d=h(c.modelValue);return F(d,g=>{v("update:modelValue",g)}),F(()=>c.modelValue,g=>{d.value=g}),(g,m)=>(l(),A(Z(s.type),{class:"lg:w-1"},{default:L(()=>[n("label",_e,[Q(n("input",{"onUpdate:modelValue":m[0]||(m[0]=r=>d.value=r),type:"checkbox"},null,512),[[re,d.value]]),m[1]||(m[1]=n("span",{class:"check"},null,-1))])]),_:1}))}},Ce=Object.assign({name:"BaseButtons"},{__name:"BaseButtons",props:{noWrap:{type:Boolean,default:!1},type:{type:String,default:"justify-start"},classAddon:{type:String,default:"mr-3 last:mr-0 mb-3"},mb:{type:String,default:"-mb-3"}},setup(s){const i=s,c=H(),v=x(()=>{const d=!!c.default,g=["flex","items-center",i.type,i.noWrap?"flex-nowrap":"flex-wrap"];i.mb&&g.push(i.mb);const m=d?c.default().map(r=>r&&r.children&&typeof r.children=="object"?j(r,{},r.children.map(f=>j(f,{class:[i.classAddon]}))):j(r,{class:[i.classAddon]})):null;return j("div",{class:g},m)});return(d,g)=>(l(),A(Z(v.value)))}}),Se={class:"relative space-y-2"},$e={class:"flex items-center justify-between"},Be={class:"w-full border-collapse bg-white min-w-max"},Ve={class:"bg-white text-gray-700 text-sm border-b"},Pe={key:0,class:"p-2 w-10 text-center"},Ae={class:"flex items-center justify-between"},je={class:"font-medium"},ze={class:"flex items-center gap-2"},Ne={key:0,class:"mt-1 p-2 border rounded bg-white shadow-md"},Te=["onUpdate:modelValue","onInput"],Fe={key:1,class:"px-2 py-1 whitespace-nowrap text-right w-1"},Me={key:0},De=["colspan"],Ue={key:0,class:"p-2 w-10 text-center","data-label":"Select"},Le=["data-label"],Oe={key:0},Re={key:1},qe={key:1,class:"px-4 py-2 whitespace-nowrap","data-label":"Action"},Ee={key:1,class:"border-t text-sm font-semibold bg-gray-50"},Ie={key:0,class:"p-2 w-10"},Ke=["data-label"],We={key:0},Ge={key:1,class:"px-4 py-2"},Je={class:"p-3 border rounded-lg bg-white text-sm flex flex-col sm:flex-row sm:justify-between sm:items-center"},Qe={class:"mb-2 sm:mb-0"},Ze={class:"flex flex-wrap items-center gap-2"},He=["value"],Xe={__name:"BaseTable",props:{columns:{type:Array,default:()=>[]},data:{type:Object,default:()=>({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]})},checkable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showAction:{type:Boolean,default:!0}},emits:["query-change","selected","sort","filter","edit"],setup(s,{emit:i}){const c=s,v=i,d=h(null),g=ue.useLoading(),m=h(null);F(()=>c.loading,t=>{t?m.value||(m.value=g.show({container:d.value,canCancel:!1,isFullPage:!1,color:"#3b82f6",opacity:.8})):m.value&&(m.value.hide(),m.value=null)},{immediate:!0}),X(()=>{m.value&&(m.value.hide(),m.value=null)});const r=h(c.data.currentPage||1),f=h(c.data.pageSize||10),B=h(null),V=h("desc"),w=h({}),M=h({}),_=h(new Set);F(()=>c.data.currentPage,t=>r.value=t||1),F(()=>c.data.pageSize,t=>f.value=t||10);const b=x(()=>c.data||{total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),O=x(()=>b.value.data.filter(t=>Object.keys(w.value).every(o=>w.value[o]?t[o]?.toString().toLowerCase().includes(w.value[o].toLowerCase()):!0))),ee=x(()=>_.value.size===O.value.length&&O.value.length>0),D=x(()=>b.value.totalPages||Math.ceil(b.value.total/f.value)||1),te=x(()=>{const t=D.value,o=r.value,e=2,a=[];if(t<=7)for(let k=1;k<=t;k++)a.push(k);else{a.push(1);let k=Math.max(2,o-e),W=Math.min(t-1,o+e);k>2&&a.push("...");for(let R=k;R<=W;R++)a.push(R);W<t-1&&a.push("..."),a.push(t)}return a}),z=()=>{v("query-change",{page:r.value,limit:f.value,sort:B.value,order:V.value,filters:w.value})},U=t=>{t>=1&&t<=D.value&&(r.value=t,z())},ae=t=>{f.value=Number(t.target.value),r.value=1,z()},q=t=>{B.value===t?V.value=V.value==="asc"?"desc":"asc":(B.value=t,V.value="desc"),v("sort",{key:B.value,order:V.value}),z()},E=t=>{M.value[t]=!M.value[t]},I=(t,o)=>{w.value[t]=o,v("filter",w.value),z()},le=t=>{t?_.value=new Set(O.value.map(o=>o.id)):_.value.clear(),v("selected",Array.from(_.value))},se=(t,o)=>{t?_.value.add(o.id):_.value.delete(o.id),v("selected",Array.from(_.value))},oe=t=>v("edit",t),K=x(()=>{const t={};return c.columns.forEach(o=>{if(o.aggregate){let e=0;b.value.data.forEach(a=>{const k=parseFloat(a[o.key]);isNaN(k)||(e+=k)}),t[o.key]=e}}),t}),ne=x(()=>c.columns.some(t=>t.aggregate));return(t,o)=>(l(),u("div",Se,[n("div",$e,[n("div",null,[y(t.$slots,"toolbar-left",{},void 0,!0)]),n("div",null,[y(t.$slots,"toolbar-right",{},void 0,!0)])]),n("div",{ref_key:"tableContainer",ref:d,class:"table-container relative rounded-lg border border-gray-200 shadow-sm bg-white"},[n("table",Be,[n("thead",Ve,[n("tr",null,[s.checkable?(l(),u("th",Pe,[C(J,{modelValue:ee.value,"onUpdate:modelValue":le},null,8,["modelValue"])])):p("",!0),(l(!0),u(N,null,T(s.columns,e=>(l(),u("th",{key:e.key,class:"px-4 py-2 text-left whitespace-nowrap"},[y(t.$slots,`header-${e.key}`,{column:e,sort:{key:B.value,order:V.value,toggle:()=>q(e.key)},filter:{value:w.value[e.key]||"",set:a=>I(e.key,a),open:!!M.value[e.key],toggle:()=>E(e.key)}},()=>[n("div",Ae,[n("span",je,S(e.label),1),n("div",ze,[e.sortable?(l(),A(P,{key:0,icon:B.value===e.key?V.value==="asc"?$(pe):$(G):$(G),small:"",onClick:a=>q(e.key)},null,8,["icon","onClick"])):p("",!0),e.filterable?(l(),A(P,{key:1,icon:$(fe),small:"",onClick:a=>E(e.key)},null,8,["icon","onClick"])):p("",!0)])]),C(de,{name:"fade"},{default:L(()=>[M.value[e.key]?(l(),u("div",Ne,[Q(n("input",{"onUpdate:modelValue":a=>w.value[e.key]=a,class:"w-full px-2 py-1 text-xs border rounded",placeholder:"Filter...",onInput:a=>I(e.key,a.target.value)},null,40,Te),[[ie,w.value[e.key]]])])):p("",!0)]),_:2},1024)],!0)]))),128)),s.showAction?(l(),u("th",Fe)):p("",!0)])]),n("tbody",null,[!b.value.data.length&&!s.loading?(l(),u("tr",Me,[n("td",{colspan:s.columns.length+(s.checkable?1:0)+(s.showAction?1:0),class:"p-6"},[y(t.$slots,"empty",{},()=>[o[2]||(o[2]=n("div",{class:"text-center text-sm text-gray-500"},"No data to display.",-1))],!0)],8,De)])):p("",!0),(l(!0),u(N,null,T(b.value.data,e=>(l(),u("tr",{key:e.id??e._key??JSON.stringify(e),class:"border-t text-sm hover:bg-gray-50"},[s.checkable?(l(),u("td",Ue,[C(J,{modelValue:_.value.has(e.id),"onUpdate:modelValue":a=>se(a,e)},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0),(l(!0),u(N,null,T(s.columns,a=>(l(),u("td",{key:a.key,class:"px-4 py-2 whitespace-nowrap","data-label":a.label},[y(t.$slots,`cell-${a.key}`,{row:e,value:e[a.key],column:a},()=>[a.formatter?(l(),u("span",Oe,S(a.formatter(e[a.key],e)),1)):(l(),u("span",Re,S(e[a.key]??"-"),1))],!0)],8,Le))),128)),s.showAction?(l(),u("td",qe,[y(t.$slots,"cell-actions",{row:e},()=>[C(Ce,null,{default:L(()=>[C(P,{icon:$(he),small:"",onClick:a=>oe(e)},null,8,["icon","onClick"])]),_:2},1024)],!0)])):p("",!0)]))),128)),ne.value?(l(),u("tr",Ee,[s.checkable?(l(),u("td",Ie)):p("",!0),(l(!0),u(N,null,T(s.columns,e=>(l(),u("td",{key:e.key,class:"px-4 py-2 whitespace-nowrap","data-label":e.label},[y(t.$slots,`aggregate-${e.key}`,{value:K.value[e.key],column:e},()=>[e.aggregate?(l(),u("span",We,S(K.value[e.key]),1)):p("",!0)],!0)],8,Ke))),128)),s.showAction?(l(),u("td",Ge)):p("",!0)])):p("",!0)])]),s.loading?y(t.$slots,"loading-overlay",{key:0},void 0,!0):p("",!0)],512),y(t.$slots,"pagination",{page:r.value,pageSize:f.value,total:b.value.total,totalPages:D.value,goToPage:U,setPageSize:e=>{f.value=e,r.value=1,z()}},()=>[n("div",Je,[n("span",Qe,S(b.value.total?(r.value-1)*f.value+1:0)+" - "+S(Math.min(r.value*f.value,b.value.total))+" of "+S(b.value.total)+" items ",1),n("div",Ze,[C(P,{icon:$(ye),small:"",disabled:r.value===1,onClick:o[0]||(o[0]=e=>U(r.value-1))},null,8,["icon","disabled"]),(l(!0),u(N,null,T(te.value,(e,a)=>(l(),A(P,{key:a,active:e!=="..."&&e===r.value,label:e,small:"",disabled:e==="...",onClick:k=>e!=="..."&&U(e)},null,8,["active","label","disabled","onClick"]))),128)),C(P,{icon:$(be),small:"",disabled:r.value===D.value,onClick:o[1]||(o[1]=e=>U(r.value+1))},null,8,["icon","disabled"]),n("select",{class:"border p-1 text-sm rounded",onChange:ae,value:f.value},o[3]||(o[3]=[n("option",{value:"5"},"5 / page",-1),n("option",{value:"10"},"10 / page",-1),n("option",{value:"20"},"20 / page",-1)]),40,He)])])],!0)]))}},nt=we(Xe,[["__scopeId","data-v-e1b863b5"]]),Ye=ce({name:"BaseLevel",props:{mobile:Boolean,type:{type:String,default:"justify-between"}},render(){const s=[this.type,"items-center"],i=["flex"],c=["block","md:flex"],v=["flex","items-center","justify-center"];return j("div",{class:s.concat(this.mobile?i:c)},this.$slots.default().map((d,g)=>{const m=!this.mobile&&this.$slots.default().length>g+1?v.concat(["mb-6","md:mb-0"]):v;return j("div",{class:m},[d])}))}}),et={class:"flex flex-col md:flex-row items-center"},tt={class:"text-center md:text-left md:py-2"},rt={__name:"NotificationBar",props:{icon:{type:String,default:null},outline:Boolean,color:{type:String,required:!0},autoClose:{type:Number,default:5}},setup(s){const i=s,c=x(()=>i.outline?ve[i.color]:ge[i.color]),v=h(!1);let d=null;const g=()=>{d&&(clearTimeout(d),d=null),v.value=!0},m=H(),r=x(()=>m.right);return me(()=>{i.autoClose>0&&(d=setTimeout(()=>{g()},i.autoClose*1e3))}),X(()=>{d&&(clearTimeout(d),d=null)}),(f,B)=>v.value?p("",!0):(l(),u("div",{key:0,class:Y([c.value,"px-3 py-6 md:py-3 mb-6 last:mb-0 border rounded-lg transition-colors duration-150"])},[C(Ye,null,{default:L(()=>[n("div",et,[s.icon?(l(),A(ke,{key:0,path:s.icon,w:"w-10 md:w-5",h:"h-10 md:h-5",size:"24",class:"md:mr-2"},null,8,["path"])):p("",!0),n("span",tt,[y(f.$slots,"default")])]),r.value?y(f.$slots,"right",{key:0}):(l(),A(P,{key:1,icon:$(xe),small:"","rounded-full":"",color:"white",onClick:g},null,8,["icon"]))]),_:3})],2))}},ut={__name:"Badge",props:{text:{type:String,required:!0},tone:{type:String,default:"gray"}},setup(s){const i={blue:"bg-blue-50 text-blue-700 ring-blue-200",indigo:"bg-indigo-50 text-indigo-700 ring-indigo-200",emerald:"bg-emerald-50 text-emerald-700 ring-emerald-200",red:"bg-red-50 text-red-700 ring-red-200",gray:"bg-gray-100 text-gray-700 ring-gray-200",amber:"bg-amber-50 text-amber-700 ring-amber-200"};return(c,v)=>(l(),u("span",{class:Y(["inline-flex items-center rounded-full px-2 py-[2px] text-[11px] ring-1",i[s.tone]||i.gray])},S(s.text),3))}};export{nt as B,rt as _,ut as a};
