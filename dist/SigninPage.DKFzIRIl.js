import{T as y}from"./ToasterComponent.BWrJUjhc.js";import{c as o,a as c,b as p,d as e,e as g,w,f as n,v as u,g as _,n as m,h as x,t as l,i as k,r as f,u as S,o as d}from"./index.yisJh3bp.js";import{_ as C}from"./logo.Dx3Q79ni.js";import{_ as I}from"./_plugin-vue_export-helper.DlAUqK2U.js";const V={data(){return{email:"",password:"",showPassword:!1,capsOn:!1,captchaA:0,captchaB:0,captchaInput:"",captchaError:"",honeypot:""}},computed:{auth(){return S()},captchaAnswer(){return this.captchaA+this.captchaB},captchaValid(){return String(parseInt(this.captchaInput||"NaN",10))===String(this.captchaAnswer)},captchaStateClass(){return this.captchaInput?this.captchaValid?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-400 border border-gray-200"},captchaIconClass(){return this.captchaInput?this.captchaValid?"mdi mdi-check-bold text-xl":"mdi mdi-close-thick text-xl":"mdi mdi-help-circle-outline text-xl"},canSubmit(){return this.email.trim().length>0&&this.password.length>0&&this.captchaValid&&!this.honeypot}},methods:{async onSubmit(){if(!this.honeypot){if(!this.captchaValid){this.captchaError="Incorrect captcha answer.";return}this.captchaError="";try{const i=await this.auth.login(this.email,this.password);if(i?.requiresVerification||this.auth.requiresVerification){this.$refs.toast.showToast("info","Please verify your email before logging in."),this.$router.push({name:"verify-prompt",query:{email:this.email}});return}if(i?.requires2FA)return;this.$refs.toast.showToast("success","Login successful!")}catch(i){this.$refs.toast.showToast("warning",i.message||"Invalid login credentials!"),this.genCaptcha(),this.captchaInput=""}}},forgotPassword(){this.$refs.toast.showToast("info","Please contact support to reset your password.")},detectCaps(i){i.getModifierState&&(this.capsOn=i.getModifierState("CapsLock"))},genCaptcha(){const i=(t,h)=>Math.floor(Math.random()*(h-t+1))+t;this.captchaA=i(10,49),this.captchaB=i(10,49),this.captchaInput="",this.captchaError=""}},components:{ToasterComponent:y},created(){this.genCaptcha()}},P={class:"min-h-screen relative overflow-hidden"},A={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},E={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},T={class:"w-full max-w-md"},j={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 hover:ring-black/10 transition"},B={class:"p-6 sm:p-7"},N={class:"relative"},M={class:"space-y-2"},O={class:"relative"},q=["type"],L={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},D={class:"space-y-2"},U={class:"flex items-center justify-between"},z={class:"flex items-center gap-3"},F={class:"flex-1"},K={class:"w-full rounded-xl border border-gray-300/80 bg-white/70 px-3 py-2.5 text-gray-900 flex items-center justify-between"},R={class:"text-sm select-none"},G={key:0,class:"text-xs text-red-600"},Y={class:"flex items-center justify-between"},H={class:"pt-1"},J=["disabled"],Q={class:"text-center text-xs mt-3"},W={class:"px-6 sm:px-7 pb-6"},X={class:"flex items-center justify-between text-[11px] text-gray-500"};function Z(i,t,h,$,s,r){const b=f("router-link"),v=f("ToasterComponent");return d(),o("div",P,[t[24]||(t[24]=c('<div class="absolute inset-0" data-v-6e89a716><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-6e89a716></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-6e89a716></div><div class="absolute inset-0 backdrop-blur-sm" data-v-6e89a716></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-6e89a716></div></div>',1)),r.auth.isLoading?(d(),o("div",A,t[9]||(t[9]=[e("div",{class:"loader"},null,-1)]))):p("",!0),e("div",E,[e("div",T,[t[22]||(t[22]=c('<div class="mb-6 text-center" data-v-6e89a716><a href="index.html" class="inline-flex items-center justify-center" data-v-6e89a716><img src="'+C+'" alt="OSAS" class="h-14 w-auto" data-v-6e89a716></a><h1 class="mt-4 text-2xl font-extrabold tracking-wide text-white" data-v-6e89a716> Office of Student Affairs &amp; Services </h1><p class="mt-1 text-primary-text/90 text-sm" data-v-6e89a716>Serve. Support. Empower.</p></div>',1)),e("div",j,[e("div",B,[t[20]||(t[20]=c('<div class="mb-5 text-center" data-v-6e89a716><div class="inline-flex items-center gap-2" data-v-6e89a716><span class="inline-grid h-8 w-8 place-items-center rounded-full bg-primary/10" data-v-6e89a716><i class="mdi mdi-account-key text-primary text-xl" data-v-6e89a716></i></span><h2 class="text-lg font-bold text-gray-900" data-v-6e89a716>Sign In</h2></div><p class="text-xs text-gray-500 mt-2" data-v-6e89a716>Use your email and password</p></div>',1)),e("form",{onSubmit:t[8]||(t[8]=w((...a)=>r.onSubmit&&r.onSubmit(...a),["prevent"])),class:"space-y-4",novalidate:""},[n(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>s.honeypot=a),class:"hidden",tabindex:"-1",autocomplete:"off","aria-hidden":"true"},null,512),[[u,s.honeypot]]),e("div",N,[t[10]||(t[10]=e("label",{class:"sr-only"},"Email",-1)),t[11]||(t[11]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"mdi mdi-email-outline text-gray-400 text-xl"})],-1)),n(e("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"email",required:"",placeholder:"Email","onUpdate:modelValue":t[1]||(t[1]=a=>s.email=a),autocomplete:"email"},null,512),[[u,s.email,void 0,{trim:!0}]])]),e("div",M,[e("div",O,[t[12]||(t[12]=e("label",{class:"sr-only"},"Password",-1)),t[13]||(t[13]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("i",{class:"mdi mdi-lock-outline text-gray-400 text-xl"})],-1)),n(e("input",{type:s.showPassword?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",placeholder:"Password","onUpdate:modelValue":t[2]||(t[2]=a=>s.password=a),onKeyup:t[3]||(t[3]=a=>r.detectCaps(a)),autocomplete:"current-password"},null,40,q),[[_,s.password]]),e("button",{type:"button",onClick:t[4]||(t[4]=a=>s.showPassword=!s.showPassword),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[e("i",{class:m(s.showPassword?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),s.capsOn?(d(),o("div",L,t[14]||(t[14]=[e("i",{class:"mdi mdi-alert"},null,-1),e("span",null,"Caps Lock is ON",-1)]))):p("",!0)]),e("div",D,[e("div",U,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-gray-700"},"Captcha",-1)),e("button",{type:"button",onClick:t[5]||(t[5]=(...a)=>r.genCaptcha&&r.genCaptcha(...a)),class:"text-xs text-primary hover:underline inline-flex items-center gap-1"},t[15]||(t[15]=[e("i",{class:"mdi mdi-refresh"},null,-1),x(" Refresh ",-1)]))]),e("div",z,[e("div",F,[e("div",K,[e("span",R,l(s.captchaA)+" + "+l(s.captchaB)+" =",1),n(e("input",{class:"ml-3 w-24 text-right bg-transparent focus:outline-none",inputmode:"numeric",pattern:"[0-9]*",placeholder:"Answer","onUpdate:modelValue":t[6]||(t[6]=a=>s.captchaInput=a)},null,512),[[u,s.captchaInput,void 0,{trim:!0}]])])]),e("span",{class:m(["inline-flex h-9 w-9 items-center justify-center rounded-lg",r.captchaStateClass])},[e("i",{class:m(r.captchaIconClass)},null,2)],2)]),s.captchaError?(d(),o("p",G,l(s.captchaError),1)):p("",!0)]),e("div",Y,[t[17]||(t[17]=e("span",{class:"text-sm text-gray-700"}," ",-1)),e("button",{type:"button",class:"text-sm text-primary hover:underline",onClick:t[7]||(t[7]=(...a)=>r.forgotPassword&&r.forgotPassword(...a))}," Forgot password? ")]),e("div",H,[e("button",{class:"w-full py-2.5 px-4 rounded-xl bg-primary text-white font-semibold tracking-wide shadow-md hover:shadow-lg hover:bg-tertiary transition disabled:opacity-60 disabled:cursor-not-allowed",type:"submit",disabled:!r.canSubmit||r.auth.isLoading},t[18]||(t[18]=[e("span",{class:"inline-flex items-center justify-center gap-2"},[e("i",{class:"mdi mdi-login-variant"}),e("span",null,"Log In")],-1)]),8,J)]),e("div",Q,[g(b,{to:"/register",class:"text-primary hover:underline"},{default:k(()=>t[19]||(t[19]=[x(" Don't have an account? ",-1),e("span",{class:"font-semibold"},"Register",-1)])),_:1,__:[19]})])],32)]),e("div",W,[e("div",X,[t[21]||(t[21]=e("span",null,"OSAS Kiosk v1.0",-1)),e("span",null,"© "+l(new Date().getFullYear())+" Student Services",1)])])]),t[23]||(t[23]=e("div",{class:"mt-6 text-center text-xs text-gray-300"},[e("p",null,"By signing in, you agree to our Student Portal Guidelines.")],-1))])]),g(v,{ref:"toast"},null,512)])}const rt=I(V,[["render",Z],["__scopeId","data-v-6e89a716"]]);export{rt as default};
