import{T as w}from"./ToasterComponent.BWrJUjhc.js";import{c as o,a as m,b as l,d as t,e as x,w as _,f as d,v as c,g as f,n as p,h as g,t as u,i as k,r as y,j as C,o as n}from"./index.yisJh3bp.js";import{_ as S}from"./logo.Dx3Q79ni.js";import{_ as V}from"./_plugin-vue_export-helper.DlAUqK2U.js";const P={data(){return{username:"",email:"",first_name:"",last_name:"",role:"student",is_active:0,password:"",confirmPassword:"",showPassword:!1,showConfirm:!1,capsOnPwd:!1,capsOnConfirm:!1,isLoading:!1,triedSubmit:!1,honeypot:"",captchaA:0,captchaB:0,captchaInput:"",captchaError:""}},computed:{usernameValid(){return/^[a-zA-Z0-9._-]{4,20}$/.test(this.username)},validEmailDomain(){return/@knp\.edu\.ph$/i.test(this.email)},passwordValid(){return/^(?=.*[A-Za-z])(?=.*\d).{8,}$/.test(this.password)},passwordsDontMatch(){return this.password&&this.confirmPassword&&this.password!==this.confirmPassword},captchaAnswer(){return this.captchaA+this.captchaB},captchaValid(){return String(parseInt(this.captchaInput||"NaN",10))===String(this.captchaAnswer)},captchaStateClass(){return this.captchaInput?this.captchaValid?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-400 border border-gray-200"},captchaIconClass(){return this.captchaInput?this.captchaValid?"mdi mdi-check-bold text-xl":"mdi mdi-close-thick text-xl":"mdi mdi-help-circle-outline text-xl"},canSubmit(){return this.usernameValid&&this.validEmailDomain&&this.first_name.trim().length>0&&this.last_name.trim().length>0&&this.passwordValid&&!this.passwordsDontMatch&&this.captchaValid&&!this.honeypot}},methods:{async onSubmit(){if(this.triedSubmit=!0,!this.canSubmit){this.captchaValid||(this.captchaError="Incorrect captcha answer.");return}this.captchaError="";try{this.isLoading=!0;const a={username:this.username.trim(),email:this.email.trim(),password:this.password,role:this.role,is_active:this.is_active,first_name:this.first_name.trim(),last_name:this.last_name.trim()};await C.post("/auth/register",a),this.$refs.toast.showToast("success","Registration successful! Please sign in."),this.username="",this.email="",this.first_name="",this.last_name="",this.password="",this.confirmPassword="",this.captchaInput="",this.triedSubmit=!1,setTimeout(()=>{this.$router.push({name:"login"})},500)}catch(a){const e=a?.response?.data?.message||a?.message||"Registration failed";this.$refs.toast.showToast("warning",e),this.genCaptcha()}finally{this.isLoading=!1}},detectCaps(a){return a.getModifierState?a.getModifierState("CapsLock"):!1},genCaptcha(){const a=(e,h)=>Math.floor(Math.random()*(h-e+1))+e;this.captchaA=a(10,49),this.captchaB=a(10,49),this.captchaInput="",this.captchaError=""}},components:{ToasterComponent:w},created(){this.genCaptcha()}},A={class:"min-h-screen relative overflow-hidden"},E={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},I={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},U={class:"w-full max-w-md"},L={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 hover:ring-black/10 transition"},O={class:"p-6 sm:p-7"},D={class:"space-y-1"},M={class:"relative"},j={key:0,class:"text-xs text-rose-600"},N={class:"space-y-1"},T={class:"relative"},q={key:0,class:"text-xs text-rose-600"},B={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},z={class:"space-y-1"},F={class:"relative"},R={key:0,class:"text-xs text-rose-600"},K={class:"space-y-1"},Z={class:"relative"},G={key:0,class:"text-xs text-rose-600"},Y={class:"space-y-2"},H={class:"relative"},J=["type"],Q={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},W={key:1,class:"text-xs text-rose-600"},X={class:"space-y-2"},$={class:"relative"},ee=["type"],te={key:0,class:"flex items-center gap-2 text-amber-600 text-xs"},se={key:1,class:"text-xs text-rose-600"},ie={class:"space-y-2"},re={class:"flex items-center justify-between"},ae={class:"flex items-center gap-3"},oe={class:"flex-1"},ne={class:"w-full rounded-xl border border-gray-300/80 bg-white/70 px-3 py-2.5 text-gray-900 flex items-center justify-between"},le={class:"text-sm select-none"},de={key:0,class:"text-xs text-red-600"},ce={class:"pt-1"},pe=["disabled"],ue={class:"text-center text-xs"},me={class:"px-6 sm:px-7 pb-6"},he={class:"flex items-center justify-between text-[11px] text-gray-500"};function xe(a,e,h,fe,s,r){const b=y("router-link"),v=y("ToasterComponent");return n(),o("div",A,[e[38]||(e[38]=m('<div class="absolute inset-0" data-v-30125a3d><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-30125a3d></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-30125a3d></div><div class="absolute inset-0 backdrop-blur-sm" data-v-30125a3d></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-30125a3d></div></div>',1)),s.isLoading?(n(),o("div",E,e[15]||(e[15]=[t("div",{class:"loader"},null,-1)]))):l("",!0),t("div",I,[t("div",U,[e[36]||(e[36]=m('<div class="mb-6 text-center" data-v-30125a3d><a href="index.html" class="inline-flex items-center justify-center" data-v-30125a3d><img src="'+S+'" alt="OSAS" class="h-14 w-auto" data-v-30125a3d></a><h1 class="mt-4 text-2xl font-extrabold tracking-wide text-white" data-v-30125a3d>Office of Student Affairs &amp; Services</h1><p class="mt-1 text-primary-text/90 text-sm" data-v-30125a3d>Serve. Support. Empower.</p></div>',1)),t("div",L,[t("div",O,[e[34]||(e[34]=m('<div class="mb-5 text-center" data-v-30125a3d><div class="inline-flex items-center gap-2" data-v-30125a3d><span class="inline-grid h-8 w-8 place-items-center rounded-full bg-primary/10" data-v-30125a3d><i class="mdi mdi-account-plus text-primary text-xl" data-v-30125a3d></i></span><h2 class="text-lg font-bold text-gray-900" data-v-30125a3d>Create Account</h2></div><p class="text-xs text-gray-500 mt-2" data-v-30125a3d>Fill in the details to register</p></div>',1)),t("form",{onSubmit:e[14]||(e[14]=_((...i)=>r.onSubmit&&r.onSubmit(...i),["prevent"])),class:"space-y-4",novalidate:""},[d(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>s.honeypot=i),class:"hidden",tabindex:"-1",autocomplete:"off","aria-hidden":"true"},null,512),[[c,s.honeypot]]),t("div",D,[t("div",M,[e[16]||(e[16]=t("label",{class:"sr-only"},"Username",-1)),e[17]||(e[17]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-account-outline text-gray-400 text-xl"})],-1)),d(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"Username","onUpdate:modelValue":e[1]||(e[1]=i=>s.username=i),autocomplete:"username"},null,512),[[c,s.username,void 0,{trim:!0}]])]),s.username&&!r.usernameValid?(n(),o("p",j," Username must be 4–20 characters and use letters, numbers, dot, underscore, or hyphen. ")):l("",!0)]),t("div",N,[t("div",T,[e[18]||(e[18]=t("label",{class:"sr-only"},"Email",-1)),e[19]||(e[19]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-email-outline text-gray-400 text-xl"})],-1)),d(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"email",required:"",placeholder:"Email (must be @knp.edu.ph)","onUpdate:modelValue":e[2]||(e[2]=i=>s.email=i),autocomplete:"email"},null,512),[[c,s.email,void 0,{trim:!0}]])]),s.email&&!r.validEmailDomain?(n(),o("p",q,"Email must end with @knp.edu.ph")):l("",!0)]),t("div",B,[t("div",z,[t("div",F,[e[20]||(e[20]=t("label",{class:"sr-only"},"First name",-1)),e[21]||(e[21]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-card-account-details-outline text-gray-400 text-xl"})],-1)),d(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"First name","onUpdate:modelValue":e[3]||(e[3]=i=>s.first_name=i),autocomplete:"given-name"},null,512),[[c,s.first_name,void 0,{trim:!0}]])]),s.first_name===""&&s.triedSubmit?(n(),o("p",R,"First name is required.")):l("",!0)]),t("div",K,[t("div",Z,[e[22]||(e[22]=t("label",{class:"sr-only"},"Last name",-1)),e[23]||(e[23]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-card-account-details text-gray-400 text-xl"})],-1)),d(t("input",{class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-3 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",type:"text",required:"",placeholder:"Last name","onUpdate:modelValue":e[4]||(e[4]=i=>s.last_name=i),autocomplete:"family-name"},null,512),[[c,s.last_name,void 0,{trim:!0}]])]),s.last_name===""&&s.triedSubmit?(n(),o("p",G,"Last name is required.")):l("",!0)])]),d(t("input",{type:"hidden","onUpdate:modelValue":e[5]||(e[5]=i=>s.role=i)},null,512),[[c,s.role]]),t("div",Y,[t("div",H,[e[24]||(e[24]=t("label",{class:"sr-only"},"Password",-1)),e[25]||(e[25]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-lock-outline text-gray-400 text-xl"})],-1)),d(t("input",{type:s.showPassword?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",placeholder:"Password","onUpdate:modelValue":e[6]||(e[6]=i=>s.password=i),onKeyup:e[7]||(e[7]=i=>s.capsOnPwd=r.detectCaps(i)),autocomplete:"new-password",minlength:"8"},null,40,J),[[f,s.password]]),t("button",{type:"button",onClick:e[8]||(e[8]=i=>s.showPassword=!s.showPassword),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[t("i",{class:p(s.showPassword?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),s.capsOnPwd?(n(),o("div",Q,e[26]||(e[26]=[t("i",{class:"mdi mdi-alert"},null,-1),t("span",null,"Caps Lock is ON",-1)]))):l("",!0),s.password&&!r.passwordValid?(n(),o("p",W," Password must be at least 8 characters and include letters and numbers. ")):l("",!0)]),t("div",X,[t("div",$,[e[27]||(e[27]=t("label",{class:"sr-only"},"Confirm Password",-1)),e[28]||(e[28]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"mdi mdi-lock-check-outline text-gray-400 text-xl"})],-1)),d(t("input",{type:s.showConfirm?"text":"password",class:"w-full rounded-xl border border-gray-300/80 bg-white/70 pl-11 pr-11 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-primary/20 focus:border-primary transition disabled:opacity-60",required:"",placeholder:"Confirm password","onUpdate:modelValue":e[9]||(e[9]=i=>s.confirmPassword=i),onKeyup:e[10]||(e[10]=i=>s.capsOnConfirm=r.detectCaps(i)),autocomplete:"new-password",minlength:"8"},null,40,ee),[[f,s.confirmPassword]]),t("button",{type:"button",onClick:e[11]||(e[11]=i=>s.showConfirm=!s.showConfirm),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[t("i",{class:p(s.showConfirm?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline")},null,2)])]),s.capsOnConfirm?(n(),o("div",te,e[29]||(e[29]=[t("i",{class:"mdi mdi-alert"},null,-1),t("span",null,"Caps Lock is ON",-1)]))):l("",!0),r.passwordsDontMatch?(n(),o("p",se,"Passwords do not match.")):l("",!0)]),t("div",ie,[t("div",re,[e[31]||(e[31]=t("label",{class:"text-sm font-medium text-gray-700"},"Captcha",-1)),t("button",{type:"button",onClick:e[12]||(e[12]=(...i)=>r.genCaptcha&&r.genCaptcha(...i)),class:"text-xs text-primary hover:underline inline-flex items-center gap-1"},e[30]||(e[30]=[t("i",{class:"mdi mdi-refresh"},null,-1),g(" Refresh ",-1)]))]),t("div",ae,[t("div",oe,[t("div",ne,[t("span",le,u(s.captchaA)+" + "+u(s.captchaB)+" =",1),d(t("input",{class:"ml-3 w-24 text-right bg-transparent focus:outline-none",inputmode:"numeric",pattern:"[0-9]*",placeholder:"Answer","onUpdate:modelValue":e[13]||(e[13]=i=>s.captchaInput=i)},null,512),[[c,s.captchaInput,void 0,{trim:!0}]])])]),t("span",{class:p(["inline-flex h-9 w-9 items-center justify-center rounded-lg",r.captchaStateClass])},[t("i",{class:p(r.captchaIconClass)},null,2)],2)]),s.captchaError?(n(),o("p",de,u(s.captchaError),1)):l("",!0)]),t("div",ce,[t("button",{class:"w-full py-2.5 px-4 rounded-xl bg-primary text-white font-semibold tracking-wide shadow-md hover:shadow-lg hover:bg-tertiary transition disabled:opacity-60 disabled:cursor-not-allowed",type:"submit",disabled:!r.canSubmit||s.isLoading},e[32]||(e[32]=[t("span",{class:"inline-flex items-center justify-center gap-2"},[t("i",{class:"mdi mdi-account-check-outline"}),t("span",null,"Create Account")],-1)]),8,pe)]),t("div",ue,[x(b,{to:"/login",class:"text-primary hover:underline"},{default:k(()=>e[33]||(e[33]=[g("Already have an account? Sign in",-1)])),_:1,__:[33]})])],32)]),t("div",me,[t("div",he,[e[35]||(e[35]=t("span",null,"OSAS Kiosk v1.0",-1)),t("span",null,"© "+u(new Date().getFullYear())+" Student Services",1)])])]),e[37]||(e[37]=t("div",{class:"mt-6 text-center text-xs text-gray-300"},[t("p",null,"By registering, you agree to our Student Portal Guidelines.")],-1))])]),x(v,{ref:"toast"},null,512)])}const we=V(P,[["render",xe],["__scopeId","data-v-30125a3d"]]);export{we as default};
