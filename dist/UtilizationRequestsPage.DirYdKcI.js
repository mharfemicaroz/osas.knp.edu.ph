import{c as W,r as h,x as ye,a as w,d as q,q as g,e as l,k as ae,t as V,j as xe,g as T,F as J,B as le,S as _,o as ve,f as k,h as N,v as Q,C as oe,u as Pe,z as Le,l as M,A as _e,L as Ne,P as we}from"./index.CE3HtnZL.js";import{E as Oe,a as D,d as be,Q as Ce,_ as Ye}from"./dayjs.min.B2S_53RF.js";import{B as je,E as Me,F as qe,G as We,H as Ge,I as Ke,C as Qe,D as He,z as Je,_ as Xe,a as Ze,g as et,J as tt,i as at,a7 as lt,K as it,L as nt,M as st,V as ot}from"./SectionMain.B1qeU-9X.js";import{_ as rt,a as se}from"./SectionTitleLineWithButton.DkSeNe6e.js";import{_ as dt,B as ct,a as pe}from"./Badge.vpGwm-Aa.js";import{_ as Se}from"./UtilizationRequestFormModal.CcFT7vpv.js";import{u as re}from"./utilizationRequest.Dl5tdHnU.js";import{i as ut,a as mt,b as ft,F as pt}from"./index.D1Eoagpn.js";import{Q as yt}from"./browser.D7uE4X8y.js";import{u as vt}from"./clubScope.9aZSclH4.js";import"./IconifyButton.DzmiJ8qZ.js";import"./activityDesignService.m4gWNR3O.js";import"./utilizationRequestService.mGIlY9hl.js";import"./liquidationFundService.Dm5mxxZE.js";import"./ToasterComponent.DLW6irC6.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";import"./activityDesign.DAb3TYYx.js";const gt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},bt={class:"bg-white p-4 rounded-xl shadow-xl w-[980px] max-h-screen overflow-auto"},ht={class:"flex items-center justify-between mb-3"},xt={class:"text-lg font-semibold"},_t={class:"text-gray-600"},wt={class:"flex items-center justify-between gap-2"},Ct={class:"text-sm text-gray-600"},St={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24","aria-hidden":"true"},At=["d"],kt=["disabled"],Tt={class:"mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"},Et={class:"aspect-video bg-white border rounded overflow-hidden flex items-center justify-center"},Ft=["src"],$t={key:1,class:"flex items-center justify-center w-full h-full"},Bt=["d"],Rt={class:"mt-2 text-xs"},Vt=["title"],zt={class:"text-gray-500 flex items-center justify-between"},Ut={key:0},It={key:0},Dt={class:"mt-2 flex items-center justify-between gap-2"},Pt=["onClick","title"],Lt={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24","aria-hidden":"true"},Nt=["d"],Ot=["onClick"],Yt={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24","aria-hidden":"true"},jt=["d"],Mt={key:0,class:"mt-6 text-center text-sm text-gray-500"},qt=10*1024*1024,Wt={__name:"UtilizationAttachmentsModal",props:{modelValue:{type:Boolean,default:!1},row:{type:Object,default:null}},emits:["update:modelValue"],setup(e,{emit:i}){const x=e,c=i,p=W({get:()=>x.modelValue,set:a=>c("update:modelValue",a)}),y=re(),d=h(null),v=h(!1),B=new Set(["image/png","image/jpeg","image/webp","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]),F=new Set(["png","jpg","jpeg","webp","pdf","docx","xlsx"]),z=(a="")=>String(a).toLowerCase().match(/\.([a-z0-9]+)$/i)?.[1]||"",L=(a="")=>typeof a=="string"&&a.match(/^data:([^;]+);base64,/i)?.[1]||"",P=a=>{const u=a?.type&&B.has(a.type),f=a?.name&&F.has(z(a.name));return u||f},A=(a="")=>String(a).startsWith("image/"),o=(a="")=>a==="application/pdf",s=(a="")=>a==="application/vnd.openxmlformats-officedocument.wordprocessingml.document",m=(a="")=>a==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",b=(a="")=>o(a)?Me:s(a)?qe:m(a)?We:A(a)?Ge:Ke,O=(a="")=>o(a)?"PDF":s(a)?"Word":m(a)?"Excel":A(a)?"Image":"File",S=(a="")=>o(a)?"pdf":s(a)?"docx":m(a)?"xlsx":a==="image/png"?"png":a==="image/jpeg"?"jpg":a==="image/webp"?"webp":"",$=(a="attachment",u="")=>/\.[a-z0-9]+$/i.test(a)?a:u?`${a}.${u.startsWith(".")?u.slice(1):u}`:a,Y=a=>a<1024?`${a} B`:a<1024*1024?`${(a/1024).toFixed(1)} KB`:`${(a/(1024*1024)).toFixed(1)} MB`,G=W(()=>{const a=d.value?.attachments;if(!a)return[];try{return Array.isArray(a)?a:JSON.parse(a||"[]")}catch{return[]}}),R=W(()=>(G.value||[]).map((a,u)=>{const f=a.mime||L(a.data)||(a.name?z(a.name)==="pdf"&&"application/pdf":"")||"",C=z(a.name||"")||S(f),ee=a.size??null,H=a.name||`${O(f)} ${u+1}`;return{id:a.id??u+1,name:H,data:a.data||"",url:a.url||a.href||a.path||"",mime:f,ext:C,size:ee,filename:$(H,C)}}));ye(()=>x.modelValue,async a=>{a&&x.row?.id&&(await y.fetchById(x.row.id),d.value=y.selected||x.row)},{immediate:!1});const U=async a=>{const u=a.target.files?.[0];if(a.target.value="",!(!u||!d.value?.id)){if(u.size>qt){await _.fire("File too large","Maximum size is 10 MB.","warning");return}if(!P(u)){await _.fire("Unsupported file","Only images (PNG/JPEG/WEBP), PDF, DOCX, and XLSX are allowed.","warning");return}try{v.value=!0,await y.uploadAttachment(d.value.id,u),await y.fetchById(d.value.id),d.value=y.selected}finally{v.value=!1}}},I=async a=>{!d.value?.id||!(await _.fire({title:"Remove attachment?",icon:"warning",showCancelButton:!0,confirmButtonText:"Remove",confirmButtonColor:"#d33"})).isConfirmed||(await y.deleteAttachment(d.value.id,a),await y.fetchById(d.value.id),d.value=y.selected)},j=a=>{if(a.data&&String(a.data).startsWith("data:")&&A(a.mime)){const u=window.open();u&&u.document.write(`<img src="${a.data}" style="display:block;max-width:100%;height:auto;margin:0 auto;object-fit:contain"/>`);return}a.url&&window.open(String(a.url),"_blank")},X=a=>{const[u,f]=a.split(","),C=u.match(/data:([^;]+);base64/i)?.[1]||"application/octet-stream",ee=atob(f),H=ee.length,ie=new Uint8Array(H);for(let te=0;te<H;te++)ie[te]=ee.charCodeAt(te);return new Blob([ie],{type:C})},K=(a,u)=>{const f=URL.createObjectURL(a),C=document.createElement("a");C.href=f,C.download=u||"download",document.body.appendChild(C),C.click(),C.remove(),setTimeout(()=>URL.revokeObjectURL(f),1e3)},de=async a=>{if(a.data&&String(a.data).startsWith("data:")){const u=X(a.data);K(u,a.filename);return}if(a.url)try{const f=await(await fetch(a.url,{credentials:"include"})).blob();K(f,a.filename)}catch{const u=document.createElement("a");u.href=String(a.url),u.setAttribute("download",a.filename),document.body.appendChild(u),u.click(),u.remove()}},Z=a=>A(a.mime)?"Open":"Download",ce=a=>A(a.mime)?Qe:He,ue=a=>A(a.mime)?j(a):de(a);return(a,u)=>p.value?(g(),w("div",gt,[l("div",bt,[l("div",ht,[l("h2",xt,[u[1]||(u[1]=ae(" Utilization Attachments — ",-1)),l("span",_t,V(d.value?.reference_code||""),1)]),l("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:u[0]||(u[0]=f=>p.value=!1)},"Close")]),l("div",wt,[l("div",Ct,[u[2]||(u[2]=ae(" Activity: ",-1)),l("strong",null,V(d.value?.activity_design?.name_of_activity||"—"),1)]),l("label",{class:xe(["inline-flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white rounded text-xs cursor-pointer disabled:opacity-60",{"opacity-60 pointer-events-none":v.value}])},[(g(),w("svg",St,[l("path",{d:T(je)},null,8,At)])),l("span",null,V(v.value?"Uploading…":"Upload"),1),l("input",{type:"file",class:"hidden",disabled:v.value,onChange:U,accept:".png,.jpg,.jpeg,.webp,.pdf,.docx,.xlsx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,image/png,image/jpeg,image/webp"},null,40,kt)],2)]),l("div",Tt,[(g(!0),w(J,null,le(R.value,f=>(g(),w("div",{key:f.id,class:"border rounded-lg p-2 bg-gray-50 flex flex-col"},[l("div",Et,[A(f.mime)&&f.data&&f.data.startsWith("data:")?(g(),w("img",{key:0,src:f.data,class:"object-contain w-full h-full",alt:"Attachment preview"},null,8,Ft)):(g(),w("div",$t,[(g(),w("svg",{style:{width:"64px",height:"64px"},viewBox:"0 0 24 24","aria-hidden":"true",class:xe({"text-red-600":o(f.mime),"text-blue-600":s(f.mime),"text-emerald-600":m(f.mime),"text-gray-500":!f.mime||!A(f.mime)&&!o(f.mime)})},[l("path",{d:b(f.mime)},null,8,Bt)],2))]))]),l("div",Rt,[l("div",{class:"font-medium truncate",title:f.name},V(f.name),9,Vt),l("div",zt,[l("span",null,[ae(V(O(f.mime))+" ",1),f.ext?(g(),w("span",Ut,"("+V(f.ext.toUpperCase())+")",1)):q("",!0)]),f.size?(g(),w("span",It,V(Y(f.size)),1)):q("",!0)])]),l("div",Dt,[l("button",{class:"inline-flex items-center gap-1 px-2 py-1 bg-white border rounded text-xs hover:bg-gray-50",onClick:C=>ue(f),title:Z(f)},[(g(),w("svg",Lt,[l("path",{d:ce(f)},null,8,Nt)])),ae(" "+V(Z(f)),1)],8,Pt),l("button",{class:"inline-flex items-center gap-1 px-2 py-1 bg-red-600 text-white rounded text-xs",onClick:C=>I(f.id),title:"Remove"},[(g(),w("svg",Yt,[l("path",{d:T(Je)},null,8,jt)])),u[3]||(u[3]=ae(" Remove ",-1))],8,Ot)])]))),128))]),R.value.length?q("",!0):(g(),w("div",Mt," No attachments yet. "))])])):q("",!0)}},Gt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 backdrop-blur-sm"},Kt={class:"bg-white rounded-2xl shadow-2xl w-full sm:w-[1200px] max-w-[100vw] sm:max-w-[95vw] h-[100vh] sm:h-auto sm:max-h-[90vh] overflow-hidden"},Qt={class:"px-4 py-3 border-b flex items-center justify-between"},Ht={class:"p-2 overflow-auto"},Jt={__name:"CalendarViewModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","open"],setup(e,{emit:i}){const x=e,c=i,p=W({get:()=>x.modelValue,set:o=>c("update:modelValue",o)}),y=re(),d=h([]),v=(o,s=[])=>{if(Array.isArray(o))return o;try{return JSON.parse(o||"[]")||s}catch{return s}},B=(o=[])=>{d.value=o.map(s=>{const m=v(s.facilities),b=[];s.activity_design?.name_of_activity&&b.push(s.activity_design.name_of_activity),m.length&&b.push(m.join(", "));const O=b.join(" — ")||s.reference_code||"Utilization",S=s.start_date&&s.start_time&&`${s.start_date}T${s.start_time}:00`||s.start_at||null,$=s.end_date&&s.end_time&&`${s.end_date}T${s.end_time}:00`||s.end_at||null;return!S||!$?null:{id:String(s.id),title:O,start:S,end:$,backgroundColor:"#047857",borderColor:"#065f46",textColor:"#ffffff",extendedProps:{reference_code:s.reference_code,facilities:m,availability_status:s.availability_status,status:s.status}}}).filter(Boolean)},F=async()=>{await y.fetchAll({page:1,limit:500,status:"approved",order:"ASC",sort:"start_at"},!0),B(y.items.data||[])},z=o=>{const s=o?.event?.id;s&&c("open",Number(s))},L=h(!1),P=()=>{L.value=window.innerWidth<640};ve(()=>{P(),window.addEventListener("resize",P)});const A=W(()=>({plugins:[ut,mt,ft],initialView:"dayGridMonth",headerToolbar:L.value?{left:"prev,next",center:"title",right:"dayGridMonth"}:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},height:"auto",handleWindowResize:!0,expandRows:!0,navLinks:!0,eventDisplay:"block",eventClick:z,events:d.value}));return ye(()=>x.modelValue,o=>{o&&F()}),ye(()=>y.items.data,o=>{p.value&&B(o||[])},{deep:!0}),ve(()=>{p.value&&F()}),(o,s)=>p.value?(g(),w("div",Gt,[l("div",Kt,[l("div",Qt,[s[1]||(s[1]=l("h2",{class:"text-base font-semibold"},"Utilization Calendar (Approved)",-1)),l("button",{class:"px-3 py-1 text-xs bg-gray-200 rounded",onClick:s[0]||(s[0]=m=>p.value=!1)},"Close")]),l("div",Ht,[k(T(pt),{options:A.value},null,8,["options"])]),s[2]||(s[2]=l("div",{class:"px-4 py-2 text-[11px] text-gray-500 border-t"}," Click an event to open it. ",-1))])])):q("",!0)}},Xt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm"},Zt={class:"bg-white p-3 md:p-4 rounded-xl shadow-lg w-[560px] max-h-[85vh] overflow-y-auto"},ea={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm"},ta={class:"md:col-span-2"},aa=["value"],la={__name:"QuickAvailabilityModal",props:{modelValue:{type:Boolean,default:!1},facilities:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:i}){const x=e,c=i,p=re(),y=h(""),d=h("08:00"),v=h(""),B=h("10:00"),F=h([]),z=W(()=>(F.value||[]).filter(o=>x.facilities.includes(o))),L=()=>c("update:modelValue",!1),P=()=>{y.value="",d.value="08:00",v.value="",B.value="10:00",F.value=[]},A=async()=>{if(!y.value||!v.value||!z.value.length){await _.fire("Missing fields","Start/End dates and at least one facility are required.","info");return}try{const o=await p.checkAvailability({start_date:y.value,start_time:d.value||"00:00",end_date:v.value,end_time:B.value||"00:00",facilities:z.value}),s=o.available_for_all?"All selected facilities are available.":`Conflicts on: ${(o.conflict_facilities||[]).join(", ")||"—"}`;await _.fire({icon:o.available_for_all?"success":"warning",title:"Availability Result",html:`<div class="text-left text-sm">
        <div><strong>Facilities:</strong> ${(o.facilities||[]).join(", ")}</div>
        <div class="mt-2"><strong>Status:</strong> ${s}</div>
        <div class="mt-2"><strong>Conflicts:</strong> ${Array.isArray(o.conflicts)&&o.conflicts.length?`<ul class="list-disc ml-5">${o.conflicts.map(m=>`<li>${m.reference_code} — ${new Date(m.start_at).toLocaleString()} to ${new Date(m.end_at).toLocaleString()}</li>`).join("")}</ul>`:"None"}</div>
      </div>`})}catch(o){await _.fire("Error",p.error||"Failed to check availability.","error"),console.error(o)}};return(o,s)=>e.modelValue?(g(),w("div",Xt,[l("div",Zt,[l("div",{class:"flex items-center justify-between mb-2"},[s[5]||(s[5]=l("h3",{class:"text-base font-semibold"},"Quick Availability Check",-1)),l("button",{class:"px-2.5 py-1 text-[11px] bg-gray-200 rounded",onClick:L},"Close")]),l("div",ea,[l("div",null,[s[6]||(s[6]=l("label",{class:"block mb-0.5"},"Start Date",-1)),N(l("input",{"onUpdate:modelValue":s[0]||(s[0]=m=>y.value=m),type:"date",class:"w-full border rounded px-2 py-1.5"},null,512),[[Q,y.value]])]),l("div",null,[s[7]||(s[7]=l("label",{class:"block mb-0.5"},"Start Time",-1)),N(l("input",{"onUpdate:modelValue":s[1]||(s[1]=m=>d.value=m),type:"time",class:"w-full border rounded px-2 py-1.5"},null,512),[[Q,d.value]])]),l("div",null,[s[8]||(s[8]=l("label",{class:"block mb-0.5"},"End Date",-1)),N(l("input",{"onUpdate:modelValue":s[2]||(s[2]=m=>v.value=m),type:"date",class:"w-full border rounded px-2 py-1.5"},null,512),[[Q,v.value]])]),l("div",null,[s[9]||(s[9]=l("label",{class:"block mb-0.5"},"End Time",-1)),N(l("input",{"onUpdate:modelValue":s[3]||(s[3]=m=>B.value=m),type:"time",class:"w-full border rounded px-2 py-1.5"},null,512),[[Q,B.value]])]),l("div",ta,[s[10]||(s[10]=l("label",{class:"block mb-0.5"},"Facilities",-1)),N(l("select",{"onUpdate:modelValue":s[4]||(s[4]=m=>F.value=m),multiple:"",class:"w-full border rounded px-2 py-1.5 min-h-[40px]"},[(g(!0),w(J,null,le(e.facilities,m=>(g(),w("option",{key:m,value:m},V(m),9,aa))),128))],512),[[oe,F.value]]),s[11]||(s[11]=l("p",{class:"text-[11px] text-gray-500 mt-0.5"},"Hold Ctrl/Cmd to select multiple.",-1))])]),l("div",{class:"flex justify-end gap-1.5 mt-4"},[l("button",{class:"px-3 py-1.5 bg-gray-200 rounded text-xs",onClick:P},"Reset"),l("button",{class:"px-3 py-1.5 bg-indigo-600 text-white rounded text-xs",onClick:A},"Check")])])])):q("",!0)}},ia="KOLEHIYO NG PANTUKAN",na="Juan A. Sarenas Campus, Kingking, Pantukan, Davao de Oro",sa="https://osas.knp.edu.ph/verify-utilization?id=",ge=e=>e?be(e).format("MMMM DD, YYYY"):"—",Ae=e=>e?be(e).format("MMM DD, YYYY, h:mm A"):"—",ke=(e,i=0)=>e==null||e===""||Number.isNaN(Number(e))?"—":Number(e).toLocaleString(void 0,{minimumFractionDigits:i,maximumFractionDigits:i}),Te=(e,i)=>{if(Array.isArray(e))return e;try{return JSON.parse(e||"null")??i}catch{return i}},Fe="./",oa=`${Fe}images/logo.png`,ra=`${Fe}images/bg.jpg`;async function Ee(e){const x=await(await fetch(e)).blob();return new Promise(c=>{const p=new FileReader;p.onloadend=()=>c(p.result),p.readAsDataURL(x)})}function da(e){switch(e){case"APPROVED":return[32,141,85];case"PENDING":return[240,158,47];case"REJECTED":return[220,53,69];case"CANCELLED":return[107,114,128];case"COMPLETED":return[37,99,235];default:return[90,90,90]}}function ca(e){switch(String(e||"").toUpperCase()){case"AVAILABLE":return[16,185,129];case"RESERVED":return[99,102,241];case"CONFLICT":return[239,68,68];case"MAINTENANCE":return[245,158,11];case"PENDING-CHECK":return[245,158,11];default:return[107,114,128]}}async function ua(e){const i=e.internal.pageSize.getWidth(),x=110,c=36;try{const p=await Ee(ra);e.addImage(p,"JPEG",0,0,i,x,void 0,"FAST")}catch{e.setFillColor(21,62,121),e.rect(0,0,i,x,"F")}e.setGState(new e.GState({opacity:.18})),e.setFillColor(0,0,0),e.rect(0,0,i,x,"F"),e.setGState(new e.GState({opacity:1}));try{const p=await Ee(oa);e.addImage(p,"PNG",c,20,70,70,void 0,"FAST")}catch{}return e.setTextColor(255,255,255),e.setFont("helvetica","bold"),e.setFontSize(20),e.text(ia,c+86,38),e.setFont("helvetica","normal"),e.setFontSize(10),e.text(na,c+86,58),e.setTextColor(20),e.setFont("helvetica","bold"),e.setFontSize(14),e.text("UTILIZATION REQUEST",i/2,x+24,{align:"center"}),x+34}async function ma(e,i,x){const c=e.internal.pageSize.getWidth(),p=36,y=i?.id??i?.reference_code??"",d=`${sa}${encodeURIComponent(String(y))}`,v=await yt.toDataURL(d,{margin:0,width:75,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#FFFFFF"}}),B=String(i.status||"").toUpperCase(),[F,z,L]=da(B),P=String(i.availability_status||"").toUpperCase(),[A,o,s]=ca(P),m=i.approved_at?ge(i.approved_at):i.date_filed?ge(i.date_filed):"—",b=`osas.knp.edu.ph/verify-utilization?id=${String(y)}`;return D(e,{startY:x,theme:"plain",styles:{cellPadding:0,fontSize:9},bodyStyles:{minCellHeight:120},margin:{left:p,right:p},tableWidth:c-p*2,body:[[{content:""},{content:""}]],columnStyles:{0:{cellWidth:c-p*2-260},1:{cellWidth:260}},didDrawCell:O=>{if(O.section!=="body")return;const{x:S,y:$,width:Y,height:G}=O.cell,R=10;if(O.column.index===0){e.setFillColor(255,255,255),e.roundedRect(S,$,Y-1,G,6,6,"F");const U=24,I=Math.min(160,Y-22);e.setFillColor(F,z,L),e.roundedRect(S+R,$+R,I,U,12,12,"F"),e.setTextColor(255,255,255),e.setFont("helvetica","bold"),e.setFontSize(10),e.text(B||"STATUS",S+R+10,$+R+16);const j=$+R+U+10,X=Math.min(160,Y-22);e.setFillColor(A,o,s),e.roundedRect(S+R,j,X,U,12,12,"F"),e.setTextColor(255,255,255),e.text(P||"AVAILABILITY",S+R+10,j+16),e.setTextColor(20),e.setFont("helvetica","normal"),e.setFontSize(9);let K=j+U+12;e.text(`Ref No.: ${i.reference_code||"—"}`,S+R,K),K+=16,e.text(`Date Issued: ${m}`,S+R,K),e.setDrawColor(230),e.roundedRect(S,$,Y-1,G,6,6,"S")}if(O.column.index===1){e.setFillColor(255,255,255),e.roundedRect(S,$,Y-1,G,6,6,"F"),e.setFillColor(66,103,178),e.roundedRect(S,$,Y-1,22,6,6,"F"),e.setTextColor(255,255,255),e.setFont("helvetica","bold"),e.setFontSize(10),e.text("VERIFY",S+R,$+15);const U=S+R,I=$+28;e.addImage(v,"PNG",U,I,75,75,void 0,"FAST"),e.setTextColor(20),e.setFont("helvetica","bold"),e.setFontSize(10),e.text("Scan to verify",U+100,I+14),e.setFont("helvetica","normal"),e.setFontSize(9),e.text("This document can be verified",U+100,I+32),e.text("online via the OSAS portal.",U+100,I+46),e.setTextColor(110),e.setFontSize(8),e.text(b,U+100,I+72),e.setDrawColor(230),e.roundedRect(S,$,Y-1,G,6,6,"S")}}}),e.lastAutoTable.finalY}async function $e(e){const i=new Oe({unit:"pt",format:[612,936],orientation:"portrait"}),x=i.internal.pageSize.getWidth(),c=36,p=Te(e.facilities,[]),y=Te(e.equipment_items,[]);let d=await ua(i);d=await ma(i,e,d)+10,D(i,{startY:d,theme:"plain",styles:{fontSize:10},body:[[{content:"LINKED ACTIVITY",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",halign:"left",valign:"middle",cellPadding:6}}]],margin:{left:c,right:c}}),d=i.lastAutoTable.finalY;const v=e.activity_design||{};D(i,{startY:d,theme:"grid",styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},body:[[{content:"NAME OF ACTIVITY",styles:{fillColor:[243,248,255],fontStyle:"bold"}},v.name_of_activity||"—"],[{content:"DATE OF IMPLEMENTATION",styles:{fillColor:[243,248,255],fontStyle:"bold"}},ge(v.date_of_implementation)],[{content:"SEMESTER",styles:{fillColor:[243,248,255],fontStyle:"bold"}},v.semester||"—"],[{content:"SCHOOL YEAR",styles:{fillColor:[243,248,255],fontStyle:"bold"}},v.school_year||"—"],[{content:"OFFICE/DEPARTMENT",styles:{fillColor:[243,248,255],fontStyle:"bold"}},v.office_department||v?.club?.name||"—"]],columnStyles:{0:{cellWidth:200,fontStyle:"bold"},1:{cellWidth:"auto"}},margin:{left:c,right:c}}),d=i.lastAutoTable.finalY+10,D(i,{startY:d,theme:"plain",styles:{fontSize:10},body:[[{content:"SCHEDULE",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:c,right:c}}),d=i.lastAutoTable.finalY;const B=e.start_at||(e.start_date&&e.start_time?`${e.start_date}T${e.start_time}:00`:null),F=e.end_at||(e.end_date&&e.end_time?`${e.end_date}T${e.end_time}:00`:null);D(i,{startY:d,theme:"grid",styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},body:[[{content:"START",styles:{fillColor:[243,248,255],fontStyle:"bold"}},Ae(B)],[{content:"END",styles:{fillColor:[243,248,255],fontStyle:"bold"}},Ae(F)],[{content:"DURATION (mins)",styles:{fillColor:[243,248,255],fontStyle:"bold"}},ke(e.duration_minutes)]],columnStyles:{0:{cellWidth:200,fontStyle:"bold"},1:{cellWidth:"auto"}},margin:{left:c,right:c}}),d=i.lastAutoTable.finalY+10,D(i,{startY:d,theme:"plain",styles:{fontSize:10},body:[[{content:"FACILITIES",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:c,right:c}}),d=i.lastAutoTable.finalY;const z=Array.isArray(p)&&p.length?"• "+p.join(`
• `):"—";D(i,{startY:d,theme:"grid",styles:{fontSize:9,cellPadding:8},body:[[z]],margin:{left:c,right:c}}),d=i.lastAutoTable.finalY+10,D(i,{startY:d,theme:"plain",styles:{fontSize:10},body:[[{content:"EQUIPMENT / MATERIALS",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:c,right:c}}),d=i.lastAutoTable.finalY,Array.isArray(y)&&y.length?D(i,{startY:d,theme:"grid",styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},head:[["ITEM","QTY","UNIT"]],body:y.map(m=>[m?.name||"—",ke(m?.qty),m?.unit||"—"]),columnStyles:{0:{cellWidth:300},1:{cellWidth:70},2:{cellWidth:"auto"}},margin:{left:c,right:c}}):D(i,{startY:d,theme:"grid",styles:{fontSize:9,cellPadding:8},body:[["—"]],margin:{left:c,right:c}}),d=i.lastAutoTable.finalY+10;const L=[["UTILIZATION DETAILS",e.utilization_details],["REMARKS",e.remarks]];for(const[m,b]of L)D(i,{startY:d,theme:"plain",styles:{fontSize:10},body:[[{content:m,styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:c,right:c}}),d=i.lastAutoTable.finalY,D(i,{startY:d,theme:"grid",styles:{fontSize:9,cellPadding:8},body:[[b&&String(b).trim()?b:"—"]],margin:{left:c,right:c}}),d=i.lastAutoTable.finalY+10;D(i,{startY:d,theme:"plain",styles:{fontSize:10},body:[[{content:"APPROVAL",styles:{fillColor:[66,103,178],textColor:255,fontStyle:"bold",cellPadding:6}}]],margin:{left:c,right:c}}),d=i.lastAutoTable.finalY;const A=String(e?.file_by_user_name||"").trim()||(e?.filed_by?`${e.filed_by.first_name||""} ${e.filed_by.last_name||""}`.trim():""),o=e?.approver?`${e.approver.first_name||""} ${e.approver.last_name||""}`.trim():"";D(i,{startY:d,theme:"grid",styles:{fontSize:9,cellPadding:10},headStyles:{fillColor:[241,245,249],textColor:20,fontStyle:"bold"},head:[["PREPARED BY:","NOTED BY:","APPROVED BY:"]],body:[[A||" ","Albert P. Mapalo, LPT, MAEd",o||" "]],columnStyles:{0:{cellWidth:(x-c*2)/2},1:{cellWidth:"auto"}},didParseCell:m=>{m.section==="body"&&(m.cell.styles.halign="center",m.cell.styles.fontStyle="bold",m.cell.styles.cellPadding={top:16,right:10,bottom:18,left:10})},margin:{left:c,right:c}});const s=i.internal.pageSize.getHeight()-20;return i.setFontSize(8),i.setTextColor(120),i.text(`Generated on ${be().format("YYYY-MM-DD HH:mm")} • ${window.location.origin}`,c,s),i}async function fa(e){(await $e(e)).save(`${e.reference_code||"Utilization_Request"}.pdf`)}const pa={class:"flex flex-wrap items-center gap-2 w-full sm:w-auto justify-start sm:justify-end"},ya={class:"p-2 mb-4 rounded-xl border bg-white/60"},va={class:"flex items-center gap-2 mb-2 text-gray-700"},ga={class:"w-4 h-4",viewBox:"0 0 24 24"},ba=["d"],ha={class:"grid grid-cols-1 md:grid-cols-6 gap-2 text-sm"},xa={class:"md:col-span-2 flex"},_a={class:"w-5 h-5",viewBox:"0 0 24 24"},wa=["d"],Ca=["value"],Sa=["value"],Aa={class:"md:col-span-1"},ka={class:"md:col-span-1"},Ta={class:"md:col-span-2"},Ea=["value"],Fa={class:"flex flex-wrap gap-1 max-w-[380px]"},$a={key:0,class:"text-gray-400"},Ba={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/30"},Ra={class:"bg-white w-[560px] rounded-xl shadow p-4"},Va={class:"flex items-center justify-between mb-2"},za={class:"grid grid-cols-1 gap-2 text-sm"},Ua={class:"flex gap-2"},Ia={class:"text-[11px] text-gray-600"},Da={class:"mt-3 flex justify-end gap-2"},tl={__name:"UtilizationRequestsPage",setup(e){const i=re(),{isClub:x,activeClubId:c,withClub:p}=vt(),y=Pe(),d=Le(),v=h(!1),B=()=>{v.value=!0},F=h(!1),z=()=>{F.value=!0},L=async r=>{try{await i.fetchById(r);const t=i.selected;t&&await Z(t)}catch(t){console.error(t)}finally{v.value=!1}},P=["EB 101","EB 102","EB 103","NB 104","NB 105","NB Lobby","NB 106","NB 107","NB 201","NB 3SR","OB 108","OB 109","OB 110","OB 111","OB 112","OB 113","OB 114","OB 115","OB 116","OB 117","Gym","AVR","Student Lobby","Activity Center","Library","Ground"],A={range:!0,partialRange:!0,multiCalendars:2,modelType:"yyyy-MM-dd",enableTimePicker:!1,autoApply:!0,clearable:!0},o=h({page:1,limit:10,sort:"created_at",order:"DESC",q:"",status:"",availability_status:"",start_from:"",start_to:"",end_from:"",end_to:"",facilities_any:[]}),s=W({get:()=>{const{start_from:r,start_to:t}=o.value;return r||t?[r||null,t||null]:null},set:r=>{if(!r)o.value.start_from=null,o.value.start_to=null;else{const[t,n]=r;o.value.start_from=t||null,o.value.start_to=n||null}}}),m=W({get:()=>{const{end_from:r,end_to:t}=o.value;return r||t?[r||null,t||null]:null},set:r=>{if(!r)o.value.end_from=null,o.value.end_to=null;else{const[t,n]=r;o.value.end_from=t||null,o.value.end_to=n||null}}}),b=async(r={},t=!0)=>{o.value={...o.value,...r};const n=p({...o.value});["q","status","availability_status","start_from","start_to","end_from","end_to"].forEach(E=>{(n[E]===""||n[E]==null)&&delete n[E]}),(!Array.isArray(n.facilities_any)||!n.facilities_any.length)&&delete n.facilities_any,await i.fetchAll(n,t)};ve(async()=>{await b({page:1,limit:10,club_id:x?c:""})});const O=W(()=>({total:i.items.total||0,totalPages:i.items.totalPages||1,currentPage:i.items.currentPage||1,pageSize:i.items.pageSize||10,data:i.items.data||[]})),S=["draft","pending","approved","rejected","cancelled","completed"],$=["unknown","pending-check","available","conflict","reserved","maintenance"],Y=r=>{switch(String(r||"").toLowerCase()){case"draft":return"gray";case"pending":return"amber";case"approved":return"emerald";case"rejected":return"red";case"cancelled":return"zinc";case"completed":return"blue";default:return"gray"}},G=r=>{switch(String(r||"").toLowerCase()){case"available":return"emerald";case"reserved":return"indigo";case"conflict":return"red";case"maintenance":return"orange";case"pending-check":return"amber";default:return"gray"}},R=[{key:"reference_code",label:"Ref Code",sortable:!0,width:140},{key:"activity_design",label:"Activity",sortable:!1,minWidth:220,formatter:(r,t)=>t.activity_design?t.activity_design.name_of_activity:""},{key:"facilities",label:"Facilities",sortable:!1,minWidth:260},{key:"start_at",label:"Start",sortable:!0,width:170},{key:"end_at",label:"End",sortable:!0,width:170},{key:"availability_status",label:"Availability",sortable:!0,width:130},{key:"status",label:"Status",sortable:!0,width:120}],U=async r=>{await b(r)},I=h(!1),j=h(!1),X=h(null),K=()=>{I.value=!0},de=async r=>{await i.create(r),I.value=!1,await b({},!0)},Z=async r=>{await i.fetchById(r.id);const t=i.selected||r;let n=[],E=[];try{n=Array.isArray(t.facilities)?t.facilities:JSON.parse(t.facilities||"[]")}catch{}try{E=Array.isArray(t.equipment_items)?t.equipment_items:JSON.parse(t.equipment_items||"[]")}catch{}X.value={id:t.id,reference_code:t.reference_code,date_filed:t.date_filed||"",activity_design_id:t.activity_design_id||"",file_by_user_name:t.file_by_user_name||"",facilities:n,equipment_items:E,utilization_details:t.utilization_details||"",start_date:t.start_date||String(t.start_at||"").slice(0,10),start_time:t.start_time||(t.start_at?new Date(t.start_at).toTimeString().slice(0,5):""),end_date:t.end_date||String(t.end_at||"").slice(0,10),end_time:t.end_time||(t.end_at?new Date(t.end_at).toTimeString().slice(0,5):""),status:t.status||"draft",availability_status:t.availability_status||"pending-check",remarks:t.remarks||""},j.value=!0},ce=async r=>{const{id:t,...n}=r;await i.updateById(t,n),j.value=!1,await b({},!0)},ue=async r=>{if(!r?.id)return;(await _.fire({title:`Delete utilization "${r.reference_code}"?`,text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed&&(await i.deleteById(r.id),await b({},!0),await _.fire("Deleted","The utilization request has been deleted.","success"))},a=async r=>{await Z(r)},u=h(!1),f=h(null),C=h({from_email:"",from_name:"",to:"",subject:"",html:"",attachments:[]}),ee=async r=>{try{await i.fetchById(r.id);const t=i.selected||r,E=(await $e(t)).output("datauristring"),fe=String(E).split(",")[1]||"",De=`${t.reference_code||"Utilization_Request"}.pdf`;f.value=t,C.value={from_email:"osas@knp.edu.ph",from_name:`${y.user?.first_name||""} ${y.user?.last_name||""}`.trim(),to:"",subject:`Utilization Request ${t.reference_code||""}`.trim(),html:"Please see the attached file.",attachments:[{filename:De,content:fe,type:"application/pdf"}]},u.value=!0}catch{await _.fire("Error",i.error||"Failed to prepare email.","error")}},H=async()=>{const r=f.value;if(r)try{await i.sendEmail(r.id,{...C.value}),u.value=!1,await _.fire("Sent","Email sent successfully.","success")}catch{await _.fire("Error",i.error||"Failed to send email.","error")}},ie=async r=>{if((await _.fire({title:"Submit for approval?",text:"You can no longer edit after submission.",icon:"question",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed)try{await i.submit(r.id),await b({},!0),await _.fire("Submitted","Utilization request is now pending approval.","success")}catch{await _.fire("Error",i.error||"Failed to submit request.","error")}},te=async r=>{const t=await _.fire({title:"Approve utilization?",input:"textarea",inputLabel:"Remarks (optional)",inputPlaceholder:"Add a note…",showCancelButton:!0,confirmButtonText:"Approve",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1});if(!t.isConfirmed)return;const n=t.value||"";try{await i.approve(r.id,n),await b({},!0),await _.fire("Approved","Utilization has been approved and reserved.","success")}catch{await _.fire("Error",i.error||"Failed to approve request.","error")}},Be=async r=>{const t=await _.fire({title:"Reject utilization?",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"State the reason…",inputValidator:E=>E?.trim()?void 0:"Reason is required",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Reject",cancelButtonText:"Cancel",allowOutsideClick:!1,allowEscapeKey:!1});if(!t.isConfirmed)return;const n=t.value;try{await i.reject(r.id,n),await b({},!0),await _.fire("Rejected","Utilization has been rejected.","success")}catch{await _.fire("Error",i.error||"Failed to reject request.","error")}},Re=async r=>{const t=await _.fire({title:"Cancel utilization?",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"State the reason…",inputValidator:E=>E?.trim()?void 0:"Reason is required",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Cancel Utilization",cancelButtonText:"Keep",allowOutsideClick:!1,allowEscapeKey:!1});if(!t.isConfirmed)return;const n=t.value;try{await i.cancel(r.id,n),await b({},!0),await _.fire("Cancelled","Utilization has been cancelled.","success")}catch{await _.fire("Error",i.error||"Failed to cancel request.","error")}},Ve=async r=>{if(String(r?.status||"").toLowerCase()!=="approved"){await _.fire("Not allowed","Only approved utilization request can be printed.","info");return}try{await i.fetchById(r.id);const n=i.selected||r;await fa(n)}catch(n){await _.fire("Error",i.error||"Failed to generate PDF.","error"),console.error(n)}},me=h(!1),he=h(null),ze=async r=>{await i.fetchById(r.id),he.value=i.selected||r,me.value=!0};h(""),h("08:00"),h(""),h("10:00"),h([]);const ne=h([]),Ue=async()=>{o.value.facilities_any=(ne.value||[]).slice(),await b({page:1})},Ie=async()=>{ne.value=[],await b({q:"",status:"",availability_status:"",start_from:"",start_to:"",end_from:"",end_to:"",facilities_any:[],page:1})};return(r,t)=>(g(),w(J,null,[k(Xe,null,{default:M(()=>[k(Ze,null,{default:M(()=>[T(i).error?(g(),_e(dt,{key:0,icon:T(et),color:"danger"},{default:M(()=>[ae(V(T(i).error),1)]),_:1},8,["icon"])):q("",!0),k(rt,{icon:T(tt),title:"Utilization Requests",main:""},{default:M(()=>[l("div",pa,[k(se,{icon:T(at),color:"info",label:"View Calendar",onClick:B},null,8,["icon"]),k(se,{icon:T(lt),color:"info",label:"Quick Check",onClick:z},null,8,["icon"]),k(se,{icon:T(it),color:"primary",label:"New Request",onClick:K},null,8,["icon"]),k(se,{icon:T(nt),color:"info",label:"Refresh",onClick:t[0]||(t[0]=n=>b({},!0))},null,8,["icon"])])]),_:1},8,["icon"]),l("div",ya,[l("div",va,[(g(),w("svg",ga,[l("path",{d:T(st)},null,8,ba)])),t[21]||(t[21]=l("span",{class:"font-medium text-sm"},"Filters",-1))]),l("div",ha,[l("div",xa,[N(l("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.value.q=n),placeholder:"Search by ref, details, remarks…",class:"border rounded-s px-2 py-2 flex-1",onKeyup:t[2]||(t[2]=Ne(n=>b({page:1}),["enter"]))},null,544),[[Q,o.value.q]]),l("button",{class:"px-3 border border-l-0 rounded-e bg-gray-50",title:"Search",onClick:t[3]||(t[3]=n=>b({page:1}))},[(g(),w("svg",_a,[l("path",{d:T(ot)},null,8,wa)]))])]),N(l("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>o.value.status=n),class:"border rounded px-2 py-2"},[t[22]||(t[22]=l("option",{value:""},"All status",-1)),(g(),w(J,null,le(S,n=>l("option",{key:n,value:n},V(n),9,Ca)),64))],512),[[oe,o.value.status]]),N(l("select",{"onUpdate:modelValue":t[5]||(t[5]=n=>o.value.availability_status=n),class:"border rounded px-2 py-2"},[t[23]||(t[23]=l("option",{value:""},"Any availability",-1)),(g(),w(J,null,le($,n=>l("option",{key:n,value:n},V(n),9,Sa)),64))],512),[[oe,o.value.availability_status]]),l("div",Aa,[k(T(Ce),we({modelValue:s.value,"onUpdate:modelValue":t[6]||(t[6]=n=>s.value=n)},A,{placeholder:"Start date range"}),null,16,["modelValue"])]),l("div",ka,[k(T(Ce),we({modelValue:m.value,"onUpdate:modelValue":t[7]||(t[7]=n=>m.value=n)},A,{placeholder:"End date range"}),null,16,["modelValue"])]),l("div",Ta,[t[24]||(t[24]=l("label",{class:"block text-[11px] text-gray-600 mb-1"},"Facilities (any)",-1)),N(l("select",{"onUpdate:modelValue":t[8]||(t[8]=n=>ne.value=n),multiple:"",class:"w-full border rounded px-2 py-2 min-h-[38px]"},[(g(),w(J,null,le(P,n=>l("option",{key:n,value:n},V(n),9,Ea)),64))],512),[[oe,ne.value]])]),l("div",{class:"flex items-center gap-2 md:col-span-2"},[l("button",{class:"px-4 py-2 bg-blue-600 text-white rounded text-xs",onClick:Ue}," Apply Filters "),l("button",{class:"px-4 py-2 bg-gray-200 rounded text-xs",onClick:Ie},"Reset")])])]),k(ct,{columns:R,data:O.value,loading:T(i).isLoading,onQueryChange:U},{"cell-facilities":M(({row:n})=>[l("div",Fa,[(g(!0),w(J,null,le((()=>{try{return Array.isArray(n.facilities)?n.facilities:JSON.parse(n.facilities||"[]")}catch{return[]}})(),(E,fe)=>(g(),_e(pe,{key:fe,text:E,tone:"slate"},null,8,["text"]))),128)),n.facilities&&JSON.parse(n.facilities||"[]").length?q("",!0):(g(),w("span",$a,"—"))])]),"cell-start_at":M(({value:n})=>[l("span",null,V(n?new Date(n).toLocaleString():"—"),1)]),"cell-end_at":M(({value:n})=>[l("span",null,V(n?new Date(n).toLocaleString():"—"),1)]),"cell-availability_status":M(({value:n})=>[k(pe,{text:n||"—",tone:G(n)},null,8,["text","tone"])]),"cell-status":M(({value:n})=>[k(pe,{text:n||"—",tone:Y(n)},null,8,["text","tone"])]),"cell-actions":M(({row:n})=>[k(Ye,{row:n,moderator:["admin","manager"].includes(String(T(y).user?.role||"").toLowerCase()),onAttachments:ze,onSubmit:ie,onApprove:te,onReject:Be,onEdit:Z,onDelete:ue,onView:E=>a(n),onCancel:Re,onPrint:Ve,onEmail:ee},null,8,["row","moderator","onView"])]),_:1},8,["data","loading"])]),_:1})]),_:1}),k(Se,{modelValue:I.value,"onUpdate:modelValue":t[9]||(t[9]=n=>I.value=n),mode:"create",onSubmit:de},null,8,["modelValue"]),k(Se,{modelValue:j.value,"onUpdate:modelValue":t[10]||(t[10]=n=>j.value=n),mode:"edit",initial:X.value||{},onSubmit:ce},null,8,["modelValue","initial"]),k(Wt,{modelValue:me.value,"onUpdate:modelValue":t[11]||(t[11]=n=>me.value=n),row:he.value},null,8,["modelValue","row"]),k(Jt,{modelValue:v.value,"onUpdate:modelValue":t[12]||(t[12]=n=>v.value=n),onOpen:L},null,8,["modelValue"]),k(la,{modelValue:F.value,"onUpdate:modelValue":t[13]||(t[13]=n=>F.value=n),facilities:P},null,8,["modelValue"]),u.value?(g(),w("div",Ba,[l("div",Ra,[l("div",Va,[t[25]||(t[25]=l("h3",{class:"text-base font-semibold"},"Send Email",-1)),l("button",{class:"px-2 py-1 text-xs bg-gray-200 rounded",onClick:t[14]||(t[14]=n=>u.value=!1)},"Close")]),l("div",za,[l("div",null,[t[26]||(t[26]=l("label",{class:"block mb-0.5"},"To",-1)),l("div",Ua,[N(l("input",{"onUpdate:modelValue":t[15]||(t[15]=n=>C.value.to=n),class:"flex-1 border rounded px-2 py-1.5",placeholder:"recipient@example.com"},null,512),[[Q,C.value.to]]),l("button",{class:"px-2 py-1 text-[11px] rounded border bg-gray-50 hover:bg-gray-100",onClick:t[16]||(t[16]=()=>{const n=f.value?.filed_by_user_id||f.value?.filed_by?.id;n&&T(d).fetchById(n).then(()=>{const E=T(d).selectedUser?.email;E&&(C.value.to=E)})})},"Use Filer"),l("button",{class:"px-2 py-1 text-[11px] rounded border bg-rose-50 hover:bg-rose-100",onClick:t[17]||(t[17]=()=>{C.value.attachments=[]})},"Remove Attachment")])]),l("div",null,[t[27]||(t[27]=l("label",{class:"block mb-0.5"},"Subject",-1)),N(l("input",{"onUpdate:modelValue":t[18]||(t[18]=n=>C.value.subject=n),class:"w-full border rounded px-2 py-1.5"},null,512),[[Q,C.value.subject]])]),l("div",null,[t[28]||(t[28]=l("label",{class:"block mb-0.5"},"Message",-1)),N(l("textarea",{"onUpdate:modelValue":t[19]||(t[19]=n=>C.value.html=n),rows:"4",class:"w-full border rounded px-2 py-1.5"},null,512),[[Q,C.value.html]])]),l("div",Ia,"Attachment: "+V(C.value.attachments?.[0]?.filename||"utilization.pdf"),1)]),l("div",Da,[l("button",{class:"px-3 py-1.5 text-xs bg-gray-200 rounded",onClick:t[20]||(t[20]=n=>u.value=!1)},"Cancel"),l("button",{class:"px-3 py-1.5 text-xs bg-emerald-600 text-white rounded",onClick:H},"Send")])])])):q("",!0)],64))}};export{tl as default};
