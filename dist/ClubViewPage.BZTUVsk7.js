import{u as ce,c as i,x as ue,r as _,o as me,C as ve,A as pe,l as X,q as o,f as _e,e,a,d as u,t as n,k as x,g as m,j as Y,h as O,v as xe,E as Z,F as ee,G as te,O as fe}from"./index.B-Q-J4WK.js";import{_ as ge,a as he,s as se,v as be,w as ye,x as we,c as Ce,q as ke}from"./SectionMain.C5xrv34b.js";import{u as Le}from"./club.WAbvTr5t.js";import{_ as je}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./ToasterComponent.DeljTacu.js";const $e={class:"relative overflow-hidden rounded-2xl border bg-white shadow-sm"},Se={class:"relative h-48 sm:h-64 w-full bg-gray-100 rounded-t-2xl overflow-hidden"},Ue=["src"],Be={key:1,class:"flex h-full w-full items-center justify-center bg-gradient-to-r from-indigo-50 to-blue-50 text-indigo-500"},Ae={class:"relative px-4 sm:px-6 pb-5"},Oe={class:"-mt-10 sm:-mt-12 flex flex-col sm:flex-row items-start sm:items-end gap-4"},Ve={class:"h-24 w-24 sm:h-28 sm:w-28 rounded-2xl border-4 border-white bg-gray-100 overflow-hidden shadow"},De=["src"],Ne={key:1,class:"flex h-full w-full items-center justify-center bg-gray-200 text-gray-600 font-semibold"},Pe={class:"mt-2 sm:mt-11"},Ee={class:"text-xl font-semibold text-gray-900"},Me={class:"text-sm text-gray-500"},Re={key:0,class:"mt-1 inline-flex items-center rounded-full bg-indigo-50 px-2 py-[2px] text-[11px] text-indigo-700 ring-1 ring-indigo-200"},Ie={class:"mt-2 text-xs text-gray-500 inline-flex items-center gap-3 flex-wrap"},ze={key:0,class:"inline-flex items-center gap-1"},Fe={style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},Ke=["d"],Te={key:1,class:"inline-flex items-center gap-1"},We={style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},Ge=["d"],Qe=["href"],qe={key:2,class:"inline-flex items-center gap-1"},He={style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},Je=["d"],Xe=["href"],Ye={key:3,class:"inline-flex items-center gap-1"},Ze={style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},et=["d"],tt=["href"],st={key:0,class:"mt-4 max-w-3xl text-sm text-gray-700 whitespace-pre-line"},lt={class:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6"},ot={class:"lg:col-span-2 space-y-6"},at={class:"rounded-2xl border bg-white shadow-sm"},nt={class:"border-b px-4 sm:px-6 py-3 flex items-center justify-between"},it={class:"text-sm font-semibold text-gray-800 inline-flex items-center gap-2"},rt={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},dt=["d"],ct={class:"text-xs text-gray-500"},ut={class:"p-4 sm:p-6"},mt={class:"flex flex-col sm:flex-row gap-2 sm:items-center"},vt={key:0,class:"mt-4 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4"},pt={key:1,class:"mt-4 text-sm text-gray-500"},_t={key:2,class:"mt-4 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4"},xt=["title","onClick","onKeyup"],ft={class:"flex items-center gap-3"},gt={class:"h-10 w-10 rounded-full bg-gray-100 overflow-hidden flex items-center justify-center text-xs font-semibold text-gray-600"},ht=["src"],bt={key:1},yt={class:"min-w-0"},wt={class:"truncate text-sm font-medium text-gray-900"},Ct={class:"truncate text-xs text-gray-500"},kt={class:"truncate text-xs text-gray-500"},Lt={class:"mt-3 flex items-center justify-between"},jt={class:"inline-flex items-center rounded-full bg-indigo-50 px-2 py-[2px] text-[11px] text-indigo-700 ring-1 ring-indigo-200"},$t={class:"mt-2 text-[11px] text-gray-500 inline-flex items-center gap-1"},St={style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},Ut=["d"],Bt={key:3,class:"mt-4 flex items-center justify-between text-xs text-gray-600"},At=["disabled"],Ot=["disabled"],Vt={class:"space-y-6"},Dt={class:"rounded-2xl border bg-white shadow-sm"},Nt={class:"border-b px-4 sm:px-6 py-3"},Pt={class:"text-sm font-semibold text-gray-800 inline-flex items-center gap-2"},Et={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},Mt=["d"],Rt={class:"p-4 sm:p-6 text-sm text-gray-700 space-y-2"},It={class:"flex items-center justify-between"},zt={class:"text-gray-500"},Ft={class:"flex items-center justify-between"},Kt={class:"text-gray-500"},Tt={class:"flex items-center justify-between"},Wt={class:"text-gray-500"},Gt={class:"flex items-center justify-between"},Qt={class:"text-gray-500"},qt={class:"flex items-center justify-between"},Ht={class:"text-gray-500 truncate max-w-[55%]"},Jt=["href"],Xt={key:1},Yt={class:"flex items-center justify-between"},Zt={class:"text-gray-500 truncate max-w-[55%]"},es=["href"],ts={key:1},ss={class:"flex items-center justify-between"},ls={class:"text-gray-500"},os={__name:"ClubViewPage",setup(as){const le=ue(),V=Le();ce();const oe="https://knp.edu.ph",D=i(()=>le.params.id),b=_(!1);me(async()=>{if(D.value){b.value=!0;try{await V.fetchById(D.value)}finally{b.value=!1}}});const r=i(()=>V.selectedClub||{}),N=l=>l?l.startsWith?.("data:")||l.startsWith?.("http")?l:`${oe}${l}`:"",P=i(()=>N(r.value.banner||"")),E=i(()=>N(r.value.logo||"")),M=i(()=>r.value.name||"—"),R=i(()=>r.value.code||""),$=i(()=>r.value.category||""),I=i(()=>r.value.description||""),y=i(()=>r.value.established_at?new Date(r.value.established_at):null),v=i(()=>r.value.website||""),p=i(()=>r.value.email||""),w=i(()=>r.value.phone||""),S=i(()=>r.value.is_active!==!1),U=i(()=>Array.isArray(r.value.users)?r.value.users:[]),z=["president","vice-president","secretary","treasurer","pio","business manager","bod","officer"],B=l=>(l??"member").toString().trim().toLowerCase()||"member",F=l=>{const t=B(l);if(t==="member")return 999;const s=z.indexOf(t);return s===-1?z.indexOf("officer"):s},K=l=>(l||"").split(" ").filter(Boolean).map(t=>t[0]).join("").slice(0,2).toUpperCase(),ae=l=>{if(!l)return"—";const t=new Date(l);return isNaN(t)?"—":t.toLocaleDateString()},C=_(""),f=_("all"),g=_("all"),k=l=>B(l?.UserClub?.role)!=="member",L=l=>{const t=(l??"active").toString().trim().toLowerCase();return["pending","active","inactive"].includes(t)?t:"active"},ne=(l,t)=>{if(!t)return!0;const s=`${l.first_name||""} ${l.last_name||""}`.toLowerCase(),c=(l.username||"").toLowerCase(),j=(l.email||"").toLowerCase();return s.includes(t)||c.includes(t)||j.includes(t)},h=i(()=>{const l=C.value.trim().toLowerCase();let t=U.value.slice();return f.value==="officers"?t=t.filter(k):f.value==="members"&&(t=t.filter(s=>!k(s))),g.value!=="all"&&(t=t.filter(s=>L(s?.UserClub?.status)===g.value)),l&&(t=t.filter(s=>ne(s,l))),t.sort((s,c)=>{const j=F(s?.UserClub?.role),G=F(c?.UserClub?.role);if(j!==G)return j-G;const Q=(s.last_name||"").toLowerCase(),q=(c.last_name||"").toLowerCase();if(Q!==q)return Q.localeCompare(q);const H=(s.first_name||"").toLowerCase(),J=(c.first_name||"").toLowerCase();return H!==J?H.localeCompare(J):(s.username||"").toLowerCase().localeCompare((c.username||"").toLowerCase())})}),ie=i(()=>(U.value||[]).filter(k).length),re=i(()=>(U.value||[]).filter(l=>!k(l)).length),d=_(1),A=_(12);ve([C,f,g],()=>{d.value=1});const T=i(()=>Math.max(1,Math.ceil((h.value.length||0)/A.value))),de=i(()=>{const l=(d.value-1)*A.value;return h.value.slice(l,l+A.value)}),W=l=>{l&&window.open(`/#/profile/${l}`,"_self")};return(l,t)=>(o(),pe(ge,null,{default:X(()=>[_e(he,null,{default:X(()=>[e("div",$e,[e("div",Se,[P.value?(o(),a("img",{key:0,src:P.value,alt:"Banner",class:"h-full w-full object-cover"},null,8,Ue)):(o(),a("div",Be,t[5]||(t[5]=[e("span",{class:"text-sm"},"No banner",-1)])))]),e("div",Ae,[e("div",Oe,[e("div",Ve,[E.value?(o(),a("img",{key:0,src:E.value,alt:"Logo",class:"h-full w-full object-cover"},null,8,De)):(o(),a("div",Ne,n(K(M.value)),1))]),e("div",Pe,[e("div",Ee,n(M.value),1),e("div",Me,"@"+n(R.value),1),$.value?(o(),a("div",Re,n($.value),1)):u("",!0),e("div",Ie,[y.value?(o(),a("span",ze,[(o(),a("svg",Fe,[e("path",{d:m(se)},null,8,Ke)])),x(" Established "+n(y.value.toLocaleDateString()),1)])):u("",!0),v.value?(o(),a("span",Te,[(o(),a("svg",We,[e("path",{d:m(be)},null,8,Ge)])),e("a",{href:v.value,target:"_self",rel:"noopener",class:"underline decoration-dotted"},n(v.value),9,Qe)])):u("",!0),p.value?(o(),a("span",qe,[(o(),a("svg",He,[e("path",{d:m(ye)},null,8,Je)])),e("a",{href:`mailto:${p.value}`,class:"underline decoration-dotted"},n(p.value),9,Xe)])):u("",!0),w.value?(o(),a("span",Ye,[(o(),a("svg",Ze,[e("path",{d:m(we)},null,8,et)])),e("a",{href:`tel:${w.value}`,class:"underline decoration-dotted"},n(w.value),9,tt)])):u("",!0),e("span",{class:Y(["inline-flex items-center rounded-full px-2 py-[2px] text-[11px] ring-1",S.value?"bg-emerald-50 text-emerald-700 ring-emerald-200":"bg-gray-50 text-gray-700 ring-gray-200"])},n(S.value?"Active":"Inactive"),3)])])]),I.value?(o(),a("div",st,n(I.value),1)):u("",!0)])]),e("div",lt,[e("div",ot,[e("div",at,[e("div",nt,[e("h3",it,[(o(),a("svg",rt,[e("path",{d:m(Ce)},null,8,dt)])),t[6]||(t[6]=x(" Members ",-1))]),e("div",ct,[x(n(b.value?"Loading…":`${h.value.length} member(s)`)+" ",1),t[7]||(t[7]=e("span",{class:"mx-1"},"•",-1)),x(" Officers: "+n(ie.value)+" | Members: "+n(re.value),1)])]),e("div",ut,[e("div",mt,[O(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>C.value=s),type:"text",placeholder:"Search by name, username, or email…",class:"w-full sm:flex-1 rounded-lg border px-3 py-2 text-sm",autocomplete:"off"},null,512),[[xe,C.value]]),O(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),class:"rounded-lg border px-2 py-2 text-sm"},t[8]||(t[8]=[e("option",{value:"all"},"All roles",-1),e("option",{value:"officers"},"Officers",-1),e("option",{value:"members"},"Members",-1)]),512),[[Z,f.value]]),O(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),class:"rounded-lg border px-2 py-2 text-sm"},t[9]||(t[9]=[e("option",{value:"all"},"All statuses",-1),e("option",{value:"pending"},"pending",-1),e("option",{value:"active"},"active",-1),e("option",{value:"inactive"},"inactive",-1)]),512),[[Z,g.value]])]),b.value?(o(),a("div",vt,[(o(),a(ee,null,te(6,s=>e("div",{key:s,class:"animate-pulse rounded-xl border p-4"},t[10]||(t[10]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"h-10 w-10 rounded-full bg-gray-200"}),e("div",{class:"flex-1"},[e("div",{class:"h-3 w-2/3 bg-gray-200 rounded mb-2"}),e("div",{class:"h-3 w-1/3 bg-gray-100 rounded"})])],-1),e("div",{class:"mt-3 h-5 w-24 bg-gray-100 rounded"},null,-1)]))),64))])):h.value.length?(o(),a("div",_t,[(o(!0),a(ee,null,te(de.value,s=>(o(),a("div",{key:s.id,class:"group rounded-xl border p-4 bg-white hover:shadow-sm transition cursor-pointer focus:outline-none focus:ring-2 focus:ring-indigo-300",role:"button",tabindex:"0",title:`Open profile of ${s.first_name||""} ${s.last_name||""}`,onClick:c=>W(s.id),onKeyup:fe(c=>W(s.id),["enter"])},[e("div",ft,[e("div",gt,[s.avatar?(o(),a("img",{key:0,src:s.avatar,alt:"",class:"h-full w-full object-cover"},null,8,ht)):(o(),a("span",bt,n(K(`${s.first_name||""} ${s.last_name||""}`||s.username)),1))]),e("div",yt,[e("div",wt,n(s.first_name)+" "+n(s.last_name),1),e("div",Ct,"@"+n(s.username),1),e("div",kt,n(s.email),1)])]),e("div",Lt,[e("span",jt,n(B(s.UserClub?.role)),1),e("span",{class:Y(["inline-flex items-center rounded-full px-2 py-[2px] text-[11px] ring-1",L(s.UserClub?.status)==="active"?"bg-emerald-50 text-emerald-700 ring-emerald-200":L(s.UserClub?.status)==="pending"?"bg-amber-50 text-amber-700 ring-amber-200":"bg-gray-50 text-gray-700 ring-gray-200"])},n(L(s.UserClub?.status)),3)]),e("div",$t,[(o(),a("svg",St,[e("path",{d:m(se)},null,8,Ut)])),x(" since "+n(ae(s.UserClub?.joined_at)),1)])],40,xt))),128))])):(o(),a("div",pt," No members found. ")),h.value.length?(o(),a("div",Bt,[e("button",{class:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",disabled:d.value<=1,onClick:t[3]||(t[3]=s=>d.value=d.value-1)}," Previous ",8,At),e("div",null,"Page "+n(d.value)+" of "+n(T.value),1),e("button",{class:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",disabled:d.value>=T.value,onClick:t[4]||(t[4]=s=>d.value=d.value+1)}," Next ",8,Ot)])):u("",!0)])])]),e("div",Vt,[e("div",Dt,[e("div",Nt,[e("h3",Pt,[(o(),a("svg",Et,[e("path",{d:m(ke)},null,8,Mt)])),t[11]||(t[11]=x(" Club Info ",-1))])]),e("div",Rt,[e("div",It,[t[12]||(t[12]=e("span",null,"Code",-1)),e("span",zt,"@"+n(R.value||"—"),1)]),e("div",Ft,[t[13]||(t[13]=e("span",null,"Category",-1)),e("span",Kt,n($.value||"—"),1)]),e("div",Tt,[t[14]||(t[14]=e("span",null,"Status",-1)),e("span",Wt,n(S.value?"Active":"Inactive"),1)]),e("div",Gt,[t[15]||(t[15]=e("span",null,"Established",-1)),e("span",Qt,n(y.value?y.value.toLocaleDateString():"—"),1)]),e("div",qt,[t[16]||(t[16]=e("span",null,"Website",-1)),e("span",Ht,[v.value?(o(),a("a",{key:0,href:v.value,target:"_self",rel:"noopener",class:"underline decoration-dotted"},n(v.value),9,Jt)):(o(),a("span",Xt,"—"))])]),e("div",Yt,[t[17]||(t[17]=e("span",null,"Email",-1)),e("span",Zt,[p.value?(o(),a("a",{key:0,href:`mailto:${p.value}`,class:"underline decoration-dotted"},n(p.value),9,es)):(o(),a("span",ts,"—"))])]),e("div",ss,[t[18]||(t[18]=e("span",null,"Phone",-1)),e("span",ls,n(w.value||"—"),1)])])])])])]),_:1})]),_:1}))}},us=je(os,[["__scopeId","data-v-7a6e2bf7"]]);export{us as default};
